{"version":3,"sources":["VMain.tsx","CBase.ts","currentUser.ts","tools/inputValidations.ts","me/EditMeInfo.tsx","tvs/common.tsx","configuration.ts","tvs/index.tsx","tvs/webuser.tsx","me/loginTop.tsx","me/VMe.tsx","tools/productImage.tsx","tools/minusPlusWidget.tsx","pointShop/VLotteryProduct.tsx","pointShop/CLottery.tsx","pointShop/EditProductGenre.tsx","pointShop/VProductGenre.tsx","pointShop/CGenre.tsx","me/CMe.tsx","lordScreen/VLordScreen.tsx","lordScreen/CLordScreen.tsx","tools/momentFormat.ts","product/VProductOperation.tsx","product/VUpdateProductImage.tsx","lordScreen/VSearchHeader.tsx","product/VSiteHeader.tsx","product/VProduct.tsx","product/VCreationProduct.tsx","product/VPointProductPost.tsx","product/VPointProductPostShow.tsx","product/VPostOperaLabel.tsx","tools/wFeatch.ts","product/CProduct.tsx","pointShop/VPointProduct.tsx","pointShop/CPointProduct.tsx","report/VProductViews.tsx","report/VPointsDist.tsx","report/VPointProductVisitRecord.tsx","report/CReport.tsx","consts.ts","media/VMain.tsx","media/VShowImg.tsx","media/VEdit.tsx","media/VChangeNames.tsx","media/VCat.tsx","media/VPickCat.tsx","media/VCatImage.tsx","media/VSlideShow.tsx","posts/VPickImage.tsx","media/VEditSlideShow.tsx","media/VFile.tsx","upLoader/upLoader.tsx","media/VAddFile.tsx","media/VFileEdit.tsx","media/CMedia.tsx","res/index.ts","res/en.ts","posts/CPosts.tsx","CPointShopMsApp.tsx","App.tsx","serviceWorker.js","index.tsx","images/logo.png"],"names":["color","selected","VMain","render","param","controller","cMe","faceTabs","name","label","icon","content","cProduct","tab","notify","undefined","map","v","caption","TabCaptionComponent","header","tabsProps","tabs","this","openPage","VPage","CUqBase","_cApp","_uqs","CBase","CUqApp","type","c","init","CAppBase","WebUser","uqs","id","nick","guest","token","gender","salutation","departmentName","telephone","email","fax","address","addressString","zipCode","_user","webUserSettings","setUser","user","a","loadWebUser","webuser","load","webUser","firstName","organizationName","WebUserContact","obj","contact","mobile","WebUserSetting","WebUserContacts","table","contactId","add","arr1","del","shippingContact","saveDefaultSettings","invoiceContact","invoiceTypeId","invoiceInfoId","invoiceType","invoiceInfo","save","webUserContact","observable","productPointValidation","value","test","productGenreValidation","length","EditMeInfo","props","schema","uiSchema","items","widget","placeholder","onItemChanged","itemSchema","newValue","preValue","userApi","userSetProp","data","nav","saveLocalUser","onWebUserChanged","webUserData","changeWebUser","onWebUserContactChanged","webUserContactData","changeWebUserContact","page","cApp","currentUser","tvCountry","values","chineseName","appConfig","appName","version","tvs","className","common","country","province","city","county","tv","currency","loginTop","src","logo","alt","oem","MadiaType","GLOABLE","env","testing","CHINA","CHINESE","SALESREGION_CN","TIPDISPLAYTIME","CONTENTSITE","JD","UnderDevelopment","VMe","changePassword","openProuctGenre","openProductGenre","openLottery","openProductViews","cReport","openPointsDist","meInfo","observer","left","right","onClick","openVPage","userSpan","String","substr","showLogout","rows","aboutRows","component","iconClass","text","push","showLogin","size","logOutRows","bk","exit","altimagePath","JDImagePath","PointProductImage","style","chemicalId","startsWith","pointProductImagePath","altImage","keys","MinusPlusWidget","minusClick","getValue","setValue","plusClick","ref","input","p","parentElement","tagName","disabled","renderContent","renderTemplet","cn","hasError","required","cursorPointer","minusColor","plusColor","hasFocus","hasAction","readOnly","hasValue","isNaN","minus","classNames","invisible","defaultValue","onChange","onKeyDown","onFocus","evt","onBlur","maxLength","plus","renderErrors","key","find","UpdownWidget","VLotteryProduct","visible","descriptionC","quantity","WidgetClass","onChanged","onQuantityChanged","imageUrl","delLotteryProducts","product","index","getTotalPR","lotteryProducts","splice","renderLotteryProduct","isAddProduct","top","formData","totalPR","openLotteryProductQueryLib","none","item","VLotteryProductQueryLib","QProductLib","CLottery","openLotteryProduct","getLotteryProducts","getQProductLib","total","forEach","el","i","context","prev","findIndex","productBase","addLotteryProducts","EditProductGenre","currentGenre","form","rules","submit","onSaveGenre","buttonClick","onFormButtonClick","onDelGenre","vCall","VConfirmDeleteGenre","delGenre","closePage","buttonDel","footer","onButtonClick","fieldLabelSize","onConfirm","returnCall","onCancel","back","VProductGenre","genreInput","creationGenre","createGenre","creationGenreIsBlink","setTimeout","editGenre","openEditProductGenre","genreActionIcon","action","e","stopPropagation","renderItemGenre","productGenres","onGenreSelected","creationGenreTipUI","onSubmit","preventDefault","CGenre","fromGenreSelect","getProductGenres","积分商城","Genre","all","rawData","rname","rimgUrl","findGenreIndex","PointProductGenreDelete","genre","backPage","CMe","renderView","genreList","newC","start","lottery","VLordScreen","lordScreenCase","state","interfaceCase","openInterfaceCase","os","background","width","pageContent","CLordScreen","cPointProduct","openProductList","openCreationProduct","openPointProduct","momentFormat","date","delimitFormat","moment","format","VProductOperation","currentState","point","startDate","endDate","onSaveOperating","saveOperation","tipMainPart","tips","replace","tipsUI","role","operateButtonUI","isCreationProduct","productSelectEntry","entryDesc","entrySelectedResul","tip","chevronRight","EDIT","OperationAdapt","UPSHELF","DOWNSHELF","REUPSHELF","toGenreSelect","openVUpdatePicture","toProductUpShelf","goalProductInfo","genreShow","description","grade","genreData","productGenreBlankTip","productGenreIsBlank","zIndex","React","title","VUpdateProductImage","resolve","onSaved","resId","topic","Promise","reject","then","imgUrl","updatedProductImage","VSearchHeader","onSearch","topKey","popTo","View","VProductSearchHeader","VPointProductSearchHeader","VBrowseProductSearchHeader","searchKeyShow","searchKey","VSiteHeader","renderSearchHeader","borderBottom","noProductNone","VProduct","filterGenre","refreshProduct","getProductLibrary","renderPostOperaLabel","pointProduct","postSource","renderPointProduct","maxHeight","renderGenreItem","productLibrary","onProductSelected","filterByProductGenre","cGenre","siteHeader","renderVm","genreNone","currentSource","ProductSources","VSearchProduct","searchProductLibrary","headerClassName","searchProduct","VCreationProduct","radioy","unit","price","ProductSelected","pointProductInfo","sourceId","isValid","renderDataSources","dataSource","source","searchToCreationProduct","searchIsBlank","keyWord","changePageIndex","pageIndex","pageCount","Pagination","onScrollBottom","scroller","scrollToBottom","searchProductsToCreation","Array","more","renderPagination","changeCurrentProductSource","LMRRight","VPointProductPost","onSave","textarea","onSavePointProductPost","currentPostContent","postType","openPointProductPostShow","cMedia","openMainPage","refIframe","tt","ifrm","article","querySelector","height","window","innerHeight","clientHeight","overflowY","VPointProductPostShow","setDetailMobSize","getDetail_mob","document","getTable__01","getElementById","viewP","offsetWidth","setAttribute","innerWidth","htmlFragment","isScale","dangerouslySetInnerHTML","__html","VPostOperaLabel","getPostOpera","getPointProductDetailPost","getPost","isPosTExist","openPointProductPost","FetchPost","url","fetch","method","body","headers","CProduct","currentProduct","getPointProductDetailPostHtml","PointProductSource","getProductSource","productSource","searchByKey","PointProductLib","search","searchTerm","searchSelfPointProduct","searchPointProductByJD","currentSalesRegion","QueryPager","SearchPointProduct","first","salesRegion","JDImgSize","Keyword","sortType","JSON","stringify","res","searchArr","ok","json","result","sku","skuLib","res1","res2","hitResult","wstate","wyn","findPriceBySku","skuId","wareId","wareName","productOrigin","productGenre","getProductCompleteInfo","getProductDetailByJD","getProductSources","isExchangeProduct","getPointProductLibLoad","getProductGenre","queryExts","resultByJD","fm","FormatEndDate","FormatnewDate","saleUnit","nappintroduction","isSelectedGenre","call","productGenreSelected","PointProductDetail","findPostContent","addPointProductDetailPost","as","shiftArr","delPointProductDetailPost","productInfo","editProduct","upShelfProduct","reUpShelfProduct","downShelfProduct","pointProductFind","pfPoint","pfImageUrl","pfStartDate","pfEndDate","dealWithProductGenre","savePointProduct","productGenreFind","addProductGenre","delProductGenre","slice","addPointProductSource","GetPointProductBySource","getProductsFromGenre","PointProductGenre","pointproduct","pointProductFromGenre","filterPointProducts","searchpointProductByKey","sort","b","GetPointProductGenre","VPointProduct","toUpDatePointProduct","currentPointProduct","renderPointGenre","pointProductGenre","pack","renderPointProduct1","refreshPointProduct","getPointProductLibrary","pointProducts","VSearchPointProduct","searchPointProduct","CPointProduct","GetPointProduct","startPoint","endPoint","PointProduct","addPointProduct","delPointProduct","VProductViews","visits","exchanges","getBrowsedProductLib","browsedProductLib","VPointsDist","pointRange","list","maxPointRangeLib","onSaveInquire","queryPointDistribution","pointRangeLib","padding","appendPadding","autoFit","animate","scale","min","shape","area","position","end","textStyle","fontWeight","formatter","d","VPointProductVisitRecord","numLimit","changeConditionObj","million","limit","fillIn","thousand","CReport","maxPointValue","openPointProductVisitRecord","getPointProductVisitRecord","getMaxPoint","maxPointAdaptive","customerPointsDistributionMap","searchKeyBrowseProduct","GetVisitPointProducts","GetMaxPoints","maxPoint","maxPoints","shifVal","AT","BT","MT","TT","MTT","MUL","findVal","max","val","addVal","firstValue","startValue","specialValObj","finalValue","split","maxPointRange","changeTextUnits","QPointRange","distributionArr","Number","interVal","granularity","getUsersDistOfPointInterval","getDists","subStart","subEnd","QTYP","numbers","GetPointDistribution","processPointRange","endsWith","unshift","changeDesc","repeat","includes","consts","divItems","pageMedia","searchMadiaKey","onAddClick","showCat","showSlideShow","showOtherMedia","t","loading","renderItem","copyClick","path","target","innerHTML","copy","preview","open","onRem","author","isMe","Tuid","equ","console","log","onimgNames","imgStyle","backgroundImage","divImg","member","VShowImg","current","template","$update","divUser","renderUser","VEdit","onAddSalesTask","model","_","clone","mediaPath","types","saveItem","mediaId","getMediaPath","onUpload","media","openPageElement","image","saveButton","requiredFlag","resUrl","VChangeNames","onClickSaveButton","setSlideShow","updateSlideShow","showTips","showPickCat","pageImageCat","before","margin","borderRadius","backgroundColor","display","delImageCat","VCat","capton","pageCat","showCatImage","fontSize","VPickCat","onPickCat","VCatImage","cat","pageCatImage","searchCatImage","bottom","VSlideShow","pageSlideShow","pickImage","delSlideShow","showEditSlideShow","VPickImage","itemClick","onPickedImage","VEditSlideShow","onAdd","VFile","pageFile","addAddFile","delFile","editFile","formatSize","pointLength","units","shift","toFixed","FileUploader","suffix","resUploader","onFileChange","fileError","uploaded","enableUploadButton","files","file","pos","lastIndexOf","toLowerCase","audioTypes","indexOf","join","reader","FileReader","readAsDataURL","onload","fileSize","upload","uploading","FormData","blob","convertBase64UrlToBlob","append","ret","error","err","message","isChanged","urlData","arr","mime","match","bstr","atob","n","u8arr","Uint8Array","charCodeAt","Blob","multiple","maxSize","onFilesChange","VAddFile","mediaType","getFileExtension","substring","onUploadFilePDF","VFileEdit","CMedia","webBuilder","SearchImage","pa","Image","merge","Date","$create","searcFileKey","searchImageCat","showMedia","loadList","parent","SearchCat","ImageCat","SearchImageCat","pageCats","SearchCatImage","searchSlideShow","SearchSlideShow","UpdateSlideShow","DeleteSlideShow","_image","$zh","post","noposts","editorpost","searchpost","postdetailed","describe","estimate","publish","productpublish","selectproduct","ordinarypublish","noproduct","sales","agent","privateSite","publicSite","internationSite","sourcecode","picture","searchpicture","selectpicture","editorpicture","nopicture","uploadpicture","uploadaudio","selecttemplate","notemplate","link","editorpage","module","editorsubmodule","mymodule","me","tag","set","team","myteam","privatedetail","logout","about","password","account","privacypolicy","personalinformation","headportrait","select","copysuccess","editor","pleaseselect","timepublish","veryimport","general","$en","uploadfile","CPosts","pagePosts","boxId","CPointShopMsApp","currentLanguage","cLordScreen","cLottery","cPosts","userCache","SalesRegion","Language","setRes","userLoader","userId","hr","SearchEmployeeByid","query","_id","UserCache","isLogined","showMain","initTabName","use","setSettings","App","onLogined","Boolean","location","hostname","ReactDOM","navigator","serviceWorker","ready","registration","unregister","exports"],"mappings":"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","file":"static/js/main.b6e727e7.chunk.js","sourcesContent":["import * as React from 'react';\r\nimport { VPage, TabCaptionComponent, Page } from 'tonva';\r\nimport { CPointShopMsApp } from 'CPointShopMsApp';\r\n\r\nconst color = (selected: boolean) => selected === true ? 'text-primary' : 'text-muted';\r\n\r\nexport class VMain extends VPage<CPointShopMsApp> {\r\n    async open(param?: any) {\r\n        this.openPage(this.render);\r\n    }\r\n    render = (param?: any): JSX.Element => {\r\n        let { cMe, cProduct } = this.controller;\r\n        let faceTabs = [\r\n            { name: 'home', label: '首页', icon: 'home', content: cProduct.tab, notify: undefined },\r\n            // { name: 'me', label: '积分商品', icon: 'diamond', content: cPointProduct.tab },\r\n            { name: 'me', label: '我的', icon: 'user', content: cMe.tab }\r\n        ].map(v => {\r\n            let { name, label, icon, content, notify } = v;\r\n            return {\r\n                name: name,\r\n                caption: (selected: boolean) => TabCaptionComponent(label, icon, color(selected)),\r\n                content: content,\r\n                notify: notify,\r\n            }\r\n        });\r\n        return <Page header={false} tabsProps={{ tabs: faceTabs }}>\r\n        </Page >;\r\n    }\r\n}","import { CBase, CAppBase, IConstructor } from \"tonva\";\r\nimport { UQs } from \"./uqs\";\r\nimport { CPointShopMsApp } from \"CPointShopMsApp\";\r\n\r\nexport abstract class CUqBase extends CBase {\r\n    get cApp(): CPointShopMsApp { return this._cApp; }\r\n    protected get uqs(): UQs { return this._uqs as UQs }\r\n}\r\n\r\nexport abstract class CUqApp extends CAppBase {\r\n    get uqs(): UQs { return this._uqs };\r\n\r\n    protected newC<T extends CUqBase>(type: IConstructor<T>): T {\r\n        let c = new type(this);\r\n        c.init();\r\n        return c;\r\n    }\r\n}","import { User } from 'tonva';\r\nimport { BoxId } from 'tonva';\r\nimport { observable } from 'mobx';\r\nimport { UQs } from './uqs';\r\n\r\nexport class WebUser {\r\n\r\n    id: number;\r\n    name: string;\r\n    nick?: string;\r\n    icon?: string;\r\n    guest: number;\r\n    token: string;\r\n\r\n    @observable firstName: string;\r\n    gender: string;\r\n    salutation: string;\r\n    @observable organizationName: string;\r\n    departmentName: string;\r\n\r\n    telephone: string;\r\n    @observable mobile: string;\r\n    email: string;\r\n    fax: string;\r\n    address: BoxId;\r\n    addressString: string;\r\n    zipCode: string;\r\n    private _user: User;\r\n\r\n    private webUserSettings: any;\r\n\r\n    private uqs: UQs;\r\n\r\n\r\n    constructor(uqs: UQs) {// cUsqWebUser: CUq, cUsqCustomer: CUq) {\r\n        this.uqs = uqs;\r\n    }\r\n\r\n    setUser = async (user: User) => {\r\n        if (user !== undefined) {\r\n            this._user = user;\r\n            this.id = user.id;\r\n            this.name = user.name;\r\n            this.nick = user.nick;\r\n            this.icon = user.icon;\r\n            this.guest = user.guest;\r\n            this.token = user.token;\r\n\r\n            await this.loadWebUser();\r\n        }\r\n    }\r\n\r\n    private async loadWebUser() {\r\n        let { id, _user } = this;\r\n        if (_user !== undefined) {\r\n            let webUser = await this.uqs.webuser.WebUser.load(id);\r\n            if (webUser) {\r\n                let { firstName, gender, salutation, organizationName, departmentName } = webUser;\r\n                this.firstName = firstName;\r\n                this.gender = gender;\r\n                this.salutation = salutation;\r\n                this.organizationName = organizationName;\r\n                this.departmentName = departmentName;\r\n            }\r\n            let contact = await this.uqs.webuser.WebUserContact.obj({ webUser: this.id });\r\n            if (contact) {\r\n                let { telephone, mobile, email, fax, address, addressString, zipCode } = contact;\r\n                this.telephone = telephone;\r\n                this.mobile = mobile;\r\n                this.email = email;\r\n                this.fax = fax;\r\n                this.address = address;\r\n                this.addressString = addressString;\r\n                this.zipCode = zipCode;\r\n            }\r\n            this.webUserSettings = await this.uqs.webuser.WebUserSetting.obj({ webUser: this.id }) || { webUser: this.id };\r\n        }\r\n    }\r\n\r\n    get isLogined(): boolean {\r\n        return this._user !== undefined;\r\n    }\r\n\r\n    async getContacts(): Promise<any[]> {\r\n        return await this.uqs.webuser.WebUserContacts.table({ webUser: this.id });\r\n    }\r\n\r\n    async addContact(contactId: number) {\r\n        await this.uqs.webuser.WebUserContacts.add({ webUser: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async delContact(contactId: number) {\r\n        await this.uqs.webuser.WebUserContacts.del({ webUser: this.id, arr1: [{ contact: contactId }] });\r\n    }\r\n\r\n    async getSetting() {\r\n        return this.webUserSettings;\r\n    }\r\n\r\n    async setDefaultShippingContact(contactId: BoxId) {\r\n        this.webUserSettings.shippingContact = contactId;\r\n        this.saveDefaultSettings();\r\n    }\r\n\r\n    async setDefaultInvoiceContact(contactId: BoxId) {\r\n        this.webUserSettings.invoiceContact = contactId;\r\n        this.saveDefaultSettings();\r\n    }\r\n\r\n    async setDefaultInvoice(invoiceTypeId: BoxId, invoiceInfoId: BoxId) {\r\n        this.webUserSettings.invoiceType = invoiceTypeId;\r\n        this.webUserSettings.invoiceInfo = invoiceInfoId;\r\n        this.saveDefaultSettings();\r\n    }\r\n\r\n    async saveDefaultSettings() {\r\n        await this.uqs.webuser.WebUserSetting.add(this.webUserSettings);\r\n    }\r\n\r\n\r\n    async changeWebUser(webUser: any) {\r\n        await this.uqs.webuser.WebUser.save(this.id, webUser);\r\n        await this.loadWebUser();\r\n    }\r\n\r\n    async changeWebUserContact(webUserContact: any) {\r\n        webUserContact.webUser = this.id;\r\n        await this.uqs.webuser.WebUserContact.add(webUserContact);\r\n        await this.loadWebUser();\r\n    }\r\n};\r\n\r\n","\r\nexport function telephoneValidation(value: string) {\r\n    if (value && !/^(\\(\\d{3,4}\\)|\\d{3,4}-|\\s)?\\d{7,14}$/.test(value))\r\n        return \"固定电话格式不正确，请重新输入！\";\r\n    else\r\n        return undefined;\r\n}\r\n\r\nexport function mobileValidation(value: string) {\r\n    if (value && !/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(value))\r\n        return \"手机号格式不正确，请重新输入！\";\r\n    else\r\n        return undefined;\r\n}\r\n\r\nexport function emailValidation(value: string) {\r\n    if (value && !/\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*/.test(value))\r\n        return \"Email格式不正确，请重新输入！\";\r\n    else\r\n        return undefined;\r\n}\r\n\r\nexport function faxValidation(value: string) {\r\n    if (value && !/^(\\(\\d{3,4}\\)|\\d{3,4}-|\\s)?\\d{7,14}$/.test(value))\r\n        return \"传真号码格式不正确，请重新输入！\";\r\n    else\r\n        return undefined;\r\n}\r\n\r\nexport function productPointValidation(value: string) {\r\n    return (value && !/^[0-9]+$/.test(value)) ? \"积分格式不正确，请重新输入！\" : undefined;\r\n}\r\n\r\nexport function addressDetailValidation(value: string) {\r\n    return (value && value.length > 200) ? \"详细地址最多200个字！\" : undefined;\r\n}\r\n\r\nexport function zipCodeValidation(value: string) {\r\n    return (value && value.length > 15) ? \"邮编过长，请修改后录入！\" : undefined;\r\n}\r\n\r\n\r\nexport function organizationNameValidation(value: string) {\r\n    return (value && value.length > 100) ? \"单位名称最多100个字！\" : undefined;\r\n}\r\n\r\nexport function departmentNameValidation(value: string) {\r\n    return (value && value.length > 100) ? \"部门名称名称最多100个字！\" : undefined;\r\n}\r\n\r\nexport function salutationValidation(value: string) {\r\n    return (value && value.length > 100) ? \"单位名称最多100个字！\" : undefined;\r\n}\r\n\r\nexport function nameValidation(value: string) {\r\n    return (value && value.length > 50) ? \"姓名最多50个字！\" : undefined;\r\n}\r\n\r\nexport function productGenreValidation(value: string) {\r\n    return (value && value.length > 10) ? \"类型最多10个字！\" : undefined;\r\n}","import * as React from 'react';\r\nimport { observable } from 'mobx';\r\nimport {\r\n    userApi, ItemSchema, StringSchema, ImageSchema, UiTextItem, UiImageItem, nav, Page,\r\n    Edit, UiSchema,\r\n    VPage, UiRadio, IdSchema, UiIdItem, Context, BoxId, tv\r\n} from 'tonva';\r\nimport { CMe } from './CMe';\r\nimport {\r\n    faxValidation, emailValidation, mobileValidation, telephoneValidation,\r\n    addressDetailValidation, zipCodeValidation,\r\n    organizationNameValidation, departmentNameValidation,\r\n    salutationValidation, nameValidation\r\n} from '../tools/inputValidations';\r\n\r\nexport class EditMeInfo extends VPage<CMe>{\r\n\r\n    async open(param: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private schema: ItemSchema[] = [\r\n        { name: 'nick', type: 'string' } as StringSchema,\r\n        { name: 'icon', type: 'image' } as ImageSchema,\r\n    ];\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            nick: { widget: 'text', label: '别名', placeholder: '好的别名更方便记忆' } as UiTextItem,\r\n            icon: { widget: 'image', label: '头像' } as UiImageItem,\r\n        }\r\n    }\r\n    @observable private data: any;\r\n\r\n    @observable private webUserData: any;\r\n\r\n    @observable private webUserContactData: any;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        let { nick, icon } = nav.user;\r\n        this.data = {\r\n            nick: nick,\r\n            icon: icon,\r\n        };\r\n\r\n        let { cApp } = this.controller;\r\n        let { firstName, gender, salutation, organizationName, departmentName, telephone\r\n            , mobile, email, fax, zipCode, address, addressString } = cApp.currentUser;\r\n        this.webUserData = {\r\n            firstName: firstName,\r\n            gender: gender,\r\n            salutation: salutation,\r\n            organizationName: organizationName,\r\n            departmentName: departmentName,\r\n        };\r\n\r\n        this.webUserContactData = {\r\n            telephone: telephone,\r\n            mobile: mobile,\r\n            email: email,\r\n            fax: fax,\r\n            address: address,\r\n            addressString: addressString,\r\n            zipCode: zipCode,\r\n        }\r\n    }\r\n\r\n    private onItemChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        await userApi.userSetProp(name, newValue);\r\n        this.data[name] = newValue;\r\n        nav.user[name] = newValue;\r\n        nav.saveLocalUser();\r\n    }\r\n\r\n    private onWebUserChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.webUserData[name] = newValue;\r\n        await this.controller.changeWebUser(this.webUserData);\r\n    }\r\n\r\n    private onWebUserContactChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.webUserContactData[name] = newValue;\r\n        await this.controller.changeWebUserContact(this.webUserContactData);\r\n    }\r\n\r\n    private page = () => {\r\n        let { schema, uiSchema, data, onItemChanged } = this;\r\n        return <Page header=\"个人信息\">\r\n            <Edit schema={schema} uiSchema={uiSchema}\r\n                data={data}\r\n                onItemChanged={onItemChanged} />\r\n        </Page>;\r\n    }\r\n}\r\n\r\nexport const webUserSchema: ItemSchema[] = [\r\n    { name: 'firstName', type: 'string', required: true } as StringSchema,\r\n    { name: 'gender', type: 'string' } as StringSchema,\r\n    { name: 'salutation', type: 'string' } as StringSchema,\r\n    { name: 'organizationName', type: 'string', required: true } as StringSchema,\r\n    { name: 'departmentName', type: 'string' } as StringSchema,\r\n];\r\n\r\nexport const webUserUiSchema: UiSchema = {\r\n    items: {\r\n        firstName: {\r\n            widget: 'text', label: '真实姓名',\r\n            placeholder: '化学品是受国家安全法规限制的特殊商品，百灵威提供技术咨询、资料以及化学产品的对象必须是具有化学管理和应用能力的专业单位（非个人）。为此，需要您重新提供非虚拟的、可核查的信息。',\r\n            rules: nameValidation\r\n        } as UiTextItem,\r\n        gender: { widget: 'radio', label: '性别', list: [{ value: '1', title: '男' }, { value: '0', title: '女' }] } as UiRadio,\r\n        salutation: { widget: 'text', label: '称谓', rules: salutationValidation } as UiTextItem,\r\n        organizationName: { widget: 'text', label: '单位名称', rules: organizationNameValidation } as UiTextItem,\r\n        departmentName: { widget: 'text', label: '部门名称', rules: departmentNameValidation } as UiTextItem,\r\n    }\r\n}\r\n\r\n// 个人联系方式信息\r\nexport const webUserContactSchema: ItemSchema[] = [\r\n    { name: 'telephone', type: 'string' } as StringSchema,\r\n    { name: 'mobile', type: 'string', required: true } as StringSchema,\r\n    { name: 'email', type: 'string' } as StringSchema,\r\n    { name: 'fax', type: 'string', required: false } as StringSchema,\r\n    { name: 'address', type: 'id', required: false } as IdSchema,\r\n    { name: 'addressString', type: 'string', required: false } as StringSchema,\r\n    { name: 'zipCode', type: 'string', required: false } as StringSchema,\r\n];\r\n\r\nexport function webUserContactUiSchema(pickAddress: any) {\r\n    return {\r\n        items: {\r\n            telephone: { widget: 'text', label: '固定电话', rules: telephoneValidation } as UiTextItem,\r\n            mobile: { widget: 'text', label: '手机号', rules: mobileValidation } as UiTextItem,\r\n            email: { widget: 'text', label: 'Email', rules: emailValidation, placeholder: 'Email' } as UiTextItem,\r\n            fax: { widget: 'text', label: '传真', rules: faxValidation } as UiTextItem,\r\n            address: {\r\n                widget: 'id', label: '所在地区',\r\n                pickId: async (context: Context, name: string, value: number) => await pickAddress(context, name, value),\r\n                Templet: (address: BoxId) => {\r\n                    return tv(address, (addressValue) => {\r\n                        let { country, province, city, county } = addressValue;\r\n                        /* 下面这种在使用tv之前的一堆判断应该是tv或者什么的有bug, 应该让Henry改改 */\r\n                        return <>\r\n                            {country !== undefined && country.id !== undefined && tv(country, v => <>{v.chineseName}</>)}\r\n                            {province !== undefined && province.id !== undefined && tv(province, (v) => <>{v.chineseName}</>)}\r\n                            {city !== undefined && city.id !== undefined && tv(city, (v) => <>{v.chineseName}</>)}\r\n                            {county !== undefined && county.id !== undefined && tv(county, (v) => <>{v.chineseName}</>)}\r\n                        </>;\r\n                    }, () => {\r\n                        return <small className=\"text-muted\">请选择地区</small>;\r\n                    })\r\n                }\r\n            } as UiIdItem,\r\n            addressString: { widget: 'text', label: '详细地址', rules: addressDetailValidation } as UiTextItem,\r\n            zipCode: { widget: 'text', label: '邮编', rules: zipCodeValidation } as UiTextItem,\r\n        }\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { tv } from 'tonva';\r\n\r\nexport const tvAddress = (values: any) => {\r\n    let { country, province, city, county } = values;\r\n    return <>\r\n        {tv(country)}{tv(province, undefined, undefined, () => <></>)}{tv(city, undefined, undefined, () => <></>)}{tv(county, undefined, undefined, () => <></>)}\r\n    </>\r\n}\r\n\r\nexport const tvCountry = (values: any) => {\r\n    return <> {values.chineseName} </>;\r\n}\r\n\r\nexport const tvCurrency = (values: any) => {\r\n    return <> {values.name} </>;\r\n}\r\n\r\nexport const common = {\r\n    address: tvAddress,\r\n    country: tvCountry,\r\n    province: tvCountry,\r\n    city: tvCountry,\r\n    county: tvCountry,\r\n    currency: tvCurrency,\r\n};\r\n","import { AppConfig, env } from \"tonva\";\r\nimport { jnkTop } from \"./me/loginTop\";\r\nimport { tvs } from \"tvs\";\r\n\r\nexport const appConfig: AppConfig = {\r\n    appName: '百灵威系统工程部/pointshopms',\r\n    version: '1.0.1',\r\n    tvs: tvs,\r\n    loginTop: jnkTop,\r\n    oem: '百灵威',\r\n};\r\n\r\nconst GLOABLE_PRODUCTION = {\r\n    CHINA: 44,\r\n    CHINESE: 196,\r\n    SALESREGION_CN: 1,\r\n    TIPDISPLAYTIME: 3000,\r\n    CONTENTSITE: \"https://web.jkchemical.com\",\r\n    // JD: 'http://localhost:3016/jd',\r\n    JD: 'https://joint.jkchemical.com/jd',\r\n}\r\n\r\nconst GLOABLE_TEST = {\r\n    CHINA: 43,\r\n    CHINESE: 197,\r\n    SALESREGION_CN: 4,\r\n    TIPDISPLAYTIME: 3000,\r\n    CONTENTSITE: \"https://c.jkchemical.com/jk-web\",\r\n    // JD: 'http://localhost:3016/jd',\r\n    JD: 'https://c.jkchemical.com/joint/jd',\r\n}\r\n\r\n// 生产配置\r\nexport const MadiaType = {\r\n    IAMGE: 1,\r\n    PDF: 2,\r\n    VIDEO: 3,\r\n    NOTIMAGE: 0\r\n};\r\n\r\nexport const GLOABLE = env.testing === true ? GLOABLE_TEST : GLOABLE_PRODUCTION;","import { TVs } from 'tonva';\r\nimport { webuser } from './webuser';\r\nimport { common } from './common';\r\n\r\nexport const tvs: TVs = {\r\n    webuser: webuser,\r\n    common: common,\r\n}","import * as React from 'react';\r\n\r\nexport const tvWebUser = (value: any) => {\r\n    let { firstName, salutation, organizationName, departmentName } = value;\r\n    return <>\r\n        <div className=\"mr-3\"><strong>{firstName}</strong> <span className=\"small\">{salutation}</span></div>\r\n        <div className=\"small text-muted\">{organizationName} &nbsp;{departmentName}</div>\r\n    </>\r\n}\r\n\r\nexport const webuser = {\r\n    webuser: tvWebUser\r\n}","import * as React from 'react';\r\nimport logo from '../images/logo.png';\r\n\r\nexport const jnkTop = <div className=\"d-flex align-items-center position-relative\">\r\n    <img className=\"h-3c position-absolute\" src={logo} alt=\"百灵威\" />\r\n    <div className=\"h3 flex-fill text-center\">\r\n        <span className=\"text-primary mr-3\">百灵威</span>\r\n    </div>\r\n</div>;\r\n","import * as React from 'react';\r\nimport { nav, Image, VPage } from 'tonva';\r\nimport { Prop, IconText, FA, PropGrid, LMR } from 'tonva';\r\nimport { observer } from 'mobx-react';\r\nimport { EditMeInfo } from './EditMeInfo';\r\nimport { CMe } from './CMe';\r\nimport { appConfig } from 'configuration';\r\nconst UnderDevelopment = <div className=\"text-danger ml-1\">( 正在开发中... )</div>;\r\nexport class VMe extends VPage<CMe> {\r\n\r\n    async open(param?: any) {\r\n\r\n    }\r\n\r\n    private exit() {\r\n        nav.showLogout();\r\n    }\r\n\r\n    private changePassword = async () => {\r\n        await nav.changePassword();\r\n    }\r\n\r\n    private openProuctGenre = async () => {\r\n        await this.controller.openProductGenre();\r\n    }\r\n\r\n    private openLottery = async () => {\r\n        // let { cApp } = this.controller;\r\n        // let { cLottery } = cApp;\r\n        // await cLottery.openLotteryProduct();\r\n        // await this.controller.openLottery();\r\n    }\r\n\r\n    private openProductViews = async () => {\r\n        let { cApp } = this.controller;\r\n        let { cReport } = cApp;\r\n        await cReport.openProductViews();\r\n    }\r\n\r\n    private openPointsDist = async () => {\r\n        let { cApp } = this.controller;\r\n        let { cReport } = cApp;\r\n        await cReport.openPointsDist();\r\n    }\r\n\r\n    private meInfo = observer(() => {\r\n        let { user } = nav;\r\n        if (user === undefined) return null;\r\n        let { id, name, nick, icon } = user;\r\n        return <LMR className=\"py-2 cursor-pointer w-100\"\r\n            left={<Image className=\"w-3c h-3c mr-3\" src={icon} />}\r\n            right={<FA className=\"align-self-end\" name=\"angle-right\" />}\r\n            onClick={() => {\r\n                this.openVPage(EditMeInfo);\r\n            }}>\r\n            <div>\r\n                <div>{userSpan(name, nick)}</div>\r\n                <div className=\"small\"><span className=\"text-muted\">ID:</span> {id > 10000 ? id : String(id + 10000).substr(1)}</div>\r\n            </div>\r\n        </LMR>;\r\n    });\r\n\r\n    render() {\r\n        const { user } = nav;\r\n        let aboutRows: Prop[] = [\r\n            '',\r\n            {\r\n                type: 'component',\r\n                component: <div className=\"w-100 d-flex justify-content-between\">\r\n                    <IconText iconClass=\"text-info mr-2\" icon=\"smile-o\" text=\"关于本APP\" />\r\n                    <div className=\"py-2 small\">V{appConfig.version}</div>\r\n                </div>,\r\n            }\r\n        ];\r\n\r\n        let rows: Prop[];\r\n        if (user === undefined) {\r\n            rows = aboutRows;\r\n            rows.push(\r\n                {\r\n                    type: 'component',\r\n                    component: <button className=\"btn btn-success w-100 my-2\" onClick={() => nav.showLogin(undefined, true)}>\r\n                        <FA name=\"sign-out\" size=\"lg\" /> 请登录\r\n                    </button>\r\n                },\r\n            );\r\n        }\r\n        else {\r\n            let logOutRows: Prop[] = [\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    bk: '',\r\n                    component: <button className=\"btn btn-danger w-100\" onClick={this.exit}>\r\n                        <FA name=\"sign-out\" size=\"lg\" /> 退出登录\r\n                </button>\r\n                },\r\n            ];\r\n\r\n            rows = [\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <this.meInfo />\r\n                },\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"th-large\" text=\"商品类型\" />,\r\n                    onClick: this.openProuctGenre\r\n                },\r\n                {\r\n                    type: 'component',\r\n                    component: <><IconText iconClass=\"text-info mr-2\" icon=\"life-ring\" text=\"抽奖商品\" />{UnderDevelopment}</>,\r\n                    onClick: this.openLottery\r\n                },\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <><IconText iconClass=\"text-info mr-2\" icon=\"eye\" text=\"浏览量PV\" /></>,\r\n                    onClick: this.openProductViews\r\n                },\r\n                {\r\n                    type: 'component',\r\n                    component: <><IconText iconClass=\"text-info mr-2\" icon=\"cubes\" text=\"积分分布\" /></>,\r\n                    onClick: this.openPointsDist\r\n                },\r\n                '',\r\n                {\r\n                    type: 'component',\r\n                    component: <IconText iconClass=\"text-info mr-2\" icon=\"key\" text=\"修改密码\" />,\r\n                    onClick: this.changePassword\r\n                },\r\n            ]\r\n            rows.push(...aboutRows, ...logOutRows);\r\n        }\r\n        return <>\r\n            <PropGrid rows={[...rows]} values={{}} />\r\n        </>\r\n    }\r\n}\r\n\r\n\r\nfunction userSpan(name: string, nick: string): JSX.Element {\r\n    return nick ?\r\n        <><b>{nick} &nbsp; <small className=\"muted\">{name}</small></b></>\r\n        : <b>{name}</b>\r\n}","import * as React from 'react';\r\nimport { Image } from 'tonva';\r\n\r\nconst imagePath = \"https://www.jkchemical.com/static/Structure/\";\r\nconst pointProductImagePath = \"https://www.jkchemical.com/static/images/pointshop\";\r\nexport const altimagePath = \"https://www.jkchemical.com/static/Structure/999.png\";\r\nexport const JDImagePath = 'http://img13.360buyimg.com/';\r\n\r\ninterface ProductImageProps {\r\n    className?: string;\r\n    style?: React.CSSProperties;\r\n    chemicalId: string;\r\n}\r\n\r\nexport function ProductImage(props: ProductImageProps) {\r\n\r\n    let { style, className, chemicalId } = props;\r\n    return <Image src={chemicalId && (imagePath + chemicalId.substr(0, 3) + '/' + chemicalId + '.png')}\r\n        style={style} className={className} altImage={altimagePath} />;\r\n}\r\n\r\nexport function PointProductImage(props: ProductImageProps) {\r\n\r\n    let { style, className, chemicalId } = props;\r\n    if (chemicalId && chemicalId.startsWith(JDImagePath))\r\n        return <img src={chemicalId} alt=\"\" className=\"w-100\" />;\r\n\r\n    if (chemicalId && /[0-9]$/.test(chemicalId))\r\n        chemicalId = pointProductImagePath + '/' + chemicalId + '.png';\r\n\r\n    return <Image src={chemicalId && chemicalId}\r\n        style={style} className={className} altImage={altimagePath} />;\r\n}\r\n\r\n","import * as React from 'react';\r\nimport classNames from 'classnames';\r\nimport { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport { UpdownWidget } from 'tonva';\r\n\r\nconst keys = [107, 109, 110, 187, 189];\r\n\r\nexport class MinusPlusWidget extends UpdownWidget {\r\n    @observable protected value: any;\r\n    @observable protected disabled: boolean;\r\n    // @observable protected hasFocus: boolean;\r\n\r\n    protected isValidKey(key: number): boolean {\r\n        if (keys.find(v => v === key) !== undefined) return false;\r\n        return super.isValidKey(key);\r\n    }\r\n\r\n\t/*\r\n    protected onBlur = (evt: React.FocusEvent<any>) => {\r\n        super.onBlur(evt);\r\n        this.hasFocus = false;\r\n    }\r\n\r\n    protected onFocus(evt: React.FocusEvent<any>) {\r\n        super.onFocus(evt);\r\n        this.hasFocus = true;\r\n\t}\r\n\t*/\r\n\r\n    protected onChange(evt: React.ChangeEvent<any>) {\r\n    }\r\n\r\n    private minusClick = () => {\r\n        let v = this.getValue();\r\n        if (!v) v = 0;\r\n        this.setValue(v - 1);\r\n    }\r\n    private plusClick = () => {\r\n        let v = this.getValue();\r\n        if (!v) v = 0;\r\n        this.setValue(v + 1);\r\n    }\r\n\r\n    private ref = (input: HTMLInputElement) => {\r\n        this.input = input;\r\n        if (this.input === null) return;\r\n        let p: HTMLElement;\r\n        for (p = this.input; ; p = p.parentElement) {\r\n            if (!p) break;\r\n            if (p.tagName !== 'FIELDSET') continue;\r\n            if ((p as any)['disabled'] === true) {\r\n                this.disabled = true;\r\n            }\r\n            break;\r\n        }\r\n    }\r\n\r\n    private renderContent = observer((): JSX.Element => {\r\n        let renderTemplet = this.renderTemplet();\r\n        if (renderTemplet !== undefined) return renderTemplet;\r\n        let cn: any = {\r\n            //'form-control': true,\r\n        };\r\n        if (this.hasError === true) {\r\n            cn['is-invalid'] = true;\r\n        }\r\n        else {\r\n            cn['required-item'] = this.itemSchema.required === true;\r\n        }\r\n        let hasFocus = this.hasFocus; // document.hasFocus() && document.activeElement === this.input;\r\n        let hasAction = this.readOnly !== true && this.disabled !== true;\r\n        let hasValue = isNaN(this.value) === false && this.value !== undefined && this.value > 0;\r\n        let cursorPointer: string,\r\n            minusColor: string, minusClick: any,\r\n            plusColor: string, plusClick: any;\r\n        if (this.disabled === true) {\r\n            cursorPointer = 'cursor-pointer';\r\n            minusColor = plusColor = 'text-light';\r\n        }\r\n        else {\r\n            minusClick = this.minusClick;\r\n            plusClick = this.plusClick;\r\n            minusColor = 'text-danger-2'; //'text-black-50';\r\n            plusColor = 'text-danger';\r\n        }\r\n        let minus = <i className={classNames('fa',\r\n            'fa-minus-circle', 'fa-lg', minusColor, cursorPointer,\r\n            { invisible: !(hasFocus === true || (hasAction === true && hasValue === true)) })}\r\n            onClick={minusClick} />;\r\n        let input = <input ref={this.ref}\r\n            className={classNames(this.className, cn, 'mx-1 w-4c form-control',\r\n                { invisible: !(hasFocus === true || hasValue === true) })}\r\n            type=\"text\"\r\n            defaultValue={this.value}\r\n            onChange={this.onChange}\r\n            placeholder={this.placeholder}\r\n            readOnly={this.readOnly}\r\n            disabled={this.disabled}\r\n            onKeyDown={this.onKeyDown}\r\n            onFocus={(evt: React.FocusEvent<any>) => this.onFocus(evt)}\r\n            onBlur={(evt: React.FocusEvent<any>) => this.onBlur(evt)}\r\n            maxLength={10} />;\r\n\r\n        let plus = <i className={classNames('fa fa-plus-circle fa-lg',\r\n            plusColor, cursorPointer,\r\n            { invisible: !(hasAction === true) })}\r\n            onClick={plusClick} />;\r\n        return <div className=\"d-flex align-items-center\">{minus}{input}{plus}\r\n            {this.renderErrors()}\r\n        </div>;\r\n    });\r\n\r\n    render() {\r\n        return <this.renderContent />;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, List, FA, Form, UiCustom, NumSchema, UiSchema, StringSchema, } from 'tonva';\r\nimport { CLottery } from './CLottery';\r\nimport { PointProductImage } from 'tools/productImage';\r\nimport { observable } from 'mobx';\r\nimport { MinusPlusWidget } from 'tools/minusPlusWidget';\r\nconst schema = [\r\n    { name: 'id', type: 'number' } as NumSchema,\r\n    // { name: 'product', type: 'object' } as ObjectSchema,\r\n    { name: 'descriptionC', type: 'string' } as StringSchema,\r\n    { name: 'quantity', type: 'number' } as NumSchema,\r\n    { name: 'imageUrl', type: 'string' } as StringSchema,\r\n];\r\n\r\nexport class VLotteryProduct extends VPage<CLottery> {\r\n    @observable protected isAddProduct: boolean = false;    /* 是否新增抽奖产品 */\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            id: { visible: false },\r\n            // product: { visible: false },\r\n            descriptionC: { visible: false },\r\n            quantity: {\r\n                widget: 'custom',\r\n                label: null,\r\n                className: 'text-center',\r\n                WidgetClass: MinusPlusWidget,\r\n                onChanged: this.controller.onQuantityChanged as any\r\n            } as UiCustom,\r\n            imageUrl: { visible: false }\r\n        }\r\n    }\r\n\r\n    private delLotteryProducts = async (product: any, index: number) => {\r\n        let { delLotteryProducts, getTotalPR } = this.controller;\r\n        this.controller.lotteryProducts.splice(index, 1);\r\n        await delLotteryProducts(product);\r\n        getTotalPR();\r\n    }\r\n\r\n    protected renderLotteryProduct = (product: any, index: number) => {\r\n        let { imageUrl, descriptionC } = product;\r\n        return <div className=\"row m-1 w-100\">\r\n            <div className=\"col-4 m-auto p-0\"><PointProductImage chemicalId={imageUrl} className=\"w-100\" /></div>\r\n            <div className=\"col-8 small py-1 position-relative d-flex flex-column justify-content-between\">\r\n                <div>{descriptionC}</div>\r\n                {\r\n                    !this.isAddProduct ?\r\n                        <div className=\"d-flex justify-content-end pr-2 text-primary small position-absolute\" style={{ top: 3, right: -3 }}\r\n                            onClick={() => this.delLotteryProducts(product, index)}>\r\n                            <FA name={'trash'} size=\"2x\" />\r\n                        </div> : null\r\n                }\r\n                <div className=\"d-flex justify-content-between mt-2 p-0\">\r\n                    <h5 className=\"align-self-center mb-3\">概率<small>(%)</small></h5>\r\n                    <Form schema={schema} uiSchema={this.uiSchema} formData={product} className=\"mr-2\" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    protected page = observer(() => {\r\n        let { totalPR, lotteryProducts, openLotteryProductQueryLib } = this.controller;\r\n        let right = <div className=\"small mr-2\" style={{ color: 'rgb(59,169,246)' }} onClick={openLotteryProductQueryLib}>\r\n            <FA name=\"plus-square-o\" size=\"2x\" />\r\n        </div>;\r\n        let none = <div className=\"mt-3 text-secondary d-flex justify-content-center\">『 无抽奖商品 』</div>\r\n        return <Page header=\"抽奖商品\" right={right}>\r\n            <div className=\"py-2\">\r\n                <div className=\"px-2 small\">概率总和: <span className=\"text-danger h6\">{totalPR}%</span></div>\r\n                <List items={lotteryProducts} item={{ render: this.renderLotteryProduct }} none={none} className=\"mt-2\" />\r\n            </div>\r\n        </Page>\r\n    })\r\n}\r\n\r\nexport class VLotteryProductQueryLib extends VLotteryProduct {\r\n    @observable isAddProduct: boolean = true;\r\n\r\n    protected page = observer(() => {\r\n        let { QProductLib } = this.controller;\r\n        let none = <div className=\"mt-3 text-secondary d-flex justify-content-center\">『 无商品 』</div>;\r\n\r\n        return <Page header=\"商品库\">\r\n            <div className=\"py-2\">\r\n                <List items={QProductLib} item={{ render: this.renderLotteryProduct }} none={none} className=\"mt-2\" />\r\n            </div>\r\n        </Page>\r\n    })\r\n}","import { CUqBase } from 'CBase';\r\nimport { VLotteryProduct, VLotteryProductQueryLib } from './VLotteryProduct';\r\nimport { observable } from 'mobx';\r\nimport { RowContext } from 'tonva';\r\n\r\nexport class CLottery extends CUqBase {\r\n    @observable lotteryProducts: any[] = [];    /* 抽奖产品列表 */\r\n    @observable QProductLib: any[] = [];        /* 产品库 */\r\n    @observable productBase: number = 8;        /* 产品基数 */\r\n    @observable totalPR: number;                /* 概率总和 */\r\n    async internalStart(param?: any) {\r\n        // await this.getLotteryProducts();\r\n        // this.openVPage(VLotteryProduct);\r\n    }\r\n\r\n    /**\r\n     * 抽奖产品管理界面\r\n     */\r\n    openLotteryProduct = async () => {\r\n        await this.getLotteryProducts();\r\n        this.getTotalPR();\r\n        this.openVPage(VLotteryProduct);\r\n    }\r\n\r\n    /**\r\n     * 抽奖产品查询总库\r\n     */\r\n    openLotteryProductQueryLib = async () => {\r\n        await this.getQProductLib();\r\n        this.openVPage(VLotteryProductQueryLib);\r\n    }\r\n\r\n    /**\r\n     * 获取概率总和\r\n     */\r\n    getTotalPR = () => {\r\n        let total = 0;\r\n        this.lotteryProducts.forEach(el => {\r\n            total += el.quantity;\r\n        });\r\n        this.totalPR = total;\r\n    }\r\n\r\n    /**\r\n     * 获取抽奖产品库\r\n     */\r\n    getQProductLib = async () => {\r\n        // this.lotteryProducts = await this.uqs.积分商城\r\n        this.QProductLib = [\r\n            { id: 1, imageUrl: '1', descriptionC: 'MUX倾力打造的矢量图标管理、交流平台。' },\r\n            { id: 2, imageUrl: '1', descriptionC: '矢量图标管理、交流平台。' },\r\n            { id: 3, imageUrl: '1', descriptionC: '交流平台。' },\r\n        ];\r\n        this.QProductLib.forEach(el => {\r\n            for (let i of this.lotteryProducts)\r\n                if (i.id === el.id)\r\n                    el.quantity = i.quantity;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 获取抽奖产品列表\r\n     */\r\n    getLotteryProducts = async () => {\r\n        // this.lotteryProducts = await this.uqs.积分商城\r\n        this.lotteryProducts = [];\r\n    }\r\n\r\n    onQuantityChanged = async (context: RowContext, value: any, prev: any) => {\r\n        let { data } = context;\r\n        let { length } = this.lotteryProducts;\r\n        let index = this.lotteryProducts.findIndex(v => v.id === data.id);\r\n        if (index === -1) {\r\n            if (length < this.productBase) this.lotteryProducts.push(data);\r\n        } else {\r\n            await this.delLotteryProducts(this.lotteryProducts[index]);//data\r\n            this.lotteryProducts.splice(index, 1, data);\r\n        }\r\n        if (length < this.productBase)\r\n            await this.addLotteryProducts(data);\r\n        this.getTotalPR()\r\n    }\r\n\r\n    /**\r\n     * 新增抽奖产品\r\n     */\r\n    addLotteryProducts = async (product: any) => {\r\n        // await this.uqs.积分商城.\r\n    }\r\n\r\n    /*\r\n     * 删除抽奖产品\r\n     */\r\n    delLotteryProducts = async (product: any) => {\r\n        // await this.uqs.积分商城.\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page, Form, Schema, UiSchema, Context, UiInputItem, FA, UiImageItem } from 'tonva';\r\nimport { CProduct } from 'product/CProduct';\r\nimport { productGenreValidation } from 'tools/inputValidations';\r\nimport { CGenre } from './CGenre';\r\n// import { PointProductImage } from 'tools/productImage';\r\nimport { observer } from 'mobx-react';\r\nconst schema: Schema = [\r\n    { name: 'id', type: 'id', required: false },\r\n    { name: 'imageUrl', type: 'image', required: false },\r\n    { name: 'name', type: 'string', required: true },\r\n];\r\n\r\nexport class EditProductGenre extends VPage<CGenre>{\r\n    private currentGenre: any;\r\n    private form: Form;\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            id: { visible: false },\r\n            imageUrl: { widget: 'image', label: '图标' } as UiImageItem,\r\n            name: { widget: 'text', label: '类型', placeholder: '商品类型', rules: productGenreValidation } as UiInputItem,\r\n            submit: { widget: 'button', label: '提交' },\r\n        }\r\n    }\r\n\r\n    async open(param?: any) {\r\n        this.currentGenre = param;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onSaveGenre = async () => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        await this.controller.onSaveGenre(context.form.data);\r\n    }\r\n\r\n    private onDelGenre = async () => {\r\n        if (await this.vCall(VConfirmDeleteGenre, this.currentGenre) === true) {\r\n            await this.controller.delGenre(this.currentGenre);\r\n            this.closePage();\r\n        };\r\n    }\r\n\r\n    private page = observer(() => {\r\n        // let { cApp } = this.controller;\r\n        // let { cProduct } = cApp;\r\n        let buttonDel: any = <></>;\r\n        // let buttonDel: any = <button className=\"btn btn-sm btn-success mr-2\" onClick={this.onDelGenre}>删除</button>;\r\n        let footer = <button type=\"button\" className=\"btn btn-primary w-100\" onClick={this.onSaveGenre}>修改</button>;\r\n\r\n        return <Page header=\"类型信息\" footer={footer} right={buttonDel}>\r\n            <div className=\"alert alert-warning m-0 py-1 small\"><FA name=\"exclamation-circle\" /> 点击图片区域即可更换图标</div>\r\n            <div className=\"App-container container text-left\">\r\n                {/* <div className=\"d-flex flex-column\">\r\n                    <div className=\"w-75 m-auto\"><PointProductImage chemicalId={iconUrl} className=\"w-100\" /></div>\r\n                    <button onClick={() => cProduct.openVUpdatePicture({ topic: '上传分类图标', genre: this.currentGenre })}\r\n                        className=\"btn btn-primary w-6c ml-auto small mt-1\">\r\n                        上传图标\r\n                    </button>\r\n                </div> */}\r\n                <Form ref={v => this.form = v} className=\"mb-3\"\r\n                    schema={schema}\r\n                    uiSchema={this.uiSchema}\r\n                    formData={this.currentGenre}\r\n                    onButtonClick={this.onFormButtonClick}\r\n                    fieldLabelSize={3} />\r\n            </div>\r\n        </Page>\r\n    })\r\n}\r\n\r\n\r\n\r\nexport class VConfirmDeleteGenre extends VPage<CProduct> {\r\n    async open(contact: any) {\r\n        this.openPage(this.page, contact);\r\n    }\r\n\r\n    private onConfirm = async () => {\r\n        await this.returnCall(true);\r\n        this.closePage();\r\n    }\r\n\r\n    private onCancel = async () => {\r\n        await this.returnCall(false);\r\n        this.closePage();\r\n    }\r\n\r\n    private page = (contact: any) => {\r\n        return <Page header=\"删除类型\" back=\"close\">\r\n            <div className=\"w-75 mx-auto border border-primary rounded my-3 p-3 bg-white\">\r\n                <div className=\"text-center\">\r\n                    <FA name='exclamation-circle text-warning fa-2x' />\r\n                    <h6 className=\"text-center mt-2\">是否删除该类型？</h6>\r\n                </div>\r\n                <div className=\"d-flex mt-3 justify-content-center\">\r\n                    <button className=\"btn btn-danger mr-3\" onClick={this.onConfirm}>删除类型</button>\r\n                    <button className=\"btn btn-outline-info mr-3\" onClick={this.onCancel}>取消</button>\r\n                </div>\r\n            </div>\r\n        </Page>;\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, LMR, List, FA } from 'tonva';\r\nimport { VConfirmDeleteGenre } from './EditProductGenre';\r\nimport { CGenre } from './CGenre';\r\nimport { observable } from 'mobx';\r\nimport { GLOABLE } from 'configuration';\r\nimport { PointProductImage } from 'tools/productImage';\r\n\r\nexport class VProductGenre extends VPage<CGenre> {\r\n    private genreInput: HTMLInputElement;\r\n    @observable private creationGenreIsBlink: boolean = false;\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    /**\r\n     * 创建商品类型\r\n     */\r\n    private creationGenre = async () => {\r\n        if (this.genreInput.value) {\r\n            let { creationGenre } = this.controller;\r\n            let createGenre = this.genreInput.value;\r\n            this.genreInput.value = '';\r\n            await creationGenre(createGenre);\r\n        } else {\r\n            this.creationGenreIsBlink = true;\r\n            setTimeout(() => this.creationGenreIsBlink = false, GLOABLE.TIPDISPLAYTIME);\r\n        }\r\n    }\r\n\r\n    private editGenre = async (currentGenre: any) => {\r\n        let { openEditProductGenre } = this.controller;\r\n        await openEditProductGenre(currentGenre)\r\n    }\r\n\r\n    private delGenre = async (currentGenre: any) => {\r\n        let { delGenre } = this.controller;\r\n        if (await this.vCall(VConfirmDeleteGenre, currentGenre) === true) {\r\n            await delGenre(currentGenre);\r\n        };\r\n    }\r\n\r\n    /**\r\n     * 商品类型操作\r\n     */\r\n    private genreActionIcon = (icon: string, action: Function, currentGenre: any) => {\r\n        return <span className=\"align-self-center px-2\" onClick={(e) => { e.stopPropagation(); action(currentGenre); }}> <FA name={icon} /></span>\r\n    }\r\n\r\n    private renderItemGenre = (currentGenre: any) => {\r\n        let right = <div className=\"d-flex pt-2 px-2 cursor-pointer text-info\">\r\n            {this.genreActionIcon('edit', this.editGenre, currentGenre)}\r\n            {this.genreActionIcon('trash', this.delGenre, currentGenre)}\r\n        </div>\r\n        return <LMR right={right}>\r\n            <div className=\"pt-2 px-2\">\r\n                <span className=\" m-auto\"><PointProductImage chemicalId={currentGenre.imageUrl ? currentGenre.imageUrl : '1'} className=\"w-4c\" /></span>\r\n                {currentGenre.name}</div>\r\n        </LMR>;\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { productGenres, onGenreSelected } = this.controller;\r\n        let right = <button className=\"btn btn-primary w-100\" onClick={this.creationGenre}>创建</button>\r\n        let none = <div className=\"mt-3 text-secondary d-flex justify-content-center\">『 无商品类型 』</div>\r\n        let creationGenreTipUI = this.creationGenreIsBlink ? <small className=\"text-danger ml-2\">必须填商品类型</small> : null;\r\n        return <Page header=\"商品类型\">\r\n            <div className=\"px-2 py-3\">\r\n                <LMR right={right}>\r\n                    <form onSubmit={(e) => { e.preventDefault(); this.creationGenre() }} >\r\n                        <input ref={v => this.genreInput = v} type=\"text\" placeholder=\"输入创建的商品类型\" className=\"form-control\"></input>\r\n                    </form>\r\n                </LMR>\r\n                {creationGenreTipUI}\r\n                <List items={productGenres} item={{ render: this.renderItemGenre, onClick: onGenreSelected, }} none={none} className=\"mt-2\" />\r\n            </div>\r\n        </Page>\r\n    })\r\n}","import { observable } from 'mobx';\r\nimport { VProductGenre } from './VProductGenre';\r\nimport { CUqBase } from 'CBase';\r\nimport { EditProductGenre } from './EditProductGenre';\r\n\r\nexport class CGenre extends CUqBase {\r\n    private fromGenreSelect: boolean;\r\n    @observable productGenres: any[] = [];\r\n    async internalStart(fromGenreSelect: boolean) {\r\n        this.fromGenreSelect = fromGenreSelect;\r\n        await this.getProductGenres();\r\n        this.openVPage(VProductGenre);\r\n    }\r\n\r\n    /**\r\n    * 商品类型修改页\r\n    */\r\n    openEditProductGenre = async (currentGenre: any) => {\r\n        this.openVPage(EditProductGenre, currentGenre);\r\n    }\r\n\r\n    /**\r\n     * 获取所有的分类\r\n     */\r\n    getProductGenres = async () => {\r\n        this.productGenres = await this.uqs.积分商城.Genre.all();\r\n    }\r\n\r\n    /**\r\n    * 创建商品类型\r\n    */\r\n    creationGenre = async (currentGenre: string) => {\r\n        let { 积分商城 } = this.uqs;\r\n        let { id } = await 积分商城.Genre.save(undefined, { name: currentGenre });\r\n        let creationGenre = await 积分商城.Genre.load(id);\r\n        this.productGenres.push(creationGenre);\r\n    }\r\n\r\n    /**\r\n    * 修改商品类型\r\n    */\r\n    onSaveGenre = async (currentGenre: any) => {\r\n        let { 积分商城 } = this.uqs;\r\n        let { id, name, imageUrl } = currentGenre;\r\n        let rawData = await 积分商城.Genre.load(id);/* 原始数据 */\r\n        let { name: rname, imageUrl: rimgUrl } = rawData\r\n        if (name !== rname || imageUrl !== rimgUrl) {\r\n            await 积分商城.Genre.save(id, { name, imageUrl });\r\n            let findGenreIndex = this.productGenres.findIndex((v: any) => v.id === id);\r\n            this.productGenres.splice(findGenreIndex, 1, currentGenre);\r\n        }\r\n        this.closePage();\r\n        /* await 积分商城.Genre.save(id, { name });\r\n        let findGenreIndex = this.productGenres.findIndex((v: any) => v.id === id);\r\n        this.productGenres.splice(findGenreIndex, 1, currentGenre); */\r\n    }\r\n\r\n    /**\r\n     * 删除商品类型\r\n     */\r\n    delGenre = async (currentGenre: any) => {\r\n        await this.uqs.积分商城.PointProductGenreDelete.submit({ genre: currentGenre });\r\n        await this.getProductGenres();\r\n        /* let index = this.productGenres.findIndex(v => v.genre === currentGenre.genre);\r\n        this.productGenres.splice(index, 1); */\r\n    }\r\n\r\n    /**\r\n     * 选择商品类型\r\n     */\r\n    onGenreSelected = (currentGenre: any) => {\r\n        if (this.fromGenreSelect) {\r\n            this.backPage();\r\n            this.returnCall(currentGenre);\r\n        }\r\n    }\r\n}\r\n","import { CUqBase } from '../CBase';\r\nimport { VMe } from './VMe';\r\nimport { QueryPager } from 'tonva';\r\nimport { observable } from 'mobx';\r\nimport { CLottery } from 'pointShop/CLottery';\r\nimport { CGenre } from 'pointShop/CGenre';\r\n\r\nexport class CMe extends CUqBase {\r\n\r\n    @observable pageHavingAudit: QueryPager<any>;\r\n    @observable pageHavingRefuse: QueryPager<any>;\r\n\r\n    protected async internalStart() {\r\n\r\n    }\r\n\r\n    async changeWebUser(webUser: any) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.changeWebUser(webUser);\r\n    }\r\n\r\n    async changeWebUserContact(webUserContact: any) {\r\n        let { currentUser } = this.cApp;\r\n        await currentUser.changeWebUserContact(webUserContact);\r\n    }\r\n\r\n    /**\r\n     * 商品类型\r\n     */\r\n    async openProductGenre() {\r\n        let genreList = this.newC(CGenre);\r\n        await genreList.start(false);\r\n    }\r\n\r\n    /**\r\n     * 抽奖产品\r\n     */\r\n    async openLottery() {\r\n        let lottery = this.newC(CLottery);\r\n        await lottery.start();\r\n    }\r\n\r\n    tab = () => this.renderView(VMe);\r\n}","import * as React from 'react';\r\nimport { CLordScreen } from './CLordScreen';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, FA } from 'tonva';\r\n\r\nexport class VLordScreen extends VPage<CLordScreen> {\r\n    private lordScreenCase: any[] = [\r\n        { caption: '商品库', state: 'productList', icon: 'list-ul' },\r\n        // { caption: '商品类型', state: 'productGenre', icon: 'th-large' },\r\n        { caption: '新增商品', state: 'creationProduct', icon: 'plus-circle' },\r\n        { caption: '积分商品', state: 'pointProduct', icon: 'diamond' },\r\n    ];\r\n    async open(param?: any) { }\r\n\r\n    render(param?: any): JSX.Element {\r\n        return <this.pageContent />\r\n    }\r\n\r\n    private interfaceCase = () => {\r\n        let { openInterfaceCase } = this.controller\r\n        return <div className=\"d-flex w-100 my-3 flex-wrap px-1 text-center\">\r\n            {\r\n                this.lordScreenCase.map(((os, index) => {\r\n                    let { caption, state, icon } = os;\r\n                    return <div key={index} className=\"d-flex flex-column align-items-center cursor-pointer mb-3 py-2 px-1 mx-2 rounded\"\r\n                        style={{ color: '#436EEE', background: '#F2F2F2', width: '20%' }}\r\n                        onClick={() => openInterfaceCase(state)}>\r\n                        <FA name={icon} className=\"fa-2x\" />\r\n                        <small className=\"text-muted\">{caption}</small>\r\n                    </div>;\r\n                }))\r\n            }\r\n        </div>\r\n    }\r\n\r\n    private pageContent = observer(() => {\r\n        return <Page header=\"PointShopMs\" back=\"none\">\r\n            {this.interfaceCase()}\r\n        </Page>\r\n    })\r\n}","import { VLordScreen } from './VLordScreen';\r\nimport { CUqBase } from 'CBase';\r\n\r\nexport class CLordScreen extends CUqBase {\r\n\r\n    protected async internalStart() { }\r\n\r\n    tab = () => this.renderView(VLordScreen);\r\n\r\n    /**\r\n     * 首屏界面去向\r\n     */\r\n    openInterfaceCase = async (state: any) => {\r\n        let { cProduct, cPointProduct, cMe } = this.cApp;\r\n        let { openProductList, openCreationProduct, } = cProduct;\r\n        switch (state) {\r\n            case 'productList':\r\n                await openProductList();\r\n                return;\r\n            case 'productGenre':\r\n                await cMe.openProductGenre();\r\n                return;\r\n            case 'creationProduct':\r\n                await openCreationProduct();\r\n                return;\r\n            case 'pointProduct':\r\n                await cPointProduct.openPointProduct();\r\n                return;\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n}","import moment from \"moment\";\r\n\r\nexport function momentFormat(date?: any, delimitFormat?: string) {\r\n    return moment(date).format(delimitFormat ? delimitFormat : 'YYYY-MM-DD');\r\n}","import * as React from 'react';\r\nimport { VPage, Page, FA, LMR, Form, UiSchema, UiInputItem, Schema, Context } from 'tonva';\r\nimport { CProduct, OperationAdapt } from 'product/CProduct';\r\nimport { observer } from 'mobx-react';\r\nimport { productPointValidation } from 'tools/inputValidations';\r\nimport { PointProductImage } from 'tools/productImage';\r\nimport classNames from 'classnames';\r\nimport { observable } from 'mobx';\r\nimport { momentFormat } from 'tools/momentFormat';\r\nconst schema: Schema = [\r\n    { name: 'point', type: 'string', required: true },\r\n    { name: 'startDate', type: 'date', required: true },\r\n    { name: 'endDate', type: 'date', required: true },\r\n];\r\n\r\n\r\nexport class VProductOperation extends VPage<CProduct>{\r\n    @observable private productGenreIsBlank: boolean = false;    /* 类型是否选择 */\r\n    @observable private tips: string;    /* 提示 */\r\n    private currentState: string;    /* 当前执行的状态 */\r\n    private form: Form;\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            point: { widget: 'text', label: '积分', placeholder: '设置商品积分', rules: productPointValidation } as UiInputItem,\r\n            startDate: { widget: 'date', label: '上架日期' } as UiInputItem,\r\n            endDate: { widget: 'date', label: '下架日期' } as UiInputItem,\r\n            submit: { widget: 'button', label: '提交' },\r\n        }\r\n    }\r\n\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onSaveOperating = async () => {\r\n        if (!this.form) return;\r\n        /* let { isSelectedGenre } = this.controller;\r\n        if (!isSelectedGenre && this.currentState !== OperationAdapt.DOWNSHELF.type) {\r\n            this.productGenreIsBlank = true;\r\n            setTimeout(() => this.productGenreIsBlank = false, GLOABLE.TIPDISPLAYTIME);\r\n            return;\r\n        } */\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        let { closePage, saveOperation } = this.controller;\r\n        let tipMainPart = await saveOperation({ data: context.form.data, state: this.currentState });\r\n        this.tips = `此商品${tipMainPart.replace(/\\s+/g,'')}成功！`;\r\n        if (this.tips)\r\n            setTimeout(() => this.tips = undefined, 1000);\r\n        setTimeout(() => closePage(1), 500);\r\n    }\r\n\r\n    private tipsUI = observer(() => {\r\n        let tipsUI = <></>;\r\n        if (this.tips) {\r\n            tipsUI = <div className=\"alert alert-success\" role=\"alert\">\r\n                <FA name=\"check-circle\" className=\"text-warning float-left mr-3\" size=\"2x\"></FA>\r\n                {this.tips}\r\n            </div>\r\n        }\r\n        return tipsUI;\r\n    })\r\n\r\n    private operateButtonUI = (name: string, currentState: string) => {\r\n        let { isCreationProduct } = this.controller;\r\n        return <button className={classNames('btn btn-primary', isCreationProduct ? 'w-50' : 'w-8c')}\r\n            onClick={() => { this.currentState = currentState; this.onSaveOperating(); }}>\r\n            {name}</button>\r\n    }\r\n\r\n    private productSelectEntry = (entryDesc: string, action: any, entrySelectedResul: any, tip?: any) => {\r\n        let chevronRight = <FA name=\"chevron-right\" className=\"cursor-pointer\" />;\r\n        return <div className=\"row bg-white d-flex align-items-center px-3 py-2 border-bottom\" onClick={action}>\r\n            <div className='col-4 col-sm-2  text-muted'>{entryDesc}:</div>\r\n            <div className=\"col-8 col-sm-10\">\r\n                <LMR className='w-100 align-items-center' right={chevronRight}>\r\n                    {entrySelectedResul}\r\n                </LMR>\r\n            </div>\r\n            {tip}\r\n        </div>\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { EDIT, UPSHELF, DOWNSHELF, REUPSHELF } = OperationAdapt;\r\n        let { toGenreSelect, openVUpdatePicture, toProductUpShelf, isCreationProduct, goalProductInfo } = this.controller;\r\n        let { genreShow, imageUrl, point, startDate, endDate, description, descriptionC, grade } = goalProductInfo;\r\n        startDate = startDate !== undefined ? momentFormat(startDate) : startDate;\r\n        endDate = endDate !== undefined ? momentFormat(endDate) : endDate;\r\n        let genreData = { point, startDate, endDate, grade };\r\n\r\n        let header = `商品${isCreationProduct ? '新增' : '修改'}`;\r\n        let footer = <div className=\"d-flex justify-content-around\">\r\n            {\r\n                isCreationProduct\r\n                    ? this.operateButtonUI(UPSHELF.name, UPSHELF.type)\r\n                    : <>\r\n                        {this.operateButtonUI(EDIT.name, EDIT.type)}\r\n                        {\r\n                            toProductUpShelf\r\n                                ? this.operateButtonUI(REUPSHELF.name, REUPSHELF.type)\r\n                                : this.operateButtonUI(DOWNSHELF.name, DOWNSHELF.type)\r\n                        }\r\n                    </>\r\n            }\r\n        </div>\r\n        let productGenreBlankTip = this.productGenreIsBlank ? <div className=\"text-danger small my-2 d-flex m-auto\">必须选择商品类型</div> : null;\r\n\r\n        return <Page header={header} footer={footer}>\r\n            <div className=\"position-fixed\" style={{ top: '45%', left: '10%', right: '10%', zIndex: 3 }}>{React.createElement(this.tipsUI)}</div>\r\n            {this.productSelectEntry('商品类型', toGenreSelect, genreShow ? genreShow : '选择商品类型', productGenreBlankTip)}\r\n\r\n            <div className=\"px-3 py-2 bg-white\">\r\n                <div className=\"text-muted\">商品信息:</div>\r\n                <div className=\"m-1 w-100 d-flex flex-column position-relative\">\r\n                    <div title={description} className=\"w-75 m-auto\"><PointProductImage chemicalId={imageUrl} className=\"w-100\" /></div>\r\n                    <small className=\"pt-1\">{descriptionC}</small>\r\n                    <div className=\"d-flex justify-content-between px-1 align-items-center\">\r\n                        <>{grade}</>\r\n                        <button onClick={() => openVUpdatePicture('更新图片')}\r\n                            className=\"btn btn-primary w-6c ml-auto\" >\r\n                            <small>更新图片</small>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {\r\n                <div className=\"container text-left border-bottom bg-white\">\r\n                    <Form ref={v => this.form = v}\r\n                        schema={schema}\r\n                        uiSchema={this.uiSchema}\r\n                        formData={genreData}\r\n                        onButtonClick={this.onFormButtonClick}\r\n                        fieldLabelSize={3} />\r\n                </div>\r\n            }\r\n        </Page >\r\n    })\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, ImageUploader } from 'tonva';\r\nimport { CProduct } from 'product/CProduct';\r\n\r\nexport class VUpdateProductImage extends VPage<CProduct>{\r\n    private label: string = '图片上传';\r\n    async open(param?: any) {\r\n        if (param !== undefined) this.label = typeof param === 'string' ? param : param.topic;\r\n        new Promise<any>((resolve, reject) => {\r\n            this.openPage(this.page, { resolve: resolve, reject: reject });\r\n        }).then(async (imgUrl) => {\r\n            let { updatedProductImage } = this.controller;\r\n            switch (this.label) {\r\n                case '更新图片':\r\n                    await updatedProductImage(imgUrl);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        })\r\n    }\r\n    private page = (props: { resolve: (value: any) => void, reject: (resean?: any) => void }) => {\r\n        let { resolve } = props;\r\n        return <ImageUploader\r\n            label={this.label}\r\n            onSaved={(resId): Promise<void> => { resolve(resId); return; }}\r\n        />\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { View, nav, FA } from 'tonva';\r\nimport { SearchBox } from 'tonva';\r\nimport { CUqBase } from 'CBase';\r\nimport classNames from 'classnames';\r\n\r\nexport class VSearchHeader extends View<CUqBase> {\r\n    protected placeholder: string = '搜索商品名称';\r\n    private onSearch = async (key: string, param: 'home' | 'insearch' | 'productdetail') => {\r\n        let { topKey } = this.controller.cApp;\r\n        if (param !== 'home') {\r\n            nav.popTo(topKey);\r\n        }\r\n        this.controller.start(key);\r\n    }\r\n\r\n    render(param: 'home' | 'insearch' | 'productdetail') {\r\n        let size: any = param === 'home' ? \"md\" : 'sm';\r\n        return <SearchBox className={classNames(\"w-100\", 'mr-3')}\r\n            size={size}\r\n            onSearch={(key: string) => this.onSearch(key, param)}\r\n            placeholder={this.placeholder} />\r\n    }\r\n}\r\n\r\nexport class VProductSearchHeader extends VSearchHeader { }\r\n\r\n\r\nexport class VPointProductSearchHeader extends VSearchHeader {\r\n    placeholder: string = '搜索积分商品';\r\n}\r\n\r\nexport class VBrowseProductSearchHeader extends VSearchHeader {\r\n    placeholder: string = '搜索商品';\r\n}\r\n\r\nexport function searchKeyShow(searchKey: string, action: any) {\r\n    return searchKey ? <div className=\"bg-white d-flex justify-content-between py-1 px-3 border-bottom\">\r\n        <span><small className=\"small text-muted\">搜索: </small>{searchKey}</span>\r\n        <span onClick={action}><FA name=\"times-circle-o\" className=\"text-danger\" /></span>\r\n    </div> : null;\r\n}","import * as React from 'react';\r\nimport { LMR, View } from 'tonva';\r\nimport logo from '../images/logo.png';\r\nimport { CProduct } from './CProduct';\r\n\r\nexport class VSiteHeader extends View<CProduct> {\r\n    render() {\r\n        let { openCreationProduct, renderSearchHeader } = this.controller;\r\n        let left = <img className=\"m-1 ml-2 h-3c\" src={logo} alt=\"logo\" />;\r\n        let right = <span className=\"fa-stack mr-2 mt-1 small\" onClick={openCreationProduct}>\r\n            <i className=\"fa fa-circle-o fa-stack-2x text-success\"></i>\r\n            <i className=\"fa fa-plus fa-stack-1x text-success\"></i>\r\n        </span>\r\n        return <div style={{ borderBottom: '1px dashed #dee2e6' }}>\r\n            <LMR className=\"mb-1 py-1 align-items-center bg-white\" left={left} right={right}>\r\n                <div className=\"mt-1 mx-3\">\r\n                    {renderSearchHeader()}\r\n                </div>\r\n            </LMR>\r\n        </div>\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, List, FA } from 'tonva';\r\nimport { CProduct, ProductSources } from 'product/CProduct';\r\nimport { PointProductImage } from 'tools/productImage';\r\nimport { searchKeyShow } from 'lordScreen/VSearchHeader';\r\nimport { observer } from 'mobx-react';\r\nimport { VSiteHeader } from './VSiteHeader';\r\nimport { observable } from 'mobx';\r\nimport classNames from 'classnames';\r\nexport const noProductNone: JSX.Element = <div className=\"mt-4 d-flex justify-content-center text-secondary\">『 暂无商品 』</div>;\r\n\r\nexport class VProduct extends VPage<CProduct>{\r\n    private filterGenre: string;\r\n    @observable postSource: string = '主列表';\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    render(param?: any): JSX.Element {\r\n        return <this.page />\r\n    }\r\n\r\n    /**\r\n     * 恢复所有数据\r\n     */\r\n    refreshProduct = async () => {\r\n        let { getProductLibrary } = this.controller;\r\n        this.filterGenre = undefined;\r\n        await getProductLibrary();\r\n    }\r\n\r\n    /* renderPointProductPost = (pointProduct: any) => {\r\n        let { openPointProductPost } = this.controller;\r\n        let { isPosTExist } = pointProduct;\r\n        return <div className=\"d-flex justify-content-end mx-2\" onClick={(e) => { e.stopPropagation(); openPointProductPost(pointProduct, isPosTExist ? '编辑' : '创建', this.postSource) }}>\r\n            <div>帖文</div>\r\n            <div>\r\n                {\r\n                    isPosTExist\r\n                        ? <span><FA name=\"edit\" size=\"lg\" className=\"mx-2 text-primary\" /></span>\r\n                        : <span><FA name=\"plus-circle\" size=\"lg\" className=\"mx-2 text-success\" /></span>\r\n                }\r\n            </div>\r\n        </div>\r\n        // return null;\r\n    } */\r\n\r\n    renderPostOperaLabel = (pointProduct: any) => {\r\n        return this.controller.renderPostOperaLabel(pointProduct, this.postSource)\r\n    }\r\n\r\n    protected renderPointProduct = (pointProduct: any) => {\r\n        let { description, descriptionC, imageUrl, point, grade } = pointProduct;\r\n        return <div className=\"row m-1 w-100\">\r\n            <div title={description} className=\"col-4 m-auto p-0\"><PointProductImage chemicalId={imageUrl} className=\"w-100\" style={{maxHeight:'30vw'}} /></div>\r\n            <div className=\"col-8 small py-1\">\r\n                <div>{descriptionC}</div>\r\n                <div className=\"mt-2 mb-1\">{grade}</div>\r\n                <div className=\"row m-0 pt-1\">\r\n                    <div className=\"col-5 m-0 p-0\">\r\n                        <span className=\"text-danger h5\">{point}</span>\r\n                        <small>分</small>\r\n                    </div>\r\n                </div>\r\n                {this.renderPostOperaLabel(pointProduct)}\r\n                {/* {this.renderPointProductPost(pointProduct)} */}\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private renderGenreItem = (item: any) => {\r\n        let { name, imageUrl } = item;\r\n        return <div>\r\n            <label className=\"w-100 d-flex flex-column justify-content-center\">\r\n                {\r\n                    imageUrl\r\n                        ? <div className=\"m-auto\" style={{ width: '30%' }}><PointProductImage chemicalId={imageUrl ? imageUrl : ':0-0268.png'} className=\"w-100\" /></div>\r\n                        : <FA name=\"leaf\" className='mt-2 text-success mb-2' size='lg' />\r\n                }\r\n                <div className='text-dark small'>{name}</div>\r\n            </label>\r\n        </div>\r\n    }\r\n\r\n    page = observer(() => {\r\n        let { productLibrary, onProductSelected, filterByProductGenre, cApp } = this.controller;\r\n        let { cGenre } = cApp;\r\n        let siteHeader = this.renderVm(VSiteHeader);\r\n        let genreNone = <div className=\"ml-4 pl-2 small text-secondary\">暂无商品类型,请去新增类型 &rArr; 我的 &raquo;&raquo; 商品类型</div>\r\n        return <div className=\"bg-light\">\r\n            {siteHeader}\r\n            <div className=\"border-bottom mb-1 bg-light pt-2\">\r\n                <div className=\"w-24c mt-1 mx-3 d-flex justify-content-between\">\r\n                    <small className={classNames(cGenre.productGenres.length && 'mb-2')}>商品类型：{this.filterGenre}</small>\r\n                    <span className={classNames(!this.filterGenre && 'd-none')} onClick={this.refreshProduct}>\r\n                        <FA name=\"times-circle-o\" className=\"text-danger\" />\r\n                    </span>\r\n                </div>\r\n                <List className=\"d-flex flex-wrap py-2 text-center bg-transparent\"\r\n                    items={cGenre.productGenres}\r\n                    item={{\r\n                        render: this.renderGenreItem,\r\n                        onClick: (genre) => { filterByProductGenre(genre); this.filterGenre = genre.name; },\r\n                        className: 'w-25 bg-transparent'\r\n                    }} none={genreNone} />\r\n            </div>\r\n            <List items={productLibrary} item={{ render: this.renderPointProduct, onClick: (v: any) => { this.controller.currentSource = ProductSources[0]; onProductSelected(v) } }} none={noProductNone} />\r\n        </div>\r\n    })\r\n}\r\n\r\n/**\r\n * 搜索商品库页面\r\n */\r\nexport class VSearchProduct extends VProduct {\r\n    @observable searchKey: string;\r\n    @observable searchProductLibrary: any[] = [];   /* 商品库搜索列表  */\r\n    @observable postSource: string = '检索列表';\r\n    async open(param?: any) {\r\n        let { searchKey, searchProduct } = param;\r\n        this.searchKey = searchKey;\r\n        this.searchProductLibrary = searchProduct;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    /* renderPointProductPost = (pointProduct: any) => {\r\n        let { openPointProductPost } = this.controller;\r\n        let { isPosTExist } = pointProduct;\r\n        return <div className=\"d-flex justify-content-end mx-2\" onClick={(e) => { e.stopPropagation(); openPointProductPost(pointProduct, isPosTExist ? '编辑' : '创建', this.postSource) }}>\r\n            <div>帖文</div>\r\n            <div>\r\n                {\r\n                    isPosTExist\r\n                        ? <span><FA name=\"edit\" size=\"lg\" className=\"mx-2 text-primary\" /></span>\r\n                        : <span><FA name=\"plus-circle\" size=\"lg\" className=\"mx-2 text-success\" /></span>\r\n                }\r\n            </div>\r\n        </div>\r\n    } */\r\n\r\n\r\n    refreshProduct = async () => {\r\n        let { getProductLibrary } = this.controller;\r\n        this.searchKey = undefined;\r\n        await getProductLibrary();\r\n        // this.searchProductLibrary = await isPosTExist(productLibrary);\r\n        this.controller.searchProductLibrary = this.controller.productLibrary;\r\n        // this.controller.searchProductLibrary = await isPosTExist(productLibrary);\r\n    }\r\n\r\n    page = observer(() => {\r\n        let { onProductSelected, renderSearchHeader, searchProductLibrary } = this.controller;\r\n        let header = <div className=\"mx-1 mr-3 w-100\">{renderSearchHeader()}</div>;\r\n        return <Page header={header} headerClassName=\"bg-light\">\r\n            {this.searchKey && searchKeyShow(this.searchKey, this.refreshProduct)}\r\n            <List items={searchProductLibrary} item={{ render: this.renderPointProduct, onClick: onProductSelected }} none={noProductNone} />\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, Page, List, FA, LMR, Scroller} from 'tonva';\r\nimport { CProduct, ProductSources } from 'product/CProduct';\r\nimport { PointProductImage } from 'tools/productImage';\r\nimport { observer } from 'mobx-react';\r\nimport { noProductNone } from './VProduct';\r\nimport { observable } from 'mobx';\r\nimport { GLOABLE } from 'configuration';\r\nimport classNames from 'classnames';\r\n\r\nexport class VCreationProduct extends VPage<CProduct>{\r\n    private genreInput: HTMLInputElement;\r\n    @observable private searchIsBlank: boolean = false;\r\n    @observable Pagination: boolean = false;\r\n    @observable searchKey: string;\r\n    async open(param?: any) {\r\n        if (param !== undefined) this.searchKey = param;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private renderPointProduct = (pointProduct: any) => {\r\n        let { imageUrl, description, descriptionC, radioy, unit, price } = pointProduct;\r\n        return <div className=\"row m-1 w-100\">\r\n            <div title={description} className=\"col-4 m-0 p-0\"><PointProductImage chemicalId={imageUrl} className=\"w-100\" /></div>\r\n            <div className=\"col-8 small py-1\">\r\n                <div>{descriptionC}</div>\r\n                <div className=\"my-2\">{radioy}{unit}</div>\r\n                {\r\n                    price \r\n                        ? <div className=\"text-danger h5 mt-1\">￥{price ? price.price :''}</div>\r\n                        : null\r\n                }\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private ProductSelected = async (pointProduct: any) => {\r\n        let { onProductSelected ,currentSource} = this.controller;\r\n        let { description, descriptionC, radioy, unit, product, id, imageUrl } = pointProduct;\r\n        let pointProductInfo;\r\n        if (currentSource.id !== 2) {\r\n            pointProductInfo = { description, descriptionC, grade: `${radioy}${unit}`, id: undefined, imageUrl: product.obj.imageUrl, point: undefined, sourceId: id.id, isValid: 1 };\r\n        } else {\r\n            pointProductInfo = { description, descriptionC, grade: undefined, id: undefined, imageUrl: imageUrl, point: undefined, sourceId: id, isValid: 1 };\r\n        }\r\n        await onProductSelected(pointProductInfo, '新增');\r\n    }\r\n\r\n    private renderDataSources = (dataSource: any) => {\r\n        let { source, id } = dataSource;\r\n        return <span className={classNames(this.controller.currentSource.id === id ? 'text-light bg-primary' : 'text-primary', 'm-1 border-primary border py-1 px-2 rounded-lg small')}>{source}</span>;\r\n    }\r\n\r\n    private searchProduct = async () => {\r\n        let { searchToCreationProduct,currentSource } = this.controller;\r\n        if (!this.genreInput.value || !currentSource) {\r\n            this.searchIsBlank = true;\r\n            setTimeout(() => this.searchIsBlank = false, GLOABLE.TIPDISPLAYTIME);\r\n            return;\r\n        }\r\n        this.searchKey = this.genreInput.value;\r\n        this.genreInput.value = '';\r\n        await searchToCreationProduct({ keyWord:this.searchKey });\r\n    }\r\n\r\n    private changePageIndex = async (page:number) => {\r\n        let { searchToCreationProduct, pageIndex, pageCount,openCreationProduct } = this.controller;\r\n        if ((page > 0 && pageIndex < pageCount) || (page < 0 && pageIndex >= 2)) {\r\n            this.controller.pageIndex += page;\r\n            await searchToCreationProduct({ keyWord: this.searchKey, Pagination: true });\r\n            this.closePage();\r\n            await openCreationProduct(this.searchKey);\r\n        }\r\n    }\r\n\r\n    private onScrollBottom = async (scroller: Scroller) => {\r\n        scroller.scrollToBottom();\r\n        let { searchProductsToCreation } = this.controller;\r\n        if (!(searchProductsToCreation instanceof Array)) {\r\n            searchProductsToCreation.more();\r\n        }\r\n    }\r\n\r\n    private renderPagination = () => {\r\n        let { pageIndex, pageCount} = this.controller;\r\n        return <div className=\"d-flex px-3 justify-content-between\">\r\n                <button\r\n                    onClick={()=>this.changePageIndex(-1)}\r\n                    className={classNames('btn', pageIndex === 1 ? 'disabled btn-light border border-secondary' : 'btn-primary')}>prev</button>\r\n                <div className=\"text-center align-self-center\"><span className=\"text-primary\">{pageIndex}</span>/{pageCount}</div>\r\n                <button\r\n                    onClick={()=>this.changePageIndex(1)}\r\n                    className={classNames('btn', pageIndex === pageCount ? 'disabled btn-light border border-secondary' : 'btn-primary')}>next</button>\r\n            </div>\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { searchProductsToCreation, currentSource, changeCurrentProductSource} = this.controller;\r\n        let LMRRight = <button className=\"btn btn-primary w-100\" onClick={this.searchProduct}><FA name=\"search\" /></button>\r\n        let footer = undefined;\r\n        if ((searchProductsToCreation instanceof Array) && searchProductsToCreation.length)\r\n            footer = this.renderPagination();\r\n        \r\n        return <Page header=\"商品新增\" onScrollBottom={this.onScrollBottom} footer={footer}>\r\n            <div className=\"p-2 border-bottom bg-white\">\r\n                <div className=\"d-flex flex-column mb-2\">\r\n                    <div className=\"my-1\">商品源：<small>{currentSource ? currentSource.type : null}</small></div>\r\n                    <List items={ProductSources} item={{ render: this.renderDataSources, onClick: (v: any) => { changeCurrentProductSource(v) } }} className=\"d-flex bg-white w-100 flex-wrap\" none=\"暂无商品源\" />\r\n                </div>\r\n                <LMR right={LMRRight}>\r\n                    <form onSubmit={(e) => { e.preventDefault(); this.searchProduct() }} >\r\n                        <input ref={v => this.genreInput = v} type=\"text\" placeholder=\"请输入商品名称\" className=\"form-control\"></input>\r\n                    </form>\r\n                </LMR>\r\n                {this.searchIsBlank ? <div className=\"text-danger mt-1 small\">{`${!this.genreInput.value ? '请输入商品名称' : !currentSource ? '请选择商品源' : ''}`}</div> : null}\r\n            </div>\r\n                <List items={searchProductsToCreation !== undefined ? searchProductsToCreation : []}\r\n                    item={{ render: this.renderPointProduct, onClick: this.ProductSelected }} none={noProductNone} />\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { CProduct } from 'product/CProduct';\r\nimport { observer } from 'mobx-react';\r\nimport { observable } from 'mobx';\r\n\r\n\r\nexport class VPointProductPost extends VPage<CProduct>{\r\n    @observable textarea: HTMLTextAreaElement;\r\n\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    onSave = async () => {\r\n        if (this.textarea.value !== '') {\r\n            let { onSavePointProductPost } = this.controller;\r\n            await onSavePointProductPost(this.textarea.value)\r\n        }\r\n        // this.textarea.value = '';\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { currentPostContent, postType, openPointProductPostShow, cApp } = this.controller;\r\n        let { cMedia } = cApp\r\n        let header = `${postType !== undefined ? postType : ''}帖文`;\r\n        let right = <div>\r\n            {currentPostContent && <button onClick={openPointProductPostShow} type=\"button\" className=\"btn btn-sm btn-success mr-3\">预览</button>}\r\n            <button onClick={() => cMedia.openMainPage()} type=\"button\" className=\"btn btn-sm btn-success mr-3\">图片</button>\r\n            {/* <button onClick={() => { document.location.href = \"http://localhost:7799?type=otherfiles\" }} type=\"button\" className=\"btn btn-sm btn-success mr-3\">图片</button> */}\r\n            <button onClick={() => { this.onSave() }} type=\"button\" className={`btn btn-sm btn-success mr-3`}>保存</button>\r\n        </div>;\r\n\r\n        return <Page header={header} right={right}>\r\n            <div ref={this.refIframe} className='py-1'>\r\n                <textarea ref={tt => this.textarea = tt} className=\"w-100 h-100\" defaultValue={currentPostContent} />\r\n            </div >\r\n            {/* <div className=\"mx-3 py-2 h-100 d-flex flex-column\">\r\n                <textarea ref={tt => this.textarea = tt} className=\"flex-fill mb-2\" defaultValue={currentPostContent} rows={25} />\r\n            </div > */}\r\n        </Page >\r\n    })\r\n\r\n    private refIframe = (ifrm: HTMLIFrameElement) => {\r\n        if (!ifrm) return;\r\n        let article = ifrm.parentElement.parentElement;\r\n        let header = (article.querySelector('section.tv-page-header') as HTMLElement);\r\n        ifrm.style.height = (window.innerHeight - header.clientHeight) + 'px';\r\n        article.parentElement.style.overflowY = 'hidden';\r\n    }\r\n}\r\n","import * as React from 'react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { CProduct } from 'product/CProduct';\r\nimport { observer } from 'mobx-react';\r\nimport { observable } from 'mobx';\r\n\r\nexport class VPointProductPostShow extends VPage<CProduct>{\r\n    @observable isScale: boolean;\r\n    async open(param: any) {\r\n        this.isScale = param;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    setDetailMobSize = () => {\r\n        setTimeout(() => {\r\n            let getDetail_mob = document.querySelector('.reset-z-detail_mob');\r\n            let getTable__01 = document.getElementById('__01');\r\n            let viewP = 750;\r\n            if (getTable__01) viewP = getTable__01.offsetWidth;\r\n            getDetail_mob.setAttribute('style', `transform:scale(${window.innerWidth / viewP})`);\r\n        }, 50);\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { htmlFragment } = this.controller;\r\n        if(this.isScale) this.setDetailMobSize();\r\n        return <Page header='预览帖文'>\r\n            <div dangerouslySetInnerHTML={{ __html: htmlFragment }} className=\"reset-z-detail_mob\"></div>\r\n        </Page >\r\n    })\r\n}","import { observable } from 'mobx';\r\nimport { observer } from 'mobx-react';\r\nimport * as React from 'react';\r\nimport { FA, View } from 'tonva';\r\nimport { CProduct } from './CProduct';\r\nimport classNames from 'classnames';\r\n\r\nexport class VPostOperaLabel extends View<CProduct> {\r\n    @observable private isPosTExist: boolean;\r\n    render(param: any): JSX.Element {\r\n        let { pointProduct } = param;\r\n        if (pointProduct.isPosTExist) this.isPosTExist = pointProduct.isPosTExist;\r\n        else this.getPostOpera(pointProduct);\r\n        return <this.content param={param} />;\r\n    }\r\n\r\n    private getPostOpera = async (pointProduct: any) => {\r\n        let getPost = await this.controller.getPointProductDetailPost(pointProduct);\r\n        this.isPosTExist = getPost !== undefined ? true : false;\r\n    }\r\n\r\n    private content = observer((param: any): any => {\r\n        let { pointProduct, postSource } = param.param;\r\n        let { openPointProductPost } = this.controller; \r\n        return <div className=\"d-flex justify-content-end mx-2\" onClick={(e) => { e.stopPropagation(); openPointProductPost(pointProduct, this.isPosTExist , postSource) }}>\r\n            <div>帖文</div>\r\n            <div>\r\n                <span><FA name={this.isPosTExist ? 'edit' :'plus-circle'} size=\"lg\" className={classNames('mx-2', this.isPosTExist ?'text-primary':'text-success')} /></span>\r\n            </div>\r\n        </div>\r\n    });\r\n}\r\n","export async function FetchPost(url: string, data: any) {\r\n    return await window.fetch(url, {\r\n        method: 'post',\r\n        body: data,\r\n        headers: {\r\n            'Accept': 'application/x-www-form-urlencoded',\r\n            'Content-Type': 'application/json',\r\n        }\r\n    });\r\n}","import * as React from 'react';\r\nimport { CUqBase } from 'CBase';\r\nimport { VProductOperation } from './VProductOperation';\r\nimport { VUpdateProductImage } from './VUpdateProductImage';\r\nimport { observable } from 'mobx';\r\nimport { CGenre } from '../pointShop/CGenre';\r\nimport { VProductSearchHeader } from 'lordScreen/VSearchHeader';\r\nimport { VProduct, VSearchProduct } from './VProduct';\r\nimport { tv, QueryPager } from 'tonva';\r\nimport { momentFormat } from 'tools/momentFormat';\r\nimport { VCreationProduct } from './VCreationProduct';\r\nimport { VPointProductPost } from './VPointProductPost';\r\nimport { GLOABLE } from '../configuration';\r\nimport { VPointProductPostShow } from './VPointProductPostShow';\r\nimport { VPostOperaLabel } from './VPostOperaLabel';\r\nimport { FetchPost } from 'tools/wFeatch';\r\nimport { JDImagePath } from 'tools/productImage';\r\nexport const ProductSources = [\r\n    { id: 1, source: '本司', sourceId: 1, type: 'selfsales' },\r\n    { id: 2, source: '京东', sourceId: 2, type: 'jd.com' },\r\n]\r\n\r\nexport const OperationAdapt = {\r\n    EDIT: { type: 'edit', name: '修 改'},\r\n    UPSHELF: { type: 'upShelf', name: '上 架'},\r\n    REUPSHELF: { type: 'ReUpShelf', name: '上 架'},\r\n    DOWNSHELF: { type: 'downShelf', name: '下 架'},\r\n}\r\n\r\nexport class CProduct extends CUqBase {\r\n    @observable goalProductInfo: any = {};        /* 商品信息 */\r\n    @observable productLibrary: any[] = [];       /* 商品库 */\r\n    @observable searchProductLibrary: any[] = []; /* 查询商品 */\r\n    @observable postSource: any;                  /* 帖文操作来源 */\r\n\r\n    @observable currentSource: any = ProductSources[0];        /* 当前商品源 */\r\n    @observable pageIndex: number = 1;            /* 当前第几页 */\r\n    @observable pageCount: number = 1;            /* 总页数 */\r\n\r\n    @observable searchProductsToCreation: QueryPager<any> | any[];    /* 新增商品时所查询的列表 */\r\n    @observable isSelectedGenre: boolean = false;             /* 商品类型是否选择 */\r\n    @observable toProductUpShelf: boolean;                    /* 是否上架or下架 */\r\n    @observable isCreationProduct: boolean;                   /* 是否新增商品 */\r\n    @observable htmlFragment: string = '';                    /* 商品帖文预览内容 */\r\n    @observable postType: string = '';                        /* 商品帖文类型 */\r\n    @observable currentProduct: any;                          /* 当前编辑帖文商品 */\r\n    @observable currentPostContent: string = '';              /* 当前帖文内容 */\r\n\r\n    protected async internalStart(param?: any) {\r\n        let searchProduct = await this.searchByKey(param);\r\n        // searchProduct = await this.isPosTExist(searchProduct);\r\n        this.searchProductLibrary = searchProduct;\r\n        this.closePage();\r\n        this.openVPage(VSearchProduct, { searchKey: param, searchProduct });\r\n    }\r\n\r\n    tab = () => {\r\n        return this.renderView(VProduct);\r\n    }\r\n\r\n    /**\r\n     * 商品库\r\n     */\r\n    openProductList = async () => {\r\n        this.goalProductInfo.genreShow = undefined;\r\n        await this.getProductLibrary();\r\n        this.openVPage(VProduct);\r\n    }\r\n\r\n    /**\r\n     * 新增商品\r\n     */\r\n    openCreationProduct = async (keyWord?:any) => {\r\n        this.goalProductInfo = { genreShow: undefined };\r\n        if (typeof keyWord !== 'string') {\r\n            this.searchProductsToCreation = undefined;\r\n            this.currentSource=ProductSources[0];\r\n        }\r\n        this.openVPage(VCreationProduct,keyWord);\r\n    }\r\n\r\n    /**\r\n     * 帖文页面\r\n     */\r\n    openPointProductPost = async (pointProduct: any, isPosTExist: boolean, postSource: string) => {\r\n        this.postType = isPosTExist ? '编辑' :'创建';\r\n        this.postSource = postSource;\r\n        this.currentProduct = pointProduct;\r\n        if (isPosTExist)\r\n            this.currentPostContent = await this.getPointProductDetailPost(pointProduct);\r\n        else this.currentPostContent = undefined;\r\n        this.openVPage(VPointProductPost);\r\n    }\r\n\r\n    /**\r\n     * 帖文预览页面\r\n     */\r\n    openPointProductPostShow = async () => {\r\n        this.htmlFragment = await this.getPointProductDetailPostHtml(this.currentProduct);\r\n        let getProductSource =  await this.uqs.积分商城.PointProductSource.obj({ pointProduct:this.currentProduct, sourceId: undefined });\r\n        let isScale = false;\r\n        if (getProductSource && getProductSource.type === 'jd.com') isScale = true;\r\n        this.openVPage(VPointProductPostShow,isScale);\r\n    }\r\n\r\n    renderPostOperaLabel = (pointProduct: any, postSource?: any) => {\r\n        return this.renderView(VPostOperaLabel, { pointProduct, postSource });\r\n    }\r\n\r\n    /**\r\n     * 更改商品源\r\n     */\r\n    changeCurrentProductSource = (productSource: any) => {\r\n        if (this.currentSource.id !== productSource.id) {\r\n            this.currentSource = productSource;\r\n            this.searchProductsToCreation = [];\r\n            this.pageIndex = 1;\r\n        }\r\n    }\r\n    /**\r\n     * 搜索商品库中商品\r\n     */\r\n    searchByKey = async (key: any) => {\r\n        return await this.uqs.积分商城.PointProductLib.search(key, 0, 100);\r\n    }\r\n\r\n    /**\r\n     * 搜索要添加到商品库的商品\r\n     */\r\n    searchToCreationProduct = async (searchTerm: any) => {\r\n        let { keyWord,Pagination } = searchTerm;\r\n        let { type } = this.currentSource;\r\n        if (Pagination === undefined) this.pageIndex = 1;\r\n        switch (type) {\r\n            case \"selfsales\":\r\n                await this.searchSelfPointProduct(keyWord);\r\n                return;\r\n            case 'jd.com':\r\n                await this.searchPointProductByJD(keyWord);\r\n                /* let res = await window.fetch(GLOABLE.JD + '/hello');\r\n                console.log(await res.text()); */\r\n                return;\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 查询来自营销产品库的可兑换产品\r\n     */\r\n    searchSelfPointProduct= async (keyWord: string) => {\r\n        let { currentSalesRegion } = this.cApp;\r\n        this.searchProductsToCreation = new QueryPager<any>(this.uqs.product.SearchPointProduct, 10, 10);\r\n        await this.searchProductsToCreation.first({ keyWord, salesRegion: currentSalesRegion });\r\n    }\r\n\r\n    /**\r\n     * 查询来自JD的产品\r\n     */\r\n    searchPointProductByJD = async (keyWord: string) => {\r\n        let JDImgSize = 'n0/';\r\n        let param = { Keyword: keyWord ,pageIndex: this.pageIndex,sortType:'price_asc' };//sortType:'price_asc' \r\n        let res = await FetchPost(GLOABLE.JD +'/search', JSON.stringify(param));\r\n        let searchArr = [];\r\n        if (res.ok) {\r\n            let result = await res.json();\r\n            let res1 = await FetchPost(GLOABLE.JD + '/getProductSellPrice', JSON.stringify({ sku: result.skuLib }));\r\n            let res2 = await res1.json();\r\n            this.pageIndex = result.pageIndex;\r\n            this.pageCount = result.pageCount; \r\n            for (let key of result.hitResult) {\r\n                if (key.wstate === '1' && key.wyn === '1') {\r\n                    let findPriceBySku = res2.find(v => String(v.skuId) === String(key.wareId));\r\n                    if(findPriceBySku !==undefined)\r\n                        searchArr.push({\r\n                            description:key.wareName,\r\n                            descriptionC:key.wareName,\r\n                            grade: undefined,\r\n                            id: key.wareId,\r\n                            imageUrl: JDImagePath + JDImgSize + key.imageUrl,\r\n                            point: undefined,\r\n                            price: findPriceBySku,\r\n                            isValid: 1\r\n                        })\r\n                }\r\n            }\r\n        }\r\n        this.searchProductsToCreation = searchArr;\r\n    }\r\n\r\n    /**\r\n     * 筛选头部\r\n     */\r\n    renderSearchHeader = (size?: string) => {\r\n        return this.renderView(VProductSearchHeader, size);\r\n    }\r\n\r\n    /**\r\n     * 选择商品\r\n     */\r\n    onProductSelected = async (currentProduct: any, productOrigin?: any) => {\r\n        let { id, sourceId } = currentProduct;\r\n        let productGenre = undefined;\r\n        /* 获取商品完整信息 */\r\n        let getProductCompleteInfo = undefined;\r\n        let getProductDetailByJD = undefined;\r\n        if (productOrigin !== undefined) {\r\n            let isExchangeProduct = await this.getProductSources(currentProduct);\r\n            if (isExchangeProduct !== undefined) {\r\n                getProductCompleteInfo = await this.getPointProductLibLoad(isExchangeProduct.pointProduct.id);\r\n                productGenre = await this.getProductGenre(getProductCompleteInfo);\r\n            }\r\n            if (isExchangeProduct === undefined && this.currentSource.type === \"jd.com\") {\r\n                let resultByJD = await FetchPost(GLOABLE.JD + '/getProductDetail', JSON.stringify({ sku: sourceId,queryExts:'nappintroduction' }));\r\n                if (resultByJD.ok) getProductDetailByJD = await resultByJD.json();\r\n            }\r\n        } else {\r\n            getProductCompleteInfo = await this.getPointProductLibLoad(id);\r\n            productGenre = await this.getProductGenre(currentProduct);\r\n        }\r\n        let { genre, genreShow } = this.goalProductInfo;\r\n        /* genreShow 保持状态或初始化  */\r\n        genreShow = typeof genreShow === 'string' ? genreShow : undefined;\r\n        /* 检测是否新增商品 */\r\n        this.isCreationProduct = getProductCompleteInfo !== undefined ? false : true\r\n        /* 检测是否 上架 or 下架 */\r\n        this.toProductUpShelf = true;/* 显示上架 */\r\n        let fm = 'YYYY-MM-DD HH:mm:ss';\r\n        let FormatEndDate = momentFormat(!this.isCreationProduct ? getProductCompleteInfo.endDate : undefined, fm);\r\n        let FormatnewDate = momentFormat(undefined, fm);\r\n        if (!this.isCreationProduct && FormatnewDate <= FormatEndDate) this.toProductUpShelf = false; /* 显示下架 */\r\n        // if (!this.isCreationProduct && momentFormat() <= getProductCompleteInfo.endDate) this.toProductUpShelf = false; /* 显示下架 */\r\n        /* 商品信息 */\r\n        let result = this.isCreationProduct ? { ...currentProduct } : getProductCompleteInfo;\r\n        if (getProductDetailByJD) {\r\n            result.grade = 1 + getProductDetailByJD.saleUnit;\r\n            result.content = getProductDetailByJD.nappintroduction.replace(/\\\\n/g, '');\r\n            // console.log( result.content );\r\n            // result.content = getProductDetailByJD.param;\r\n        }\r\n        this.goalProductInfo = {\r\n            ...result,\r\n            genreShow: productGenre ? <>{tv(productGenre.genre, (v) => <>{v.name}</>)}</> : undefined, //可为genreShow,也可为undefined\r\n            genre: productGenre ? productGenre.genre : genre,\r\n        };\r\n        this.isSelectedGenre = productGenre !== undefined ? true : (genreShow ? true : false);\r\n        this.openVPage(VProductOperation);\r\n    }\r\n\r\n    /**\r\n     * 商品类型选择\r\n     */\r\n    toGenreSelect = async () => {\r\n        let cGenre = this.newC(CGenre);\r\n        let productGenreSelected = await cGenre.call<any>(true);\r\n        this.goalProductInfo.genreShow = productGenreSelected.name;\r\n        this.goalProductInfo.genre = productGenreSelected;\r\n        this.isSelectedGenre = true;\r\n    }\r\n\r\n    /**\r\n     * 更新图片页\r\n     */\r\n    openVUpdatePicture = async (topic?: any) => {\r\n        this.openVPage(VUpdateProductImage, topic);\r\n    }\r\n\r\n    /**\r\n     * 更新图片\r\n     */\r\n    updatedProductImage = async (imgUrl: any) => {\r\n        this.goalProductInfo.imageUrl = imgUrl;\r\n        this.closePage();\r\n    }\r\n\r\n    /**\r\n     * 获取商品库\r\n     */\r\n    getProductLibrary = async () => {\r\n        this.productLibrary = await this.uqs.积分商城.PointProductLib.all();\r\n    }\r\n\r\n    /**\r\n     * 据商品id 获取对应的商品所有信息\r\n     */\r\n    getPointProductLibLoad = async (id: number) => {\r\n        return await this.uqs.积分商城.PointProductLib.load(id);\r\n    }\r\n\r\n    /*\r\n     * 获取商品帖文\r\n     */\r\n    getPointProductDetailPost = async (pointProduct: any) => {\r\n        let findPostContent = await this.uqs.积分商城.PointProductDetail.obj({ pointProduct });\r\n        return findPostContent !== undefined ? findPostContent.content : undefined;\r\n    }\r\n\r\n    /**\r\n     * 获取商品帖文预览内容(编译后)\r\n     */\r\n    getPointProductDetailPostHtml = async (pointProduct: any) => {\r\n        let result = await window.fetch(GLOABLE.CONTENTSITE + '/partial/pointproductdetail/' + pointProduct.id);\r\n        if (result.ok) {\r\n            let content = await result.text();\r\n            return content;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 保存帖文\r\n     */\r\n    onSavePointProductPost = async (content: any) => {\r\n        this.currentProduct.content = content;\r\n        this.currentProduct.isPosTExist = true;\r\n        /* if (this.postSource === '主列表') {\r\n            for (let key in this.productLibrary) {\r\n                if (this.productLibrary[key].id === this.currentProduct.id) {\r\n                    this.productLibrary[key].isPosTExist = true;\r\n                }\r\n            }\r\n        } else {\r\n            for (let key in this.searchProductLibrary) {\r\n                if (this.searchProductLibrary[key].id === this.currentProduct.id) {\r\n                    this.searchProductLibrary[key].isPosTExist = true;\r\n                }\r\n            }\r\n        } */\r\n        await this.addPointProductDetailPost(this.currentProduct);\r\n        this.closePage();\r\n    }\r\n\r\n    /**\r\n     * 处理列表数据是否有帖文\r\n     */\r\n    isPosTExist = async (pointProduct: any) => {\r\n        let shiftArr = [];\r\n        if (pointProduct.length) {\r\n            for (let key of pointProduct) {\r\n                let as = await this.getPointProductDetailPost(key)\r\n                shiftArr.push({ ...key, isPosTExist: as !== undefined ? true : false });\r\n            }\r\n        }\r\n        return shiftArr;\r\n    }\r\n\r\n    /**\r\n     * 添加商品帖文\r\n     */\r\n    addPointProductDetailPost = async (pointProduct: any) => {\r\n        let { content } = pointProduct;\r\n        await this.uqs.积分商城.PointProductDetail.add({ pointProduct, content });\r\n    }\r\n\r\n    /**\r\n     * 删除商品帖文(存在问题，弃用)\r\n     */\r\n    delPointProductDetailPost = async (pointProduct: any) => {\r\n        await this.uqs.积分商城.PointProductDetail.del({ arr1: [{ pointProduct: pointProduct.id }] });\r\n    }\r\n\r\n    /**\r\n     * 商品操作执行\r\n     */\r\n    saveOperation = async (param: any) => {\r\n        let { EDIT, UPSHELF, DOWNSHELF, REUPSHELF } = OperationAdapt;\r\n        let { data, state } = param;\r\n        let productInfo = { ...this.goalProductInfo, ...data };\r\n        this.isSelectedGenre = false;\r\n        switch (state) {\r\n            case EDIT.type:\r\n                await this.editProduct(productInfo);\r\n                return EDIT.name;\r\n            case UPSHELF.type:\r\n                await this.upShelfProduct(productInfo);\r\n                return UPSHELF.name;\r\n            case REUPSHELF.type:\r\n                await this.reUpShelfProduct(productInfo);\r\n                return REUPSHELF.name;\r\n            case DOWNSHELF.type:\r\n                await this.downShelfProduct(productInfo);\r\n                return DOWNSHELF.name;\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 修改商品\r\n     */\r\n    editProduct = async (productInfo: any) => {\r\n        let { point, imageUrl, startDate, endDate, id } = productInfo;\r\n        let pointProductFind = await this.getPointProductLibLoad(id);\r\n        let { point: pfPoint, imageUrl: pfImageUrl, startDate: pfStartDate, endDate: pfEndDate } = pointProductFind;\r\n        await this.dealWithProductGenre(productInfo);\r\n        /* 商品信息  积分、图片、上下架日期 任意不同去更新  */\r\n        pfStartDate = momentFormat(pfStartDate);\r\n        pfEndDate = momentFormat(pfEndDate);\r\n        let isToupdateProduct = pfPoint !== point || pfImageUrl !== imageUrl || pfStartDate !== startDate || pfEndDate !== endDate;\r\n        if (isToupdateProduct)\r\n            await this.savePointProduct(productInfo);\r\n    }\r\n\r\n    /**\r\n     * 处理商品类型(公共代码)\r\n     */\r\n    dealWithProductGenre = async (productInfo: any) => {\r\n        let { genre } = productInfo;\r\n        if (genre !== undefined) {\r\n            /* 商品类型  不存在 增类型 存在且不同 先删再增 */\r\n            let productGenreFind = await this.getProductGenre(productInfo);\r\n            await this.addProductGenre(productInfo);\r\n            if (productGenreFind !== undefined && genre.id !== productGenreFind.genre.id)\r\n                await this.delProductGenre(productGenreFind);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 重新上架\r\n     */\r\n    reUpShelfProduct = async (productInfo: any) => {\r\n        await this.dealWithProductGenre(productInfo);\r\n        await this.savePointProduct(productInfo);\r\n    }\r\n\r\n    /**\r\n     * 商品上架  (纯粹的上架,上架前所有的商品皆无类型)\r\n     */\r\n    upShelfProduct = async (productInfo: any) => {\r\n        productInfo.id = undefined;\r\n        await this.savePointProduct(productInfo);\r\n        let isExchangeProduct: any[] = await this.searchByKey(productInfo.descriptionC.slice(0, 40));\r\n        let res;\r\n        for (let key of isExchangeProduct) {\r\n            if (key.descriptionC === productInfo.descriptionC)\r\n                res = await this.getPointProductLibLoad(key.id);\r\n        }\r\n        productInfo.id = res.id;\r\n        if (productInfo.genre !== undefined) await this.addProductGenre(productInfo);\r\n        /* 新增商品添加数据源 */\r\n        let resSource = await this.getProductSources(productInfo);\r\n        if (resSource === undefined)\r\n            await this.addPointProductSource(productInfo);\r\n        if (this.currentSource.type === \"jd.com\") \r\n            await this.addPointProductDetailPost(productInfo)\r\n    }\r\n\r\n    /**\r\n     * 商品下架\r\n     */\r\n    downShelfProduct = async (productInfo: any) => {\r\n        productInfo.endDate = momentFormat();\r\n        await this.savePointProduct(productInfo);\r\n    }\r\n\r\n    /**\r\n     * 修改可兑换商品信息\r\n     */\r\n    savePointProduct = async (productInfo: any) => {\r\n        let { id, description, descriptionC, grade, point, startDate, endDate, imageUrl, isValid } = productInfo;\r\n        await this.uqs.积分商城.PointProductLib.save(id, { description, descriptionC, grade, point, startDate, endDate, imageUrl, isValid: 1 });\r\n    }\r\n\r\n    /**\r\n     * 获取商品源\r\n     */\r\n    getProductSources = async (pointProduct: any) => {\r\n        let type = this.currentSource.type === \"selfsales\" ? 'self' : this.currentSource.type;\r\n        return await this.uqs.积分商城.GetPointProductBySource.obj({ sourceId: pointProduct.sourceId, type });\r\n    }\r\n\r\n    /**\r\n     * 添加商品的商品源\r\n     */\r\n    addPointProductSource = async (pointProduct: any) => {\r\n        let { type } = this.currentSource;\r\n        let { sourceId } = pointProduct;\r\n        type = type === 'selfsales' ? 'self' : type;\r\n        await this.uqs.积分商城.PointProductSource.add({ pointProduct, arr1: [{ sourceId, type }] })\r\n    }\r\n\r\n\r\n    /**\r\n     * 获取指定分类所属的商品\r\n     */\r\n    getProductsFromGenre = async (genre: any) => {\r\n        return await this.uqs.积分商城.PointProductGenre.table({ genre, pointproduct: undefined });\r\n    }\r\n\r\n    /**\r\n     * 据类型筛选商品\r\n     */\r\n    filterByProductGenre = async (currentGenre: any) => {\r\n        let pointProductFromGenre = await this.getProductsFromGenre(currentGenre);\r\n        let filterPointProducts = [];\r\n        if (pointProductFromGenre.length) {\r\n            for (let key of pointProductFromGenre) {\r\n                let searchpointProductByKey = await this.getPointProductLibLoad(key.pointProduct.id);\r\n                /* let as = await this.getPointProductDetailPost(key.pointProduct.id);\r\n                if (searchpointProductByKey !== undefined)\r\n                    filterPointProducts.push({ ...searchpointProductByKey, isPosTExist: as !== undefined ? true : false }); */\r\n                if (searchpointProductByKey !== undefined)\r\n                    filterPointProducts.push(searchpointProductByKey);\r\n            }\r\n        }\r\n        filterPointProducts.sort((a, b) => a.point - b.point);\r\n        this.productLibrary = filterPointProducts;\r\n    }\r\n\r\n    /**\r\n     * 添加可兑换商品及类型\r\n     */\r\n    addProductGenre = async (productInfo: any) => {\r\n        let { genre, id } = productInfo;\r\n        await this.uqs.积分商城.PointProductGenre.add({ genre: genre.id, arr1: [{ pointProduct: id }] });\r\n    }\r\n\r\n    /**\r\n     * 删除指定可兑换商品的类型\r\n     */\r\n    delProductGenre = async (productInfo: any) => {\r\n        let { genre, pointProduct } = productInfo;\r\n        await this.uqs.积分商城.PointProductGenre.del({ genre: genre.id, arr1: [{ pointProduct: pointProduct.id }] });\r\n    }\r\n\r\n    /**\r\n     * 获取指定可兑换商品的类型\r\n     */\r\n    getProductGenre = async (productInfo: any) => {\r\n        let { id } = productInfo;\r\n        return await this.uqs.积分商城.GetPointProductGenre.obj({ pointProduct: id })\r\n    }\r\n\r\n}\r\n","import React from 'react';\r\nimport { VPage, tv, Page, List, FA } from 'tonva';\r\nimport { CPointProduct } from './CPointProduct';\r\nimport { PointProductImage } from 'tools/productImage';\r\nimport { observer } from 'mobx-react';\r\nimport { searchKeyShow } from 'lordScreen/VSearchHeader';\r\nimport classNames from 'classnames';\r\nimport { observable } from 'mobx';\r\n\r\nexport class VPointProduct extends VPage<CPointProduct>{\r\n    private filterGenre: string;\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    render(param?: any): JSX.Element {\r\n        return <this.page />\r\n    }\r\n\r\n    private toUpDatePointProduct = async (currentPointProduct: any) => {\r\n        let { cApp } = this.controller;\r\n        let { cProduct } = cApp;\r\n        cProduct.toProductUpShelf = false;\r\n        await cProduct.onProductSelected(currentPointProduct);\r\n    }\r\n\r\n    private renderPointGenre = (pointProductGenre: any) => {\r\n        let { name } = pointProductGenre;\r\n        return <button className=\"btn btn-primary w-100 px-2\"><small>{name}</small></button>\r\n    }\r\n\r\n    renderPointProduct = (pointProduct: any) => {\r\n        let { product, pack, point, imageUrl } = pointProduct;\r\n        return <>\r\n            {tv(product, (v) => {\r\n                return <div className=\"row m-1 w-100\">\r\n                    <div title={v.description} className=\"col-4 m-0 p-0\"><PointProductImage chemicalId={imageUrl} className=\"w-100\" /></div>\r\n                    {tv(pack, (c) => {\r\n                        return <div className=\"col-8 small\">\r\n                            <div>{v.descriptionC}</div>\r\n                            <div className=\"my-2\">{c.radioy}{c.unit}</div>\r\n                            <div className=\"row m-0 p-0\">\r\n                                <div className=\"col-5 m-0 p-0\">\r\n                                    <span className=\"text-danger h5\">{point}</span>\r\n                                    <small>分</small>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    })}\r\n                </div>\r\n            })}\r\n        </>\r\n    }\r\n\r\n    /* ---------------------布局要更换-------------------- */\r\n    renderPointProduct1 = (pointProduct: any) => {\r\n        let { description, descriptionC, point, imageUrl } = pointProduct;\r\n        return <div className=\"row m-1 w-100\">\r\n            <div title={description} className=\"col-4 m-0 p-0\"><PointProductImage chemicalId={imageUrl} className=\"w-100\" /></div>\r\n            <div className=\"col-8 small\">\r\n                <div>{descriptionC}</div>\r\n                {/* <div className=\"my-2\">{c.radioy}{c.unit}</div> */}\r\n                <div className=\"row m-0 p-0\">\r\n                    <div className=\"col-5 m-0 p-0\">\r\n                        <span className=\"text-danger h5\">{point}</span>\r\n                        <small>分</small>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    /**\r\n     * 恢复所有数据\r\n     */\r\n    refreshPointProduct = async () => {\r\n        let { getPointProductLibrary } = this.controller;\r\n        this.filterGenre = undefined;\r\n        await getPointProductLibrary();\r\n    }\r\n    private renderGenreItem = (item: any) => {\r\n        let { name, imageUrl } = item;\r\n        return <div>\r\n            <label className=\"w-100 d-flex flex-column justify-content-center\">\r\n                {\r\n                    imageUrl\r\n                        ? <div className=\"m-auto\" style={{ width: '30%' }}><PointProductImage chemicalId={imageUrl ? imageUrl : ':0-0268.png'} className=\"w-100\" /></div>\r\n                        : <FA name=\"leaf\" className='mt-2 text-success mb-2' size='lg' />\r\n                }\r\n                <div className='text-dark small'>{name}</div>\r\n            </label>\r\n        </div>\r\n    }\r\n\r\n    page = observer(() => {\r\n        let { pointProducts, renderSearchHeader, cApp, filterByProductGenre } = this.controller;\r\n        let { cGenre } = cApp;\r\n        let header = <div className=\"w-100 px-2 d-flex justify-content-between \"><span className=\"w-75 m-auto\">{renderSearchHeader()}</span></div>\r\n        let none = <div className=\"d-flex justify-content-center text-secondary small mt-5\">暂无可兑换商品</div>;\r\n        let genreNone = <div className=\"py-1 pl-2 small text-secondary\">暂无商品类型,请去新增类型 &rArr; 我的 &raquo;&raquo; 商品类型</div>\r\n        return <Page header={header} back='none'>\r\n            <>\r\n                <div className=\"border-bottom\">\r\n                    <div className=\"w-24c mt-1 mx-3 d-flex justify-content-between\">\r\n                        <small>商品类型：{this.filterGenre}</small>\r\n                        <span className={classNames(!this.filterGenre && 'd-none')} onClick={this.refreshPointProduct}>\r\n                            <FA name=\"times-circle-o\" className=\"text-danger\" />\r\n                        </span>\r\n                    </div>\r\n                    <List className=\"d-flex flex-wrap py-2 text-center bg-transparent\"\r\n                        items={cGenre.productGenres}\r\n                        item={{\r\n                            render: this.renderGenreItem,\r\n                            onClick: (genre) => { filterByProductGenre(genre); this.filterGenre = genre.name; },\r\n                            className: 'w-25 bg-transparent'\r\n                        }} none={genreNone} />\r\n                </div>\r\n            </>\r\n            <List items={pointProducts} item={{ render: (v: any) => { if (v.product) { return this.renderPointProduct(v) } else { return this.renderPointProduct1(v) } } }} none={none} />\r\n        </Page>\r\n    })\r\n}\r\n\r\n\r\n/**\r\n * 搜索积分商品页面\r\n */\r\nexport class VSearchPointProduct extends VPointProduct {\r\n    @observable searchKey: string;\r\n    @observable searchPointProduct: any[] = []; /* 搜索的积分商品列表 */\r\n    async open(param?: any) {\r\n        let { searchKey, searchPointProduct } = param;\r\n        this.searchKey = searchKey;\r\n        this.searchPointProduct = searchPointProduct;\r\n        this.openPage(this.page);\r\n    }\r\n    refreshPointProduct = async () => {\r\n        let { pointProducts } = this.controller;\r\n        this.searchKey = undefined;\r\n        this.searchPointProduct = pointProducts;\r\n    }\r\n    page = observer(() => {\r\n        let { renderSearchHeader } = this.controller;\r\n        let header = <div className=\"w-100 px-2\">{renderSearchHeader()}</div>\r\n        let none = <div className=\"d-flex justify-content-center text-secondary small mt-5\">暂无可兑换商品</div>;\r\n        return <Page header={header}>\r\n            <>\r\n                {this.searchKey && searchKeyShow(this.searchKey, this.refreshPointProduct)}\r\n            </>\r\n            <List items={this.searchPointProduct} item={{ render: this.renderPointProduct }} none={none} />\r\n        </Page>\r\n    })\r\n}","import { CUqBase } from 'CBase';\r\nimport { observable } from 'mobx';\r\nimport { VPointProduct, VSearchPointProduct } from './VPointProduct';\r\nimport { VPointProductSearchHeader } from 'lordScreen/VSearchHeader';\r\n\r\nexport class CPointProduct extends CUqBase {\r\n    @observable pointProducts: any[] = [];    /* 可兑换商品 */\r\n    protected async internalStart(param?: any) {\r\n        await this.getPointProductLibrary();\r\n        let searchPointProduct = await this.searchPointProduct(param);\r\n        this.closePage();\r\n        this.openVPage(VSearchPointProduct, { searchKey: param, searchPointProduct });\r\n    }\r\n\r\n    /**\r\n     * 积分商城\r\n     */\r\n    openPointProduct = async () => {\r\n        let { cProduct } = this.cApp;\r\n        cProduct.goalProductInfo.genreShow = undefined;\r\n        await this.getPointProductLibrary();\r\n        this.openVPage(VPointProduct);\r\n    }\r\n\r\n    /**\r\n     * 筛选头部\r\n     */\r\n    renderSearchHeader = (size?: string) => {\r\n        return this.renderView(VPointProductSearchHeader, size);\r\n    }\r\n\r\n    /**\r\n     * 据类型筛选商品\r\n     */\r\n    filterByProductGenre = async (currentGenre: any) => {\r\n        let { cProduct } = this.cApp;\r\n        let pointProductFromGenre = await this.getProductsFromGenre(currentGenre);\r\n        let filterPointProducts = [];\r\n        if (pointProductFromGenre.length) {\r\n            for (let key of pointProductFromGenre) {\r\n                let searchpointProductByKey = await cProduct.getPointProductLibLoad(key.product.id)\r\n                filterPointProducts.push(searchpointProductByKey);\r\n            }\r\n        }\r\n        this.pointProducts = filterPointProducts;\r\n    }\r\n\r\n    /**\r\n     * 获取指定分类所属的商品\r\n     */\r\n    getProductsFromGenre = async (genre: any) => {\r\n        return await this.uqs.积分商城.PointProductGenre.table({ genre, pointproduct: undefined });\r\n    }\r\n\r\n    /**\r\n     * 获取可兑换的商品\r\n     */\r\n    getPointProductLibrary = async () => {\r\n        this.pointProducts = await this.uqs.积分商城.GetPointProduct.table({ startPoint: 0, endPoint: 50000 });\r\n    }\r\n\r\n    /**\r\n     * 搜索可兑换商品      ----------------------需更改 现为id搜索 需品名、积分等条件符合\r\n     */\r\n    searchPointProduct = async (product: string) => {\r\n        return await this.uqs.积分商城.PointProduct.table({ product });\r\n    }\r\n\r\n    /**\r\n     * 获取指定可兑换商品的类型\r\n     */\r\n    getProductGenre = async (productInfo: any) => {\r\n        let { id } = productInfo;\r\n        // return await this.uqs.积分商城.PointProductGenre.obj({ product, pack });\r\n        return await this.uqs.积分商城.GetPointProductGenre.obj({ pointProduct: id })\r\n    }\r\n\r\n    /**\r\n     * 添加可兑换商品及类型\r\n     */\r\n    addProductGenre = async (productInfo: any) => {\r\n        let { genre, id } = productInfo;\r\n        await this.uqs.积分商城.PointProductGenre.add({ genre: genre.id, arr1: [{ pointProduct: id }] });\r\n        // await this.uqs.积分商城.PointProductGenre.add({ genre, product, arr1: [{ pack }] });\r\n    }\r\n\r\n    /**\r\n     * 添加可兑换商品\r\n     */\r\n    addPointProduct = async (productInfo: any) => {\r\n        let { product, pack, point, startDate, endDate, imageUrl } = productInfo;\r\n        await this.uqs.积分商城.PointProduct.add({ product, arr1: [{ pack, point, startDate, endDate, imageUrl }] });\r\n    }\r\n\r\n    /**\r\n     * 删除指定可兑换商品的类型\r\n     */\r\n    delProductGenre = async (productInfo: any) => {\r\n        let { genre, pointProduct, } = productInfo;\r\n        await this.uqs.积分商城.PointProductGenre.del({ genre: genre.id, arr1: [{ pointProduct: pointProduct.id }] });\r\n        // await this.uqs.积分商城.PointProductGenre.del({ genre, product, arr1: [{ pack }] });\r\n    }\r\n\r\n    /**\r\n     * 删除指定可兑换商品\r\n     */\r\n    delPointProduct = async (productInfo: any) => {\r\n        let { product, pack } = productInfo;\r\n        await this.uqs.积分商城.PointProduct.del({ product, arr1: [{ pack }] });\r\n    }\r\n\r\n    tab = () => {\r\n        let { cGenre } = this.cApp;\r\n        cGenre.getProductGenres();\r\n        this.getPointProductLibrary();\r\n        return this.renderView(VPointProduct);\r\n    }\r\n\r\n}\r\n\r\n","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, List, tv, Scroller } from 'tonva';\r\nimport { CReport } from './CReport';\r\nimport { noProductNone } from 'product/VProduct';\r\nimport { PointProductImage } from 'tools/productImage';\r\nimport { observable } from 'mobx';\r\n// import { searchKeyShow } from 'lordScreen/VSearchHeader';\r\n\r\nexport class VProductViews extends VPage<CReport> {\r\n    @observable searchKey: string;\r\n    async open(param?: any) {\r\n        this.searchKey = param;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    protected renderPointProduct = (pointProduct: any) => {\r\n        let { imageUrl, point, visits, id, exchanges } = pointProduct;\r\n        return <>\r\n            {tv(id, (v) => {\r\n                return <div className=\"row m-1 w-100\">\r\n                    <div title={v.description} className=\"col-4 m-auto p-0\"><PointProductImage chemicalId={imageUrl} className=\"w-100\" /></div>\r\n                    <div className=\"col-8 small py-1 d-flex flex-column justify-content-between\">\r\n                        <div>{v.descriptionC}</div>\r\n                        <div className=\"mt-2 mb-1\">{v.grade}</div>\r\n                        <div className=\"row m-0 p-0\">\r\n                            <div className=\"col-5 m-0 p-0\">\r\n                                <span className=\"text-danger h5\">{point}</span><small>分</small>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"d-flex justify-content-end align-items-end\">\r\n                            <div className=\"mr-3\">兑换量:<span className=\"h6 m-0 text-primary\">{exchanges ? exchanges : 0}</span></div>\r\n                            <div>浏览量:<span className=\"h6 m-0 text-primary\">{visits ? visits : 0}</span></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            })}\r\n        </>\r\n    }\r\n\r\n    /**\r\n     * 恢复所有数据\r\n     */\r\n    refreshProduct = async () => {\r\n        let { getBrowsedProductLib } = this.controller;\r\n        this.searchKey = undefined;\r\n        await getBrowsedProductLib();\r\n    }\r\n\r\n    private onScrollBottom = async (scroller: Scroller) => {\r\n        scroller.scrollToBottom();\r\n        let { browsedProductLib } = this.controller;\r\n        browsedProductLib.more();\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { browsedProductLib } = this.controller;\r\n        let header = <div className=\"w-100 pr-2 d-flex justify-content-between\">\r\n            <span className=\"align-self-center\">浏览量PV</span>\r\n            {/* <div className=\"w-50\">{renderSearchHeader()}</div> */}\r\n        </div>\r\n\r\n        return <Page header={header} onScrollBottom={this.onScrollBottom}>\r\n            {/* {searchKeyShow(this.searchKey, this.refreshProduct)} */}\r\n            <List items={browsedProductLib} item={{ render: this.renderPointProduct }} none={noProductNone} />\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page, Form, Schema, UiSchema, UiSelect, Context } from 'tonva';\r\nimport { CReport } from './CReport';\r\nimport { Chart, Slider, LineAdvance } from 'bizcharts';\r\n\r\nconst schema: Schema = [\r\n    { name: 'pointRange', type: 'string', required: true },\r\n];\r\n\r\nexport const PointRangeLibForm: any[] = [\r\n    { value: '0-10万', title: '0-10万' },\r\n    { value: '20万-30万', title: '20万-30万' },\r\n    { value: '30万-40万', title: '30万-40万' },\r\n    { value: '40万-50万', title: '40万-50万' },\r\n    { value: '50万-100万', title: '50万-100万' },\r\n    { value: '100万-1000万', title: '100万-1000万' },\r\n    { value: '1000万-2000万', title: '1000万以上' },\r\n]\r\n\r\nexport class VPointsDist extends VPage<CReport> {\r\n    private form: Form;\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            pointRange: { widget: 'select', label: '积分范围', list: this.controller.maxPointRangeLib } as UiSelect,\r\n            // pointRange: { widget: 'select', label: '积分范围', list: PointRangeLibForm } as UiSelect,\r\n            submit: { widget: 'button', label: '提交' },\r\n        }\r\n    }\r\n\r\n    private onSaveInquire = async () => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        let { queryPointDistribution } = this.controller;\r\n        await queryPointDistribution(context.form.data);\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { pointRangeLib, pointRange } = this.controller;\r\n        /* let footer = <div className=\"w-100 d-flex justify-content-center\">\r\n            <button onClick={() => { this.onSaveInquire() }} className=\"btn btn-primary w-50\">查询</button>\r\n        </div> */\r\n\r\n        return <Page header=\"积分分布\" >{/* footer={footer} */}\r\n            <div className=\"container text-left mt-1 border-bottom d-flex w-100 justify-content-between\">\r\n                <div className=\"w-75\">\r\n                    <Form ref={v => this.form = v}\r\n                        schema={schema}\r\n                        uiSchema={this.uiSchema}\r\n                        formData={{ pointRange }}\r\n                        onButtonClick={this.onFormButtonClick}\r\n                        fieldLabelSize={3} />\r\n                </div>\r\n                <div className=\"align-self-center\"><button onClick={() => { this.onSaveInquire() }} className=\"btn btn-primary\">查询</button></div>\r\n            </div>\r\n            {/* <Chart height={200} autoFit data={pointRangeLib} interactions={['active-region']} padding={[20, 40, 70, 30]} >\r\n                <Point position=\"pointRange*QTYP\" />\r\n                <Tooltip shared />\r\n            </Chart> */}\r\n            {/* 图表 */}\r\n            <Chart\r\n                padding=\"auto\"\r\n                appendPadding={[10, 5, 0, 5]}\r\n                autoFit\r\n                animate\r\n                height={300}\r\n                data={pointRangeLib}\r\n                scale={{ value: { min: 1 } }}\r\n            >\r\n                {/* <Line position=\"pointRange*QTYP\" /> */}\r\n                <LineAdvance\r\n                    shape=\"smooth\"\r\n                    point\r\n                    area\r\n                    position=\"pointRange*QTYP\"\r\n                    color=\"rgb(95,147,249)\"\r\n                />\r\n                {/* <Point position=\"pointRange*QTYP\" adjust=\"stack\" shape='hollow-hexagon' /> */}\r\n                <Slider\r\n                    start={0}\r\n                    end={1}\r\n                    textStyle={{ fontWeight: 'bold' }}\r\n                    formatter={(v, d, i) => v}\r\n                />\r\n            </Chart>\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { VPage, Page } from 'tonva';\r\nimport { CReport } from './CReport';\r\n\r\nexport class VPointProductVisitRecord extends VPage<CReport> {\r\n\r\n    async open(param?: any) {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private page = observer(() => {\r\n        return <Page header='访问记录'>\r\n            VPointProductVisitRecord\r\n        </Page>\r\n    })\r\n}","import { CUqBase } from 'CBase';\r\nimport { VProductViews } from './VProductViews';\r\nimport { VPointsDist } from './VPointsDist';\r\nimport { observable } from 'mobx';\r\nimport { VBrowseProductSearchHeader } from 'lordScreen/VSearchHeader';\r\nimport { VPointProductVisitRecord } from './VPointProductVisitRecord';\r\nimport { QueryPager } from 'tonva';\r\n\r\nconst numLimit = [100, 1000, 10000, 100000, 1000000, 10000000];\r\nconst changeConditionObj = {\r\n    million: { limit: 100000000, text: '亿', fillIn: 8 },\r\n    thousand: { limit: 10000, text: '万', fillIn: 4 },\r\n}\r\n\r\nexport class CReport extends CUqBase {\r\n    @observable browsedProductLib: QueryPager<any>;         /* 已浏览的商品列表 */\r\n    @observable pointProductVisitRecord: any;          /* 商品访问记录 */\r\n\r\n\r\n    @observable pointRangeLib: any[] = [];             /* 积分范围及人数匹配列表 */\r\n    @observable pointRange: string;                    /* 选择的积分范围 */\r\n    @observable maxPointRange: string;                 /* 最大的界限 */\r\n    @observable maxPoint: any;                         /* 最大的客户积分 */\r\n    @observable maxPointRangeLib: any[] = [];          /* 最高值适配数据列表 */\r\n    private maxPointValue: string = '1.1亿';           /* 最大积分数值(数据最终可查值) */\r\n\r\n    async internalStart(param?: any) {\r\n        /* //查询用例,暂不开发\r\n        await this.searchKeyBrowseProduct(param);\r\n        this.closePage();\r\n        this.openVPage(VProductViews, param); */\r\n    }\r\n\r\n    /**\r\n     * 商品浏览量页面\r\n     */\r\n    openProductViews = async () => {\r\n        await this.getBrowsedProductLib();\r\n        this.openVPage(VProductViews);\r\n    }\r\n\r\n    /**\r\n     * 商品访问记录页面\r\n     */\r\n    openPointProductVisitRecord = async (pointProduct: any) => {\r\n        await this.getPointProductVisitRecord(pointProduct);\r\n        this.openVPage(VPointProductVisitRecord);\r\n    }\r\n\r\n    /**\r\n     * 积分分布页面\r\n     */\r\n    openPointsDist = async () => {\r\n        await this.getMaxPoint();\r\n        this.maxPointAdaptive();\r\n        this.pointRange = this.maxPointRangeLib[0].value;\r\n        // this.pointRange = PointRangeLibForm[0].value;\r\n        // \r\n        await this.customerPointsDistributionMap();\r\n        this.openVPage(VPointsDist);\r\n    }\r\n\r\n    /**\r\n     * 筛选头部\r\n     */\r\n    renderSearchHeader = (size?: string) => {\r\n        return this.renderView(VBrowseProductSearchHeader, size);\r\n    }\r\n\r\n    /**\r\n     * 搜索产品 查看浏览量\r\n     */\r\n    searchKeyBrowseProduct = async (key: any) => {\r\n        // await this.uqs.\r\n        // this.browsedProductLib = [1];\r\n    }\r\n\r\n    /**\r\n     * 获取已浏览的商品列表 \r\n     */\r\n    getBrowsedProductLib = async () => {//QueryPager<any>;\r\n        // this.browsedProductLib = await this.uqs.积分商城.GetHotPointProducts.table({});\r\n        this.browsedProductLib = new QueryPager(this.uqs.积分商城.GetVisitPointProducts, 15, 30);\r\n        this.browsedProductLib.first({});\r\n    }\r\n\r\n    /**\r\n     * 获取商品访问记录\r\n     */\r\n    getPointProductVisitRecord = async (pointProduct: any) => {\r\n        // this.pointProductVisitRecord=await this.cApp.uqs.积分商城.\r\n    }\r\n\r\n    /**\r\n     * 获取最大的客户积分\r\n     */\r\n    private getMaxPoint = async () => {\r\n        let result = await this.uqs.积分商城.GetMaxPoints.obj({});\r\n        this.maxPoint = result !== undefined ? result.maxPoints : 10000\r\n        // this.maxPoint = 260000;\r\n    }\r\n\r\n    /**\r\n     * 最高值及其适配数据\r\n     */\r\n    private maxPointAdaptive = () => {\r\n        let limit = 10000, shiftArr = [], shifVal;\r\n        let TALLEST = { AT: 1000, BT: 10000, MT: 100000000, TT: '万', MTT: '亿', MUL: 1.5 };\r\n        let { AT, BT, MT, TT, MTT, MUL } = TALLEST;\r\n\r\n        /* 赋值addVal(数值间隔) */\r\n        let numInterVal = [//维护更改==> 首部添加 或变更规则\r\n            { max: 100000000, val: 50000000 }, { max: 50000000, val: 10000000 },\r\n            { max: 10000000, val: 5000000 }, { max: 5000000, val: 1000000 },\r\n            { max: 1000000, val: 500000 }, { max: 500000, val: 100000 },\r\n            { max: 100000, val: 50000 }, { max: 10000, val: 10000 },\r\n        ];\r\n        /* let numInterVal1 = [{ max: BT, val: BT }], InBase = 8; // numInterVal1 是 numInterVal 的改写,维护更改==>InBase,或变更规则\r\n        let arr = Array.from(Array(InBase - 1), (v, k) => k);//numInterVal1的 length 为 InBase,进行数值限制\r\n        for (let i of arr)\r\n            numInterVal1.push({ max: numInterVal1[i].val * 10, val: numInterVal1[i].max * (i === 0 ? 5 : 1) });\r\n        numInterVal1.reverse(); */\r\n\r\n        let findVal = numInterVal.find(e => this.maxPoint > e.max);\r\n        let addVal = findVal !== undefined ? findVal.val : AT;\r\n\r\n        if (this.maxPoint >= AT) {\r\n            /* 适配数据 */\r\n            for (let i = 0; i <= this.maxPoint; i += addVal) {\r\n                let firstValue = i - addVal;\r\n                if (firstValue >= 0) {\r\n                    if (this.maxPoint <= BT) /* 最高积分在10000及以下 */\r\n                        shifVal = `${firstValue}-${i === BT ? i / BT + TT : i}`;\r\n                    else {\r\n                        if (firstValue >= MT) { TT = MTT; limit = MT };\r\n                        let startValue = `${firstValue / limit}${firstValue !== 0 ? TT : ''}`;\r\n                        if (i >= MT) { TT = MTT; limit = MT };\r\n                        shifVal = `${startValue}-${i / limit + TT}`;\r\n                    }\r\n                    shiftArr.push({ value: shifVal, title: shifVal });\r\n                    if (i === MT) break;\r\n                }\r\n            }\r\n\r\n            /* 特殊数值(最大客户积分为特殊值时,无需匹配其以上值) */\r\n            let specialValObj = {}; /* 特殊数值区间对象 */\r\n            for (let i = 0; i <= MT * MUL; i += addVal) { /* MT * 1.5 最高限,现为1.5亿,若后期超出1.5亿,维护更改==>MUL */\r\n                if (i !== 0) specialValObj[i] = i;\r\n                if (i >= this.maxPoint) break;\r\n            }\r\n\r\n            /* 适配除特殊值外的多余的数据,配其以上值 */\r\n            if (!(this.maxPoint in specialValObj)) {\r\n                let finalValue = shiftArr[shiftArr.length - 1].value.split('-')[1];\r\n                // shifVal = finalValue + '以上';\r\n                // shiftArr.push({ value: shifVal, title: shifVal });\r\n                if (finalValue === '1亿') this.maxPointRange = this.maxPointValue;\r\n                else {\r\n                    let result = this.changeTextUnits(finalValue, 'toNum');\r\n                    this.maxPointRange = this.changeTextUnits((+result) + addVal, 'toText');\r\n                    // this.maxPointRange = this.changeTextUnits((+result[0] + 1) + result.slice(1), 'toText');\r\n                }\r\n                shiftArr.push({ value: `${finalValue}-${this.maxPointRange}`, title: `${finalValue}以上` });/* 指定value 不需处理 */\r\n            }\r\n        } else\r\n            shiftArr.push({ value: `0-${AT}`, title: `0-${AT}` });\r\n        this.maxPointRangeLib = shiftArr;\r\n        // console.log(shiftArr);\r\n    }\r\n\r\n    /**\r\n     * 查询积分分布\r\n     */\r\n    queryPointDistribution = async (QPointRange: any) => {\r\n        let { pointRange } = QPointRange;\r\n        this.pointRange = pointRange;\r\n        await this.customerPointsDistributionMap();\r\n    }\r\n\r\n    /**\r\n     * 积分范围及人数匹配列表\r\n     */\r\n    private customerPointsDistributionMap = async () => {\r\n        let distributionArr = this.pointRange.split('-');\r\n        // let distributionArr = this.processPointRange();/* 处理时value可直接写死值,可不需要此处理 */\r\n        let start = Number(this.changeTextUnits(distributionArr[0], 'toNum'));\r\n        let end = Number(this.changeTextUnits(distributionArr[1], 'toNum'));\r\n        let cardinalBase = end - start <= 10000 || start === 100000000 ? 10 : 100;/* 基数 */\r\n        let interVal = (end - start) / cardinalBase;\r\n        let granularity = numLimit.find(v => interVal <= v);    /* 数值区间 */\r\n        let shiftArr = [];\r\n        /* 生成相应区间的客户人数数据 */  //可在外部调用一次请求,获取数据数组,在循环内获取对应的数据\r\n        let getDists: any[] = await this.getUsersDistOfPointInterval({ start, end, granularity });\r\n        for (let key of getDists) {\r\n            let pointRange = `${this.changeTextUnits(key.subStart, 'toText')}-${this.changeTextUnits(key.subEnd, 'toText')}`;\r\n            shiftArr.push({ pointRange, QTYP: key.numbers });\r\n        }\r\n        this.pointRangeLib = shiftArr;\r\n        /* for (let i = start; i <= end; i += granularity) {\r\n            if (i !== start) {\r\n                let pointRange = `${this.changeTextUnits(i - granularity, 'toText')}-${this.changeTextUnits(i, 'toText')}`;\r\n                let param = { startPoint: i - granularity, endPoint: i };\r\n                // let QTYP = await this.getUsersDistOfPointInterval(param);\r\n                shiftArr.push({ pointRange, QTYP: 50 });\r\n            }\r\n        }\r\n        this.pointRangeLib = shiftArr; */\r\n        // console.log(shiftArr);\r\n    }\r\n\r\n    /**\r\n     * 获取指定积分区间的客户分布数\r\n     */\r\n    getUsersDistOfPointInterval = async (pointRange: any) => {\r\n        let { start, end, granularity } = pointRange;\r\n        return this.uqs.积分商城.GetPointDistribution.table({ start, end, granularity })\r\n        // return Math.floor(Math.random() * 200);\r\n    }\r\n\r\n    /**\r\n     * 处理积分范围\r\n     */\r\n    private processPointRange = () => {\r\n        let distributionArr = this.pointRange.replace(/以(上|下)/g, '').split('-');\r\n        if (this.pointRange.endsWith('以下')) distributionArr.unshift('0');\r\n        if (this.pointRange.endsWith('以上')) distributionArr.push(this.maxPointRange); //1亿\r\n        return distributionArr;\r\n    }\r\n\r\n    /**\r\n     * 文字单位的转换 (数字与文字的转换)\r\n     */\r\n    private changeTextUnits = (key: any, changeDesc?: string) => {\r\n        let obj = changeConditionObj;\r\n        for (let i in obj) {\r\n            let { limit, text, fillIn } = obj[i];\r\n            if (changeDesc === 'toNum' && key.endsWith(text))\r\n                return key.replace(/\\.*/g, '').replace(text, '0'.repeat(key.includes('.') ? fillIn - 1 : fillIn));\r\n            if (changeDesc === 'toText' && key >= limit)\r\n                return `${key / limit}${text}`;\r\n        }\r\n        return key;\r\n    }\r\n}\r\n","export const consts = {\r\n\r\n    uqPromotion: '百灵威系统工程部/promotion',\r\n    uqWarehouse: \"百灵威系统工程部/warehouse\",\r\n    uqSalesTask: '百灵威系统工程部/salestask',\r\n    uqCustomer: '百灵威系统工程部/customer',\r\n    uqProduct: \"百灵威系统工程部/product\",\r\n    uqCommon: '百灵威系统工程部/common',\r\n    appIcon: 'http://101.200.46.56/imgs/Bear-icon.png',\r\n    headerClass: 'bg-primary',\r\n}","import * as React from \"react\";\r\nimport { consts } from \"consts\";\r\nimport { CMedia } from \"./CMedia\";\r\nimport { observer } from \"mobx-react\";\r\nimport { VPage, Page, SearchBox, Loading, FA, Tuid, LMR } from \"tonva\";\r\nimport copy from 'copy-to-clipboard';\r\n\r\nexport class VMain extends VPage<CMedia> {\r\n    async open() {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    render(member: any): JSX.Element {\r\n        return <this.page />\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { pageMedia, searchMadiaKey, onAddClick, showCat, showSlideShow, showOtherMedia, onScrollBottom } = this.controller;\r\n        let right = <div className=\"w-19c d-flex\">\r\n            <SearchBox className=\"w-80 mt-1 mr-2\"\r\n                size='sm'\r\n                onSearch={(key: string) => searchMadiaKey(key, 1)}\r\n                placeholder={this.t('searchpicture')} />\r\n            <div onClick={onAddClick}>\r\n                {/* <span className=\"mx-2 iconfont icon-jiahao1 \"\r\n                    style={{ fontSize: \"26px\", color: \"white\" }}>\r\n                </span> */}\r\n                <FA name=\"plus-square-o\" size=\"2x\" className=\"mt-1 mr-2\" />\r\n            </div>\r\n        </div>;\r\n        let { items, loading } = pageMedia;\r\n        let divItems: any;\r\n        if (!items) {\r\n            divItems = (loading === true) ?\r\n                <div className=\"m-5\"><Loading /></div>\r\n                :\r\n                <div className=\"my-3 mx-2 text-warning\">\r\n                    <span className=\"text-primary\" >{this.t('nopicture')}</span>\r\n                </div>;\r\n        }\r\n        else {\r\n            divItems = items.map((v, index) => {\r\n                return this.renderItem(v, index);\r\n            });\r\n        }\r\n\r\n        return <Page header={this.t('其他文件')} headerClassName={consts.headerClass} right={right}\r\n            onScrollBottom={onScrollBottom}>\r\n\r\n            <LMR className=\"bg-white py-3 my-1\" right={<i className=\" px-2 iconfont icon-more\"></i>} onClick={() => showCat({ name: \"图片分类\", id: 0 })} >\r\n                <div className=\"mx-3 px-2 font-weight-bold\">图片分类</div>\r\n            </LMR>\r\n            <LMR className=\"bg-white py-3 my-1\" right={<i className=\" px-2 iconfont icon-more\"></i>} onClick={showSlideShow} >\r\n                <div className=\"mx-3 px-2 font-weight-bold\">轮播图</div>\r\n            </LMR>\r\n            <LMR className=\"bg-white py-3 my-1\" right={<i className=\" px-2 iconfont icon-more\"></i>} onClick={showOtherMedia} >\r\n                <div className=\"mx-3 px-2 font-weight-bold\">其他文件</div>\r\n            </LMR>\r\n\r\n            <div className=\"mx-3\">\r\n                <div className=\"row row-cols-2 row-cols-sm-3 row-cols-md-4\">\r\n                    {divItems}\r\n                </div>\r\n            </div>\r\n        </Page>;\r\n    })\r\n\r\n\r\n    private copyClick = (e: any, path: any) => {\r\n        let el = e.target as HTMLElement;\r\n        let innerHTML = el.innerHTML;\r\n        copy(path);\r\n        el.innerHTML = '<div class=\"text-center text-danger w-100\"> <span style=\"color:transparent\">- - - - - -</span> url ' + this.t('copysuccess') + '<span style=\"color:transparent\">- - - - - -</span> </div>';\r\n        setTimeout(() => {\r\n            el.innerHTML = innerHTML;\r\n        }, 1000);\r\n        //alert(this.t('copysuccess'))\r\n    }\r\n\r\n    private preview = (path: any) => {\r\n        window.open(path, '_blank')\r\n    }\r\n\r\n    private renderItem = (item: any, index: number) => {\r\n        let { onRem } = this.controller;\r\n        let { caption, path, id, author } = item;\r\n        let isMe = Tuid.equ(author, this.controller.user.id);\r\n        console.log(isMe, 'item')\r\n        let { onimgNames } = this.controller\r\n        let imgStyle = {\r\n            backgroundImage: `url(${path})`,\r\n        }\r\n\r\n        let divImg = <div className=\"d-flex align-items-center bg-white rounded  cursor-pointer\"\r\n            onClick={() => this.preview(item.path)}>\r\n            <div className=\"w-100 h-100 bg-center-img h-min-12c\" style={imgStyle}>\r\n            </div>\r\n        </div>;\r\n        if (isMe) {\r\n            return <div key={index} className=\"col px-3 py-2 border-bottom border-dark\">\r\n                <div className=\"text-info bg-light p-2 d-flex text-nowrap cursor-pointer border-bottom\">\r\n                    <div className=\"d-flex flex-fill\" onClick={() => onimgNames(id)} >\r\n                        <div className=\"overflow-hidden flex-fill small\">{caption}</div>\r\n                        <div className=\"\"><FA name=\"edit\" /></div>\r\n                    </div>\r\n                    <div className=\"iconfont icon-shanchu pl-1\" onClick={() => onRem(id)}></div>\r\n                </div>\r\n\r\n                {divImg}\r\n                <div className=\"smallPath small my-2 text-muted cursor-pointer\"\r\n                    onClick={(e) => this.copyClick(e, path)}>\r\n                    <span>{path}</span>\r\n                    <span><small className=\" text-muted float-right\" >{this.t('copy')}</small></span>\r\n                </div>\r\n            </div>;\r\n\r\n        }\r\n        return <div key={index} className=\"col px-3 py-2 border-bottom border-dark\">\r\n            <div className=\"text-info bg-light p-2 d-flex text-nowrap cursor-pointer border-bottom\">\r\n                <div className=\"d-flex flex-fill\" onClick={() => onimgNames(id)} >\r\n                    <div className=\"overflow-hidden flex-fill small\">{caption}</div>\r\n                    <div className=\"\"><FA name=\"edit\" /></div>\r\n                </div>\r\n            </div>\r\n\r\n            {divImg}\r\n            <div className=\"smallPath small my-2 text-muted cursor-pointer \"\r\n                onClick={(e) => this.copyClick(e, path)}>\r\n                <span>{path}</span>\r\n                <span><small className=\" text-muted float-right\" >{this.t('copy')}</small></span>\r\n            </div>\r\n        </div>;\r\n\r\n    }\r\n}\r\n/*\r\n<button\r\nstyle={{ fontWeight: 550, padding: '0 5px', fontSize: '12px' }}\r\nclassName=\"mt-2 btn btn-outline-primary\"\r\nonClick={this.copyClick}>\r\n{this.t('copy')}\r\n</button >\r\n*/","import * as React from \"react\";\r\nimport { CMedia } from './CMedia';\r\nimport { VPage, Page, EasyTime, Tuid, FA, LMR, tv } from \"tonva\";\r\nimport { observer } from \"mobx-react\";\r\nimport { consts } from \"consts\";\r\n\r\nexport class VShowImg extends VPage<CMedia> {\r\n    async open() {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { current } = this.controller;\r\n        let { caption, author, template, $update } = current;\r\n        let date = <span><EasyTime date={$update} /></span>;\r\n        let isMe = Tuid.equ(author, this.controller.user.id);\r\n        let right = isMe && <button className=\"btn btn-sm btn-success mr-2 align-self-center\"><FA name=\"pencil-square-o\" /></button>\r\n\r\n        let divUser = this.controller.cApp.renderUser(author.id);\r\n        return <Page header={this.t('editorpicture')} headerClassName={consts.headerClass} right={right}>\r\n            <div className=\"p-3\">\r\n                <div className=\"small text-muted p-1\">{this.t('title')}</div>\r\n                <div className=\"mb-1 h6 px-3 py-2 bg-white\">{caption}</div>\r\n                <LMR className=\"mb-3 px-3 small text-black-50\" right={date}>\r\n                    {divUser}\r\n                </LMR>\r\n                <div className=\"small text-muted p-1\">{this.t('describe')}</div>\r\n                <div className=\"small text-muted p-1\">{this.t('content')}</div>\r\n                <div className=\"small text-muted p-1\">{this.t('template')}</div>\r\n                <div className=\"mb-3 px-3 py-2 bg-white h6\">\r\n                    {tv(template, (values) => <>{values.caption}</>, undefined, () => <small className=\"text-muted\" >[无]</small>)}\r\n                </div>\r\n            </div>\r\n        </Page>;\r\n    })\r\n}","import * as React from \"react\";\r\nimport _ from 'lodash';\r\nimport { consts } from \"consts\";\r\nimport { CMedia } from \"./CMedia\";\r\nimport { observer } from \"mobx-react\";\r\nimport { VPage, UiSchema, Schema, UiInputItem, Page, Form, Context, ImageUploader, nav } from \"tonva\";\r\nimport { observable } from \"mobx\";\r\n\r\n/* eslint-disable */\r\nexport class VEdit extends VPage<CMedia> {\r\n    @observable private media: any;\r\n    @observable private mediaPath: string;\r\n\r\n    private form: Form;\r\n    async open(media: any) {\r\n        this.media = media;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onAddSalesTask = async (model: any) => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    private get mediaId() { return this.media && this.media.id; }\r\n    private getMediaPath(resId: string): string { return nav.resUrl + (resId.substr(1)) }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        this.closePage(1);\r\n        let param = _.clone(context.form.data);\r\n        param.path = this.mediaPath;\r\n        param.types = 1;\r\n        await this.controller.saveItem(this.mediaId, param);\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            caption: { widget: 'text', label: this.t('title') } as UiInputItem,\r\n            submit: { widget: 'button', label: this.t('submit') }\r\n        }\r\n    };\r\n\r\n    private schema: Schema = [\r\n        { name: 'caption', type: 'string', required: true },\r\n    ];\r\n\r\n    private onSaved = (resId: string): Promise<void> => {\r\n        this.mediaPath = this.getMediaPath(resId);\r\n        this.closePage();\r\n        return;\r\n    }\r\n\r\n    private onUpload = () => {\r\n        this.media = this.form.data;\r\n        this.openPageElement(<ImageUploader onSaved={this.onSaved} />);\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let image: any;\r\n        let saveButton: any;\r\n        if (this.mediaPath) {\r\n            image = <div className=\"m-3 text-center w-max-30c border\"><img className=\"w-8c h-8c border\" src={this.mediaPath} /></div>;\r\n            saveButton = <div className=\"px-1 \">\r\n                <div className=\"text-content text-center\">\r\n                    <button type=\"button\" className=\"btn btn-primary mx-2 col-11\" onClick={this.onAddSalesTask} >{this.t('save')}</button>\r\n                </div>\r\n            </div>;\r\n        }\r\n        else {\r\n            image = <div className=\"text-content text-center\">\r\n                <button className=\"btn btn-primary mr-3\" onClick={this.onUpload}>{this.t('uploadpicture')}</button>\r\n            </div>;\r\n        }\r\n\r\n        return <Page header={this.t('editorpicture')} headerClassName={consts.headerClass}>\r\n            <div className=\"mx-3\">\r\n                <Form ref={v => this.form = v} className=\"my-3\"\r\n                    formData={this.media}\r\n                    schema={this.schema}\r\n                    uiSchema={this.uiSchema}\r\n                    onButtonClick={this.onFormButtonClick}\r\n                    requiredFlag={true}\r\n                />\r\n            </div>\r\n            {image}\r\n            {saveButton}\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, Form, UiSchema, Schema, Page, Edit, ItemSchema, List } from \"tonva\";\r\nimport { observer } from 'mobx-react';\r\nimport { consts } from 'consts';\r\nimport { CMedia } from './CMedia';\r\nimport { observable } from 'mobx';\r\n\r\nexport class VChangeNames extends VPage<CMedia> {\r\n\r\n    private form: Form;\r\n    @observable showTips: any = \"none\";\r\n    async open() {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n\r\n\r\n    private onItemChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.controller.current[name] = newValue;\r\n    }\r\n    private onClickSaveButton = async () => {\r\n        let { current } = this.controller;\r\n        let id = current && current.id;\r\n        console.log(id, 'id')\r\n        await this.controller.saveItem(id, current);\r\n        this.closePage();\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            caption: { widget: 'text', label: this.t('title') },\r\n            submit: { widget: 'button', label: this.t('submit') }\r\n        }\r\n    };\r\n\r\n    private schema: Schema = [\r\n        { name: 'caption', type: 'string', required: true },\r\n    ];\r\n    render(): JSX.Element {\r\n        return <this.page />\r\n    }\r\n\r\n\r\n    setSlideShow = async () => {\r\n        let { current, updateSlideShow } = this.controller;\r\n        this.showTips = \"\";\r\n        setTimeout(() => {\r\n            this.showTips = \"none\";\r\n        }, 2000);\r\n        await updateSlideShow(current.id, undefined, undefined, undefined, 0, 1)\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { current, showPickCat, pageImageCat } = this.controller;\r\n        let right = <div>\r\n            <button type=\"button\"\r\n                className=\"btn btn-sm btn-success mr-3\"\r\n                onClick={this.setSlideShow} >{this.t('设为轮播图')}\r\n            </button>\r\n            <button type=\"button\"\r\n                className=\"btn btn-sm btn-success mr-3\"\r\n                onClick={() => showPickCat(\"0\")} >{this.t('分类')}\r\n            </button>\r\n            <button type=\"button\"\r\n                className=\"btn btn-sm btn-success mr-3\"\r\n                onClick={this.onClickSaveButton} >{this.t('submit')}\r\n            </button>\r\n        </div >;\r\n        return <Page header={this.t('editorpicture')}\r\n            right={right}\r\n            headerClassName={consts.headerClass}>\r\n            <div className=\"mx-3 py-2 h-100 d-flex flex-column\">\r\n                <Edit data={current}\r\n                    schema={this.schema}\r\n                    uiSchema={this.uiSchema}\r\n                    onItemChanged={this.onItemChanged}\r\n                />\r\n                <div className=\"py-2 my-1 text-primary\" >\r\n                    <strong>类型</strong>\r\n                </div>\r\n                <List before={\"\"} none={\"无\"} items={pageImageCat} item={{ render: this.renderItem }} />\r\n            </div>\r\n            <div className=\"w-100 text-center\">\r\n                <div className=\"text-center text-white small px-2\" style={{ width: '20%', margin: '-30rem auto 0 auto', padding: '4px', borderRadius: '3px', backgroundColor: '#505050', display: this.showTips }}>设置完成</div>\r\n            </div>\r\n        </Page>\r\n    })\r\n\r\n    private renderItem = (item: any, index: number) => {\r\n        let { delImageCat } = this.controller\r\n        let { name, id } = item\r\n        return (\r\n            <div className=\"pl-2 pl-sm-3 pr-2 pr-sm-3 py-2 d-flex\">\r\n                <div className=\"d-flex flex-fill mx-2\"  >\r\n                    <span>{name}</span>\r\n                </div>\r\n                <div>\r\n                    <span className=\"text-danger\" onClick={() => delImageCat(id)}>\r\n                        <span className=\"iconfont icon-shanchu pl-1\"></span>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n}","import * as React from \"react\";\r\nimport { consts } from \"consts\";\r\nimport { CMedia } from \"./CMedia\";\r\nimport { observer } from \"mobx-react\";\r\nimport { VPage, Page, List } from \"tonva\";\r\nimport { observable } from \"mobx\";\r\n\r\nexport class VCat extends VPage<CMedia> {\r\n    @observable capton: any;\r\n    @observable pageCat: any;\r\n    async open(param: any) {\r\n        this.pageCat = param.pageCat;\r\n        this.capton = param.name;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private page = observer(() => {\r\n        return <Page header={this.capton} headerClassName={consts.headerClass}\r\n            onScrollBottom={this.onScrollBottom}>\r\n            <List before={\"\"} items={this.pageCat} item={{ render: this.renderItem }} />\r\n        </Page>;\r\n    })\r\n\r\n    private onScrollBottom = async () => {\r\n        await this.controller.pageMedia.more();\r\n    }\r\n    private renderItem = (item: any, index: number) => {\r\n        let { name, id } = item;\r\n        return (\r\n            <div className=\"pl-2 pl-sm-3 pr-2 pr-sm-3 py-3 d-flex \">\r\n                <div className=\"mx-2 w-50 small\" >\r\n                    <span>{name}</span>\r\n                </div>\r\n                <div className=\"w-25 text-right w-7c\" onClick={() => this.controller.showCatImage(id)} >\r\n                    <span className=\"p-2 small pl-4 text-primary cursor-pointer\">\r\n                        图 片\r\n                </span>\r\n                </div>\r\n                <div className=\"w-25  text-right w-7c\" onClick={() => this.controller.showCat(item)} >\r\n                    <span className=\"p-2 small pl-4 text-primary cursor-pointer iconfont icon-jiantouyou\" style={{ fontSize: \"12px\" }}>\r\n                    </span>\r\n                </div>\r\n            </div >\r\n            /* <div className=\"pl-2 pl-sm-3 pr-2 pr-sm-3 pt-2 pb-3 d-flex\">\r\n                 <div className=\"d-flex flex-fill mx-2\"  >\r\n                     <span>{name}</span>\r\n                 </div>\r\n                 <div className=\"d-flex\">\r\n                     <div >\r\n                         <button className=\"btn btn-outline-info mx-2 px-3\" onClick={() => this.controller.showCatImage(id)}>\r\n                             图片\r\n                         </button>\r\n                     </div>\r\n                     <div className=\"small d-flex cursor-pointer text-primary text-right w-7c \">\r\n                         <button className=\"btn btn-outline-info mx-2 px-3\" onClick={() => this.controller.showCat(item)}>\r\n                             下一级\r\n                         </button>\r\n                     </div>\r\n                 </div>\r\n             </div >*/\r\n        );\r\n    };\r\n\r\n}\r\n","import * as React from \"react\";\r\nimport { consts } from \"consts\";\r\nimport { CMedia } from \"./CMedia\";\r\nimport { observer } from \"mobx-react\";\r\nimport { VPage, Page, List } from \"tonva\";\r\nimport { observable } from \"mobx\";\r\n\r\nexport class VPickCat extends VPage<CMedia> {\r\n\r\n    @observable pageCat: any;\r\n    async open(param: any) {\r\n        this.pageCat = param;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private page = observer(() => {\r\n        return <Page header={this.t('picture')} headerClassName={consts.headerClass} >\r\n            <List before={\"\"} items={this.pageCat} item={{ render: this.renderItem }} />\r\n        </Page>;\r\n    })\r\n\r\n    private renderItem = (item: any, index: number) => {\r\n        let { showPickCat, onPickCat, current } = this.controller\r\n        let { name, id } = item;\r\n        return (\r\n            <div className=\"pl-2 pl-sm-3 pr-2 pr-sm-3 pt-2 pb-3 d-flex\">\r\n                <div className=\"d-flex flex-fill mx-2\"  >\r\n                    <span>{name}</span>\r\n                </div>\r\n                <div className=\"d-flex\">\r\n                    <div className=\"small d-flex cursor-pointer text-primary text-right w-7c \">\r\n                        <button className=\"btn btn-outline-info mx-2 px-3\" onClick={() => onPickCat(current.id, id)}>\r\n                            选择\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"small d-flex cursor-pointer text-primary text-right w-7c \">\r\n                        <button className=\"btn btn-outline-info mx-2 px-3\" onClick={() => showPickCat(id)}>\r\n                            下一级\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div >\r\n        );\r\n    };\r\n\r\n}\r\n","import * as React from \"react\";\r\nimport { consts } from \"consts\";\r\nimport { CMedia } from \"./CMedia\";\r\nimport { observer } from \"mobx-react\";\r\nimport { VPage, Page, SearchBox, Loading, FA, Tuid } from \"tonva\";\r\nimport copy from 'copy-to-clipboard';\r\n\r\nexport class VCatImage extends VPage<CMedia> {\r\n\r\n    private cat: any\r\n    async open(param: any) {\r\n        this.cat = param;\r\n        this.openPage(this.page)\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { pageCatImage, searchCatImage, onAddClick } = this.controller;\r\n        let right = <div className=\"w-19c d-flex\">\r\n            <SearchBox className=\"w-80 mt-1 mr-2\"\r\n                size='sm'\r\n                onSearch={(key: string) => searchCatImage(key, this.cat)}\r\n                placeholder={this.t('searchpicture')} />\r\n            <div onClick={onAddClick}>\r\n                <span className=\"ml-2 iconfont icon-jiahao1 mr-2\"\r\n                    style={{ fontSize: \"26px\", color: \"white\" }}>\r\n                </span>\r\n            </div>\r\n        </div>;\r\n        let { items, loading } = pageCatImage;\r\n        let divItems: any;\r\n        if (!items) {\r\n            divItems = (loading === true) ?\r\n                <div className=\"m-5\"><Loading /></div>\r\n                :\r\n                <div className=\"my-3 mx-2 text-warning\">\r\n                    <span className=\"text-primary\" >{this.t('nopicture')}</span>\r\n                </div>;\r\n        }\r\n        else {\r\n            divItems = items.map((v, index) => {\r\n                return this.renderItem(v, index);\r\n            });\r\n        }\r\n        return <Page header={this.t('picture')} headerClassName={consts.headerClass} right={right} onScrollBottom={this.onScrollBottom}>\r\n            <div className=\"mx-3\">\r\n                <div className=\"row row-cols-2 row-cols-sm-3 row-cols-md-4\">\r\n                    {divItems}\r\n                </div>\r\n            </div>\r\n        </Page>;\r\n    })\r\n\r\n    private onScrollBottom = async () => {\r\n        await this.controller.pageMedia.more();\r\n    }\r\n\r\n    private copyClick = (e: any, path: any) => {\r\n        let el = e.target as HTMLElement;\r\n        let innerHTML = el.innerHTML;\r\n        copy(path);\r\n        el.innerHTML = '<div class=\"text-center text-danger w-100\"> <span style=\"color:transparent\">- - - - - -</span> url ' + this.t('copysuccess') + '<span style=\"color:transparent\">- - - - - -</span> </div>';\r\n        setTimeout(() => {\r\n            el.innerHTML = innerHTML;\r\n        }, 1000);\r\n        //alert(this.t('copysuccess'))\r\n    }\r\n\r\n    private preview = (path: any) => {\r\n        window.open(path, '_blank')\r\n    }\r\n\r\n    private renderItem = (item: any, index: number) => {\r\n        let { onRem } = this.controller;\r\n        let { caption, path, id, author } = item;\r\n        let isMe = Tuid.equ(author, this.controller.user.id);\r\n        console.log(isMe, 'item')\r\n        let { onimgNames } = this.controller\r\n        let imgStyle = {\r\n            backgroundImage: `url(${path})`,\r\n        }\r\n        //let right = <div className=\"border p-1\"><img className=\"h-4c w-4c\" src={path} /></div>;\r\n\r\n        let divImg = <div className=\"d-flex align-items-center bg-white rounded  cursor-pointer\"\r\n            onClick={() => this.preview(item.path)}>\r\n            <div className=\"w-100 h-100 bg-center-img h-min-12c\" style={imgStyle}>\r\n            </div>\r\n        </div>;\r\n        if (isMe) {\r\n            return <div key={index} className=\"col px-3 py-2 border-bottom border-dark\">\r\n                <div className=\"text-info bg-light p-2 d-flex text-nowrap cursor-pointer border-bottom\">\r\n                    <div className=\"d-flex flex-fill\" onClick={() => onimgNames(id)} >\r\n                        <div className=\"overflow-hidden flex-fill small\">{caption}</div>\r\n                        <div className=\"\"><FA name=\"edit\" /></div>\r\n                    </div>\r\n                    <div className=\"iconfont icon-shanchu pl-1\" onClick={() => onRem(id)}></div>\r\n                </div>\r\n\r\n                {divImg}\r\n                <div className=\"smallPath small my-2 text-muted cursor-pointer position-relative\"\r\n                    onClick={(e) => this.copyClick(e, path)}>\r\n                    <span>{path}</span>\r\n                    <small className=\"position-absolute text-muted\" style={{ right: 0, bottom: 0 }}>{this.t('copy')}</small>\r\n                </div>\r\n            </div>;\r\n\r\n        }\r\n        return <div key={index} className=\"col px-3 py-2 border-bottom border-dark\">\r\n            <div className=\"text-info bg-light p-2 d-flex text-nowrap cursor-pointer border-bottom\">\r\n                <div className=\"d-flex flex-fill\" onClick={() => onimgNames(id)} >\r\n                    <div className=\"overflow-hidden flex-fill small\">{caption}</div>\r\n                    <div className=\"\"><FA name=\"edit\" /></div>\r\n                </div>\r\n            </div>\r\n\r\n            {divImg}\r\n            <div className=\"smallPath small my-2 text-muted cursor-pointer position-relative\"\r\n                onClick={(e) => this.copyClick(e, path)}>\r\n                <span>{path}</span>\r\n                <small className=\"position-absolute text-muted\" style={{ right: 0, bottom: 0 }}>{this.t('copy')}</small>\r\n            </div>\r\n        </div>;\r\n\r\n    }\r\n}\r\n","import * as React from \"react\";\r\nimport { CMedia } from './CMedia';\r\nimport { VPage, Page, FA, Loading } from \"tonva\";\r\nimport { observer } from \"mobx-react\";\r\nimport { consts } from \"consts\";\r\n\r\nexport class VSlideShow extends VPage<CMedia> {\r\n    async open() {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private page = observer(() => {\r\n\r\n        let { pageSlideShow, pickImage } = this.controller;\r\n        let right = <span onClick={pickImage} className=\"mx-2 iconfont icon-jiahao1 cursor-pointer\" style={{ fontSize: \"1.7rem\", color: \"white\" }}></span>\r\n        let { items, loading } = pageSlideShow;\r\n        let divItems: any;\r\n        if (!items) {\r\n            divItems = (loading === true) ?\r\n                <div className=\"m-5\"><Loading /></div>\r\n                :\r\n                <div className=\"my-3 mx-2 text-warning\">\r\n                    <span className=\"text-primary\" >{this.t('nopicture')}</span>\r\n                </div>;\r\n        } else {\r\n            divItems = items.map((v, index) => {\r\n                return this.renderItem(v, index);\r\n            });\r\n        }\r\n\r\n        return <Page header={this.t('轮播图')} headerClassName={consts.headerClass} right={right}>\r\n            <div className=\"mx-3\">\r\n                <div className=\"row row-cols-2 row-cols-sm-3 row-cols-md-4\">\r\n                    {divItems}\r\n                </div>\r\n            </div>\r\n        </Page>;\r\n    })\r\n\r\n\r\n    private preview = (path: any) => {\r\n        window.open(path, '_blank')\r\n    }\r\n\r\n\r\n    private renderItem = (item: any, index: number) => {\r\n        let { delSlideShow, showEditSlideShow } = this.controller;\r\n\r\n        let { caption, path, image, sort, types } = item;\r\n        let imgStyle = {\r\n            backgroundImage: `url(${path})`,\r\n        }\r\n        let type = types ? \"是\" : \"否\";\r\n        let divImg = <div className=\"d-flex align-items-center bg-white rounded  cursor-pointer\"\r\n            onClick={() => this.preview(item.path)}>\r\n            <div className=\"w-100 h-100 bg-center-img h-min-12c \" style={imgStyle}>\r\n            </div>\r\n        </div>;\r\n\r\n        return <div key={index} className=\"col px-3 py-2 border-bottom border-dark\">\r\n            <div className=\"text-info bg-light p-2 d-flex text-nowrap cursor-pointer border-bottom\">\r\n                <div className=\"d-flex flex-fill\"  >\r\n                    <div className=\"overflow-hidden flex-fill small\">{caption}</div>\r\n                    <div className=\"iconfont icon-shanchu pl-1\" onClick={() => delSlideShow(image)} ></div>\r\n                </div>\r\n            </div>\r\n            {divImg}\r\n            <div className=\"text-info bg-light p-2 d-flex text-nowrap cursor-pointer border-bottom\">\r\n                <div className=\"d-flex  flex-fill smallPath small my-2  text-primary cursor-pointer position-relative\">\r\n                    <div className=\"overflow-hidden flex-fill small px-3\">发布：{type}</div>\r\n                    <div className=\"overflow-hidden flex-fill small px-3\">排序：{sort}</div>\r\n                    <div onClick={() => showEditSlideShow(item)}><FA name=\"edit\" /></div>\r\n                </div>\r\n            </div>\r\n        </div>;\r\n\r\n    }\r\n}","import * as React from 'react';\r\nimport { VPage, Page, SearchBox, Loading, Tuid } from \"tonva\";\r\nimport { CPosts } from \"./CPosts\";\r\nimport { observer } from 'mobx-react';\r\nimport { consts } from 'consts';\r\n\r\nexport class VPickImage extends VPage<CPosts> {\r\n    async open() {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    render(): JSX.Element {\r\n        return <this.page />\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let { pageMedia, searchMadiaKey, onScrollBottom } = this.controller;\r\n\r\n        let right = <SearchBox className=\"w-80 mt-2 mr-2\"\r\n            size='sm'\r\n            onSearch={(key: string) => searchMadiaKey(key)}\r\n            placeholder={this.t('selectpicture')} />;\r\n\r\n        let { items, loading } = pageMedia;\r\n        let divItems: any;\r\n        if (!items) {\r\n            divItems = (loading === true) ?\r\n                <div className=\"m-5\"><Loading /></div>\r\n                :\r\n                <div className=\"my-3 mx-2 text-warning\">\r\n                    <span className=\"text-primary\" >{this.t('nopicture')}</span>\r\n                </div>;\r\n        } else {\r\n            divItems = items.map((v, index) => {\r\n                return this.renderItem(v, index);\r\n            });\r\n        }\r\n        return <Page header={this.t('selectpicture')} headerClassName={consts.headerClass} right={right} onScrollBottom={onScrollBottom}>\r\n            <div className=\"mx-3\">\r\n                <div className=\"row row-cols-2 row-cols-sm-3 row-cols-md-4\">\r\n                    {divItems}\r\n                </div>\r\n            </div>\r\n        </Page>;\r\n    })\r\n\r\n    private itemClick = (item: any) => {\r\n        this.controller.onPickedImage(item.id);\r\n    };\r\n\r\n    private renderItem = (item: any, index: number) => {\r\n        let { caption, path, author } = item;\r\n        let isMe = Tuid.equ(author, this.controller.user.id);\r\n        console.log(isMe, 'item')\r\n\r\n        let imgStyle = {\r\n            backgroundImage: `url(${path})`,\r\n        }\r\n        let divImg = <div className=\"d-flex align-items-center bg-white rounded  cursor-pointer\"\r\n            onClick={(e) => this.itemClick(item)}>\r\n            <div className=\"w-100 h-100 bg-center-img h-min-12c\" style={imgStyle}>\r\n            </div>\r\n        </div>;\r\n\r\n        return <div key={index} className=\"col px-3 py-2 border-bottom border-dark\" >\r\n            <div className=\"text-info bg-light p-2 d-flex text-nowrap cursor-pointer border-bottom\">\r\n                <div className=\"d-flex flex-fill\" >\r\n                    <div className=\"overflow-hidden flex-fill small\">{caption}</div>\r\n                </div>\r\n            </div>\r\n            {divImg}\r\n            <div className=\"smallPath small my-2 text-muted cursor-pointer position-relative\">\r\n                <span>{path}</span>\r\n                <small className=\"position-absolute text-muted\" style={{ right: 0, bottom: 0 }}></small>\r\n            </div>\r\n        </div>;\r\n\r\n    }\r\n}","import * as React from \"react\";\r\nimport { consts } from \"consts\";\r\nimport { CMedia } from \"./CMedia\";\r\nimport { observer } from \"mobx-react\";\r\nimport { VPage, UiSchema, Schema, UiInputItem, Page, Form, Context } from \"tonva\";\r\nimport { observable } from \"mobx\";\r\n/* eslint-disable */\r\nexport class VEditSlideShow extends VPage<CMedia> {\r\n    @observable private media: any;\r\n    private form: Form;\r\n    async open(media: any) {\r\n        this.media = media;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onAdd = async () => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        this.closePage(1);\r\n        let { caption, description, src, types, sort } = context.form.data;\r\n        await this.controller.updateSlideShow(this.media.image.id, caption, description, src, types, sort);\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            caption: { widget: 'text', label: this.t('标题') } as UiInputItem,\r\n            description: { widget: 'text', label: this.t('说明') } as UiInputItem,\r\n            src: { widget: 'text', label: this.t('链接') } as UiInputItem,\r\n            types: { widget: 'checkbox', label: this.t('是否发布') } as UiInputItem,\r\n            sort: { widget: 'updown', label: this.t('排序') } as UiInputItem,\r\n            submit: { widget: 'button', label: this.t('submit') }\r\n        }\r\n    };\r\n\r\n    private schema: Schema = [\r\n        { name: 'caption', type: 'string', required: true },\r\n        { name: 'description', type: 'string', required: true },\r\n        { name: 'src', type: 'string', required: true },\r\n        { name: 'types', type: 'string', required: true },\r\n        { name: 'sort', type: 'string', required: true },\r\n    ];\r\n\r\n    private page = observer(() => {\r\n\r\n        let right = <button type=\"button\" onClick={this.onAdd} className=\"btn btn-sm btn-success mr-3\">{this.t('submit')}</button>;\r\n        return <Page header={this.t('editorpicture')} headerClassName={consts.headerClass} right={right}>\r\n            <div className=\"mx-3\">\r\n                <Form ref={v => this.form = v} className=\"my-3\"\r\n                    formData={this.media}\r\n                    schema={this.schema}\r\n                    uiSchema={this.uiSchema}\r\n                    onButtonClick={this.onFormButtonClick}\r\n                    requiredFlag={true}\r\n                />\r\n            </div>\r\n        </Page>\r\n    })\r\n}","import * as React from \"react\";\r\nimport { consts } from \"consts\";\r\nimport { CMedia } from \"./CMedia\";\r\nimport { observer } from \"mobx-react\";\r\nimport { VPage, Page, SearchBox, List } from \"tonva\";\r\nimport copy from 'copy-to-clipboard';\r\n\r\nexport class VFile extends VPage<CMedia> {\r\n    async open() {\r\n        this.openPage(this.page)\r\n    }\r\n\r\n    private page = observer(() => {\r\n\r\n        let { pageFile, searchMadiaKey, addAddFile, onScrollBottom } = this.controller;\r\n\r\n        let right = <div className=\"w-19c d-flex\">\r\n            <SearchBox className=\"w-80 mt-1 mr-2\" size='sm' onSearch={(key: string) => searchMadiaKey(key, 2)} placeholder={this.t('搜索文件')} />\r\n            <div onClick={addAddFile}>\r\n                <span className=\"ml-2 iconfont icon-jiahao1 mr-2\"\r\n                    style={{ fontSize: \"26px\", color: \"white\" }}>\r\n                </span>\r\n            </div>\r\n        </div>;\r\n\r\n        let none = (\r\n            <div className=\"my-3 mx-2\">\r\n                <span className=\"text-muted small\">[{this.t('noposts')}]</span>\r\n            </div>\r\n        );\r\n\r\n        return <Page header={this.t('文件')} headerClassName={consts.headerClass} right={right} onScrollBottom={onScrollBottom}>\r\n            <List before={\"\"} none={none} items={pageFile} item={{ render: this.renderItem }} />\r\n        </Page>;\r\n    })\r\n\r\n\r\n    private copyClick = (e: any, path: any) => {\r\n        let el = e.target as HTMLElement;\r\n        let innerHTML = el.innerHTML;\r\n        copy(path);\r\n        el.innerHTML = '<div class=\"text-center text-danger samll\"><small>' + this.t('copysuccess') + '</small></div>';\r\n        setTimeout(() => {\r\n            el.innerHTML = innerHTML;\r\n        }, 1000);\r\n\r\n    }\r\n\r\n    private preview = (path: any) => {\r\n        window.open(path, '_blank')\r\n    }\r\n\r\n    private renderItem = (item: any, index: number) => {\r\n        let { delFile, editFile } = this.controller;\r\n        let { caption, path, id, types } = item;\r\n        let icon = types.id === 2 ? \"iconfont icon-PDF mx-3\" : \"iconfont icon-shipin mx-3\";\r\n        return <div key={index} className=\"row py-2 cursor-pointer\">\r\n            <div className=\"col-10 d-flex\" onClick={() => this.preview(item.path)}>\r\n                <div className={icon} style={{ fontSize: \"35px\" }}></div>\r\n                <div>\r\n                    <div className=\"mr-3 strong\">{caption}</div>\r\n                    <div className=\"small\">{path}</div>\r\n                </div>\r\n            </div>\r\n            <div className=\"col-2 pt-2\">\r\n                <span className=\"iconfont icon-xiugai1 mx-2\" onClick={() => editFile(id)}></span>\r\n                <span className=\"iconfont icon-shanchu mx-2\" onClick={() => delFile(id)}></span>\r\n                <span onClick={(e) => this.copyClick(e, path)}> {this.t('copy')}</span>\r\n            </div>\r\n        </div >\r\n    }\r\n\r\n}\r\n","import * as React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { observable } from 'mobx';\r\nimport { LMR, Page, Loading, ResUploader } from 'tonva';\r\n\r\nfunction formatSize(size: number, pointLength: number = 2, units?: string[]) {\r\n    var unit;\r\n    units = units || ['B', 'K', 'M', 'G', 'TB'];\r\n    while ((unit = units.shift()) && size > 1024) {\r\n        size = size / 1024;\r\n    }\r\n    return (unit === 'B' ? size : size.toFixed(pointLength === undefined ? 2 : pointLength)) + unit;\r\n}\r\ninterface FileUploaderProps {\r\n    id?: string;\r\n    label?: string;\r\n    onSaved?: (imageId: string) => Promise<void>;\r\n}\r\n\r\n@observer\r\nexport class FileUploader extends React.Component<FileUploaderProps> {\r\n    private static audioTypes = ['pdf', 'mp4'];\r\n\r\n    private suffix: string;\r\n    private resUploader: ResUploader;\r\n    @observable private content: string;\r\n    @observable private file: File;\r\n    @observable private fileSize: number;\r\n\r\n    @observable private isChanged: boolean = false;\r\n    @observable private resId: string;\r\n    @observable private enableUploadButton: boolean = false;\r\n    @observable private fileError: string;\r\n    @observable private uploaded: boolean = false;\r\n    @observable private uploading: boolean = false;\r\n\r\n    constructor(props: FileUploaderProps) {\r\n        super(props);\r\n        this.resId = props.id;\r\n    }\r\n\r\n    private onFileChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.fileError = undefined;\r\n        this.uploaded = false;\r\n        this.enableUploadButton = evt.target.files.length > 0;\r\n        if (this.enableUploadButton) {\r\n            this.file = evt.target.files[0];\r\n            let pos = this.file.name.lastIndexOf('.');\r\n            if (pos >= 0) this.suffix = this.file.name.substr(pos + 1).toLowerCase();\r\n            if (FileUploader.audioTypes.indexOf(this.suffix) < 0) {\r\n                this.fileError = `文件类型必须是 ${FileUploader.audioTypes.join(', ')} 中的一种`;\r\n                return;\r\n            }\r\n            let reader = new FileReader();\r\n            reader.readAsDataURL(this.file);\r\n            reader.onload = async () => {\r\n                this.content = reader.result as string;\r\n                this.fileSize = this.content.length;\r\n            };\r\n        }\r\n    }\r\n\r\n    private convertBase64UrlToBlob(urlData: string): Blob {\r\n        let arr = urlData.split(',');\r\n        let mime = arr[0].match(/:(.*?);/)[1];\r\n        let bstr = atob(arr[1]);\r\n        let n = bstr.length;\r\n        let u8arr = new Uint8Array(n);\r\n        while (n--) {\r\n            u8arr[n] = bstr.charCodeAt(n);\r\n        }\r\n        return new Blob([u8arr], { type: mime });\r\n    }\r\n\r\n    private upload = async () => {\r\n        if (!this.resUploader) return;\r\n        this.uploading = true;\r\n        let formData = new FormData();\r\n        let blob = this.convertBase64UrlToBlob(this.content);\r\n        formData.append('image', blob, this.file.name);\r\n        let ret = await this.resUploader.upload(formData);\r\n        if (typeof ret === 'object') {\r\n            let { error } = ret;\r\n            let type = typeof error;\r\n            let err: string;\r\n            switch (type) {\r\n                case 'undefined': err = 'error: undefined'; break;\r\n                case 'string': err = error; break;\r\n                case 'object': err = error.message; break;\r\n                default: err = String(err); break;\r\n            }\r\n            this.fileError = 'error: ' + type + ' - ' + err;\r\n            return;\r\n        }\r\n        this.resId = ret;\r\n        this.isChanged = (this.resId !== this.props.id);\r\n        this.uploaded = true;\r\n    }\r\n\r\n    private onSaved = (): Promise<void> => {\r\n        let { onSaved } = this.props;\r\n        onSaved && onSaved(this.resId);\r\n        return;\r\n    }\r\n\r\n    render() {\r\n        let { label } = this.props;\r\n        let right = <button\r\n            className=\"btn btn-sm btn-success align-self-center mr-2\"\r\n            disabled={!this.isChanged}\r\n            onClick={this.onSaved}>保存</button>;\r\n        return <Page header={label || '更改文件'} right={right}>\r\n            <div className=\"my-3 px-3 py-3 bg-white\">\r\n                <div>\r\n                    <div className=\"mb-3\">\r\n                        <ResUploader ref={v => this.resUploader = v}\r\n                            multiple={false} maxSize={2048}\r\n                            label=\"选择文件\"\r\n                            onFilesChange={this.onFileChange} />\r\n                        <div className=\"small text-muted\">支持 {FileUploader.audioTypes.join(', ')} 格式。</div>\r\n                        {this.fileError && <div className=\"text-danger\">{this.fileError}</div>}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <LMR left=\r\n                {\r\n                    this.uploaded === true ?\r\n                        <div className=\"text-success p-2\">上传成功！</div>\r\n                        :\r\n                        this.uploading === true ?\r\n                            <div className=\"m-3\"><Loading /></div>\r\n                            :\r\n                            this.file && this.content && <div className=\"m-3\">\r\n                                <div className=\"mb-3\">\r\n                                    文件大小：{formatSize(this.fileSize)}\r\n                                </div>\r\n                                <button className=\"btn btn-primary\"\r\n                                    disabled={!this.enableUploadButton}\r\n                                    onClick={this.upload}>上传</button>\r\n                            </div>\r\n                }\r\n            />\r\n        </Page>;\r\n    }\r\n}","import * as React from \"react\";\r\nimport _ from 'lodash';\r\nimport { consts } from \"consts\";\r\nimport { CMedia } from \"./CMedia\";\r\nimport { observer } from \"mobx-react\";\r\nimport { VPage, UiSchema, Schema, UiInputItem, Page, Form, Context, nav } from \"tonva\";\r\nimport { observable } from \"mobx\";\r\nimport { FileUploader } from \"upLoader/upLoader\";\r\nimport { MadiaType } from \"configuration\";\r\n/* eslint-disable */\r\nexport class VAddFile extends VPage<CMedia> {\r\n\r\n    @observable private media: any;\r\n    @observable private mediaPath: string;\r\n    private form: Form;\r\n    private mediaType: any = MadiaType.PDF;\r\n\r\n    async open(media: any) {\r\n        this.media = media;\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onAddSalesTask = async (model: any) => {\r\n        if (!this.form) return;\r\n        await this.form.buttonClick(\"submit\");\r\n    }\r\n\r\n    private get mediaId() { return this.media && this.media.id; }\r\n    private getMediaPath(resId: string): string { return nav.resUrl + (resId.substr(1)) }\r\n\r\n    private onFormButtonClick = async (name: string, context: Context) => {\r\n        this.closePage(1);\r\n        let param = _.clone(context.form.data);\r\n        param.path = this.mediaPath;\r\n        param.types = this.getFileExtension(param.path);\r\n        await this.controller.saveItem(this.mediaId, param);\r\n    }\r\n    private getFileExtension = (path: any) => {\r\n        var fileExtension = path.substring(path.lastIndexOf('.') + 1);\r\n        if (fileExtension === \"pdf\") {\r\n            return 2;\r\n        } else {\r\n            return 3;\r\n        }\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            caption: { widget: 'text', label: this.t('title') } as UiInputItem,\r\n            submit: { widget: 'button', label: this.t('submit') }\r\n        }\r\n    };\r\n\r\n    private schema: Schema = [\r\n        { name: 'caption', type: 'string', required: true },\r\n    ];\r\n\r\n    private onSaved = (resId: string): Promise<void> => {\r\n        this.mediaPath = this.getMediaPath(resId);\r\n        this.closePage();\r\n        return;\r\n    }\r\n\r\n\r\n    private onUploadFilePDF = () => {\r\n        this.media = this.form.data;\r\n        this.mediaType = MadiaType.PDF;\r\n        this.openPageElement(<FileUploader onSaved={this.onSaved} />);\r\n    }\r\n\r\n    private page = observer(() => {\r\n        let image: any;\r\n        let saveButton: any;\r\n        if (this.mediaPath) {\r\n            image = <div className=\"m-3 text-center w-max-30c border\"><img className=\"w-8c h-8c border\" src={this.mediaPath} /></div>;\r\n            saveButton = <div className=\"px-1 \">\r\n                <div className=\"text-content text-center\">\r\n                    <button type=\"button\" className=\"btn btn-primary mx-2 col-11\" onClick={this.onAddSalesTask} >{this.t('save')}</button>\r\n                </div>\r\n            </div>;\r\n        }\r\n        else {\r\n            image = <div className=\"text-content text-center\">\r\n                <button className=\"btn btn-primary mr-3\" onClick={this.onUploadFilePDF}>{this.t('上传文件')}</button>\r\n            </div>;\r\n        }\r\n\r\n        return <Page header={this.t('上传文件')} headerClassName={consts.headerClass}>\r\n            <div className=\"mx-3\">\r\n                <Form ref={v => this.form = v} className=\"my-3\"\r\n                    formData={this.media}\r\n                    schema={this.schema}\r\n                    uiSchema={this.uiSchema}\r\n                    onButtonClick={this.onFormButtonClick}\r\n                    requiredFlag={true}\r\n                />\r\n            </div>\r\n            {image}\r\n            {saveButton}\r\n        </Page>\r\n    })\r\n}","import * as React from 'react';\r\nimport { VPage, UiSchema, Schema, Page, Edit, ItemSchema } from \"tonva\";\r\nimport { observer } from 'mobx-react';\r\nimport { consts } from 'consts';\r\nimport { CMedia } from './CMedia';\r\nimport { observable } from 'mobx';\r\n\r\nexport class VFileEdit extends VPage<CMedia> {\r\n\r\n    @observable showTips: any = \"none\";\r\n    async open() {\r\n        this.openPage(this.page);\r\n    }\r\n\r\n    private onItemChanged = async (itemSchema: ItemSchema, newValue: any, preValue: any) => {\r\n        let { name } = itemSchema;\r\n        this.controller.current[name] = newValue;\r\n    }\r\n    private onClickSaveButton = async () => {\r\n        let { current } = this.controller;\r\n        let id = current && current.id;\r\n        await this.controller.saveItem(id, current);\r\n        this.closePage();\r\n    }\r\n\r\n    private uiSchema: UiSchema = {\r\n        items: {\r\n            caption: { widget: 'text', label: this.t('title') },\r\n            submit: { widget: 'button', label: this.t('submit') }\r\n        }\r\n    };\r\n\r\n    private schema: Schema = [\r\n        { name: 'caption', type: 'string', required: true },\r\n    ];\r\n\r\n    private page = observer(() => {\r\n        let { current } = this.controller;\r\n        let right = <div>\r\n            <button type=\"button\"\r\n                className=\"btn btn-sm btn-success mr-3\"\r\n                onClick={this.onClickSaveButton} >{this.t('submit')}\r\n            </button>\r\n        </div >;\r\n        return <Page header={this.t('editorpicture')} headerClassName={consts.headerClass} right={right}>\r\n            <div className=\"mx-3 py-2 h-100 d-flex flex-column\">\r\n                <Edit data={current} schema={this.schema} uiSchema={this.uiSchema} onItemChanged={this.onItemChanged} />\r\n            </div>\r\n        </Page>\r\n    })\r\n\r\n}","import * as React from \"react\";\r\nimport _ from \"lodash\";\r\nimport { CUqBase } from \"../CBase\";\r\nimport { observable } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport { VMain } from \"./VMain\";\r\nimport { QueryPager } from \"tonva\";\r\nimport { VShowImg } from \"./VShowImg\";\r\nimport { VEdit } from \"./VEdit\";\r\nimport { VChangeNames } from \"./VChangeNames\";\r\nimport { VCat } from \"./VCat\";\r\nimport { VPickCat } from \"./VPickCat\";\r\nimport { VCatImage } from \"./VCatImage\";\r\nimport { VSlideShow } from \"./VSlideShow\";\r\nimport { VPickImage } from \"posts/VPickImage\";\r\nimport { VEditSlideShow } from \"./VEditSlideShow\";\r\nimport { VFile } from \"./VFile\";\r\nimport { VAddFile } from \"./VAddFile\";\r\nimport { MadiaType } from \"configuration\";\r\nimport { VFileEdit } from \"./VFileEdit\";\r\n\r\nexport class CMedia extends CUqBase {\r\n    @observable pageMedia: QueryPager<any>;\r\n    @observable current: any;\r\n\r\n    @observable pageImageCat: QueryPager<any>;\r\n    @observable pageCatImage: QueryPager<any>;\r\n    @observable pageSlideShow: QueryPager<any>;\r\n    @observable pageFile: QueryPager<any>;\r\n\r\n    protected async internalStart(param: any) { }\r\n\r\n    searchMadiaKey = async (key: string, types: number) => {\r\n        this.pageMedia = new QueryPager(this.uqs.webBuilder.SearchImage, 15, 30);\r\n        this.pageMedia.first({ key: key, types: types });\r\n    };\r\n\r\n    onScrollBottom = async () => {\r\n        await this.pageMedia.more();\r\n    }\r\n\r\n    //添加文件\r\n    saveItem = async (id: any, param: any) => {\r\n        let { caption, path, types } = param;\r\n        let pa = { caption: caption, path: path, author: this.user.id, isValid: 1, types: types };\r\n        let ret = await this.uqs.webBuilder.Image.save(id, pa);\r\n        if (types === MadiaType.IAMGE) {\r\n            if (id) {\r\n                let item = this.pageMedia.items.find(v => v.id === id);\r\n                if (item !== undefined) {\r\n                    _.merge(item, param);\r\n                    item.$update = new Date();\r\n                }\r\n                this.current = item;\r\n            } else {\r\n                param.id = ret.id;\r\n                param.$create = new Date();\r\n                param.$update = new Date();\r\n                this.pageMedia.items.unshift(param);\r\n                this.current = param;\r\n            }\r\n            this.searchMadiaKey(\"\", MadiaType.IAMGE);\r\n        } else {\r\n            this.searcFileKey(\"\", MadiaType.NOTIMAGE);\r\n        }\r\n\r\n    };\r\n\r\n    onAddClick = () => {\r\n        this.current = undefined;\r\n        this.openVPage(VEdit);\r\n    };\r\n\r\n    onimgNames = async (id: number) => {\r\n        this.current = await this.uqs.webBuilder.Image.load(id);\r\n        await this.searchImageCat(id);\r\n        this.openVPage(VChangeNames);\r\n    }\r\n\r\n    render = observer(() => {\r\n        return this.renderView(VMain);\r\n    });\r\n\r\n    showMedia = async (id: number) => {\r\n        await this.searchImageCat(id);\r\n        this.current = await this.uqs.webBuilder.Image.load(id);\r\n        this.openVPage(VShowImg);\r\n    };\r\n\r\n    loadList = async () => {\r\n        this.searchMadiaKey(\"\", MadiaType.IAMGE);\r\n    };\r\n\r\n    onRem = async (id: number) => {\r\n        this.current = await this.uqs.webBuilder.Image.save(id, { isValid: 0 });\r\n        this.searchMadiaKey(\"\", MadiaType.IAMGE);\r\n    }\r\n\r\n    //图片分类--PICK\r\n    showPickCat = async (parent: string) => {\r\n        let pageCat = new QueryPager(this.uqs.webBuilder.SearchCat, 15, 100);\r\n        pageCat.first({ parent: parent });\r\n        this.openVPage(VPickCat, pageCat)\r\n    }\r\n\r\n    onPickCat = async (image: any, cat: any) => {\r\n        await this.uqs.webBuilder.ImageCat.add({ image: image, arr1: [{ cat: cat }] });\r\n        await this.searchImageCat(image);\r\n    }\r\n\r\n    searchImageCat = async (image: any) => {\r\n        this.pageImageCat = new QueryPager(this.uqs.webBuilder.SearchImageCat, 15, 30);\r\n        this.pageImageCat.first({ image: image });\r\n    };\r\n\r\n    delImageCat = async (cat: any) => {\r\n        await this.uqs.webBuilder.ImageCat.del({ image: this.current.id, arr1: [{ cat: cat }] });\r\n        this.pageImageCat = new QueryPager(this.uqs.webBuilder.SearchImageCat, 15, 30);\r\n        this.pageImageCat.first({ image: this.current.id });\r\n    };\r\n\r\n    //图片分类--SHOW\r\n    showCat = async (param: any) => {\r\n        let { id, name } = param\r\n        let pageCat = new QueryPager(this.uqs.webBuilder.SearchCat, 15, 30);\r\n        pageCat.first({ parent: param });\r\n        let pageCats = { pageCat, id, name }\r\n        this.openVPage(VCat, pageCats)\r\n    }\r\n\r\n    showCatImage = async (cat: any) => {\r\n        await this.searchCatImage(\"\", cat);\r\n        this.openVPage(VCatImage, cat);\r\n    }\r\n\r\n    searchCatImage = async (key: any, cat: any) => {\r\n        this.pageCatImage = new QueryPager(this.uqs.webBuilder.SearchCatImage, 15, 30);\r\n        this.pageCatImage.first({ key: key, cat: cat });\r\n    };\r\n\r\n\r\n    //轮播图\r\n    showSlideShow = async () => {\r\n        await this.searchSlideShow();\r\n        this.openVPage(VSlideShow);\r\n    }\r\n\r\n    searchSlideShow = () => {\r\n        this.pageSlideShow = new QueryPager(this.uqs.webBuilder.SearchSlideShow, 15, 30);\r\n        this.pageSlideShow.first({});\r\n    }\r\n\r\n\r\n    pickImage = async () => {\r\n        this.searchMadiaKey(\"\", MadiaType.IAMGE);\r\n        return await this.vCall(VPickImage);\r\n    };\r\n\r\n    onPickedImage = async (image: any) => {\r\n        this.closePage();\r\n        await this.uqs.webBuilder.UpdateSlideShow.submit({ image: image, caption: undefined, description: undefined, src: undefined, types: 0, sort: 1 })\r\n        await this.searchSlideShow();\r\n    };\r\n\r\n    delSlideShow = async (image: any) => {\r\n        //await this.uqs.webBuilder.SlideShow.del({ image: image.id, arr1: [{}] })\r\n        await this.uqs.webBuilder.DeleteSlideShow.submit({ _image: image.id });\r\n        await this.searchSlideShow();\r\n    }\r\n\r\n    showEditSlideShow = (param: any) => {\r\n        this.openVPage(VEditSlideShow, param);\r\n    }\r\n    updateSlideShow = async (image: any, caption: any, description: any, src: any, types: any, sort: any) => {\r\n        let type = types ? 1 : 0;\r\n        await this.uqs.webBuilder.UpdateSlideShow.submit({ image: image, types: type, caption: caption, description: description, src: src, sort: sort })\r\n        await this.searchSlideShow();\r\n    }\r\n\r\n    //其他文件\r\n    //搜索其他文件\r\n    searcFileKey = async (key: string, types: number) => {\r\n        this.pageFile = new QueryPager(this.uqs.webBuilder.SearchImage, 15, 30);\r\n        this.pageFile.first({ key: key, types: types });\r\n    };\r\n    //显示其他文件列表\r\n    showOtherMedia = async () => {\r\n        await this.searcFileKey(\"\", MadiaType.NOTIMAGE);\r\n        this.openVPage(VFile);\r\n    }\r\n    //显示其他文件\r\n    addAddFile = () => {\r\n        this.openVPage(VAddFile);\r\n    }\r\n    //删除文件\r\n    delFile = async (id: number) => {\r\n        this.current = await this.uqs.webBuilder.Image.save(id, { isValid: 0 });\r\n        await this.searchMadiaKey(\"\", MadiaType.NOTIMAGE);\r\n    };\r\n    //编辑文件\r\n    editFile = async (id: number) => {\r\n        this.current = await this.uqs.webBuilder.Image.load(id);\r\n        this.openVPage(VFileEdit);\r\n    }\r\n\r\n\r\n    tab = () => {\r\n        return <this.render />;\r\n    };\r\n\r\n    openMainPage = async () => {\r\n        await this.searchMadiaKey('', 1);\r\n        this.openVPage(VMain);\r\n    }\r\n}\r\n","import { en, zh } from \"./en\";\r\n\r\nexport const res = {\r\n    $zh: zh,\r\n    $en: en,\r\n}\r\n","export const en = {\r\n    post: 'Post',\r\n    noposts: 'None',\r\n    editorpost: 'Edit',\r\n    searchpost: 'Search post',\r\n    postdetailed: 'Detail',\r\n    title: 'Title',\r\n    describe: 'Describe',\r\n    content: 'Content',\r\n\r\n    publish: 'Publish',\r\n    productpublish: 'Publish For Product',\r\n    selectproduct: 'Select Product',\r\n    ordinarypublish: 'Publish Fro Ordinary',\r\n    noproduct: \"No Product\",\r\n\r\n\r\n    sales: 'Internal Sales',\r\n    agent: 'ight Agent',\r\n    privateSite: 'Private Site',\r\n    publicSite: 'Public Site',\r\n    internationSite: 'Internation Site',\r\n\r\n    sourcecode: 'Code',\r\n    picture: 'Picture',\r\n    searchpicture: 'Search picture',\r\n    selectpicture: 'Select picture',\r\n    editorpicture: 'Editor picture',\r\n    nopicture: 'No picture',\r\n    uploadpicture: 'Upload picture',\r\n    uploadfile: 'Upload audio',\r\n\r\n    template: 'Template',\r\n    selecttemplate: 'Select template',\r\n    notemplate: 'No template',\r\n    preview: 'Preview',\r\n\r\n    page: 'Page',\r\n    name: 'Name',\r\n    editorpage: 'Editor page',\r\n    sort: 'Sort',\r\n    module: 'Mdule',\r\n    editorsubmodule: 'Editor Sub module',\r\n    mymodule: 'My module',\r\n\r\n    me: 'Me',\r\n    tag: 'Tag',\r\n    set: 'Set',\r\n    logout: 'Logout',\r\n    about: 'About',\r\n    password: 'Password',\r\n    account: 'Account',\r\n    version: 'Version',\r\n    privacypolicy: 'Privacy policy',\r\n    personalinformation: 'Personal information',\r\n    headportrait: 'Head Portrait',\r\n\r\n    all: 'All',\r\n    submit: 'Submit',\r\n    select: 'Select',\r\n    save: 'Save',\r\n    copy: 'Copy',\r\n    copysuccess: 'Copy Success',\r\n    editor: 'Editor',\r\n    pleaseselect: 'Please select',\r\n\r\n    veryimport: 'Very Import',\r\n    general: 'General'\r\n}\r\n\r\nexport const zh = {\r\n\r\n    post: '帖文',\r\n    noposts: '无帖文',\r\n    editorpost: '编辑帖文',\r\n    searchpost: '搜索帖文',\r\n    postdetailed: '帖文明细',\r\n    title: '标题',\r\n    describe: '描述',\r\n    content: '内容',\r\n    estimate: '评价',\r\n    publish: '发布',\r\n    productpublish: '产品发布',\r\n    selectproduct: '选择产品',\r\n    ordinarypublish: '普通发布',\r\n    noproduct: \"无产品\",\r\n\r\n    sales: '销售助手',\r\n    agent: '轻代理',\r\n    privateSite: '内部网页',\r\n    publicSite: '内容网站',\r\n    internationSite: '国际网站',\r\n\r\n    sourcecode: '源码',\r\n\r\n    picture: '图片',\r\n    searchpicture: '搜索图片',\r\n    selectpicture: '选择图片',\r\n    editorpicture: '编辑图片',\r\n    nopicture: '无图片',\r\n    uploadpicture: '上传图片',\r\n    uploadaudio: '上传音频',\r\n\r\n    template: '模板',\r\n    selecttemplate: '选择模板',\r\n    notemplate: '无模板',\r\n    preview: '预览',\r\n    link: '链接',\r\n\r\n    page: '网页',\r\n    name: '名称',\r\n    editorpage: '编辑网页',\r\n    sort: '排序',\r\n    module: '模块',\r\n    editorsubmodule: '编辑模块',\r\n    mymodule: '我的模块',\r\n\r\n    me: '我的',\r\n    tag: '标签',\r\n    set: '设置',\r\n    team: '团队',\r\n    myteam: '我的团队',\r\n    privatedetail: '个人明细',\r\n    logout: '退出登陆',\r\n    about: '关于',\r\n    password: '密码',\r\n    account: '账户信息',\r\n    version: 'Version',\r\n    privacypolicy: '隐私政策',\r\n    personalinformation: '个人信息',\r\n    headportrait: '头像',\r\n\r\n    all: '全部',\r\n    submit: '提交',\r\n    select: '选择',\r\n    save: '保存',\r\n    copy: '复制',\r\n    copysuccess: '复制成功',\r\n    editor: '编辑',\r\n    pleaseselect: '请选择',\r\n\r\n    timepublish: \"时间发布\",\r\n\r\n    veryimport: \"重要\",\r\n    general: \"普通\"\r\n}","import * as React from \"react\";\r\nimport _ from \"lodash\";\r\nimport { CUqBase } from \"../CBase\";\r\nimport { observable } from \"mobx\";\r\nimport { QueryPager, } from \"tonva\";\r\n\r\nimport { MadiaType } from \"configuration\";\r\n\r\n/* eslint-disable */\r\nexport class CPosts extends CUqBase {\r\n    @observable pagePosts: QueryPager<any>;\r\n    @observable pageMedia: QueryPager<any>;\r\n\r\n    protected async internalStart(param: any) { }\r\n\r\n    onScrollBottom = async () => {\r\n        await this.pagePosts.more();\r\n    };\r\n\r\n    searchMadiaKey = async (key: string) => {\r\n        this.pageMedia = new QueryPager(this.uqs.webBuilder.SearchImage, 15, 30);\r\n        this.pageMedia.first({ key: key, types: MadiaType.IAMGE });\r\n    };\r\n\r\n    onPickedImage = (id: number) => {\r\n        this.closePage();\r\n        this.returnCall(this.uqs.webBuilder.Image.boxId(id));\r\n    };\r\n}","import { nav, UserCache, } from 'tonva';\r\n// import { UQs } from 'uqs';\r\nimport { VMain } from 'VMain';\r\nimport { CUqApp } from 'CBase'\r\nimport { WebUser } from 'currentUser';\r\nimport { CMe } from 'me/CMe';\r\nimport { CLordScreen } from 'lordScreen/CLordScreen';\r\nimport { CProduct } from 'product/CProduct';\r\nimport { CGenre } from 'pointShop/CGenre';\r\nimport { CPointProduct } from 'pointShop/CPointProduct';\r\nimport { CLottery } from 'pointShop/CLottery';\r\nimport { CReport } from 'report/CReport';\r\nimport { GLOABLE } from 'configuration';\r\nimport { CMedia } from 'media/CMedia';\r\nimport { res } from 'res';\r\nimport { CPosts } from 'posts/CPosts';\r\n// import { CMedia } from 'media-ng-07/src';\r\n\r\nexport class CPointShopMsApp extends CUqApp {\r\n    // get uqs(): UQs { return this._uqs; }\r\n\r\n    topKey: any;\r\n    currentSalesRegion: any;\r\n    currentLanguage: any;\r\n    currentUser: WebUser;\r\n    cLordScreen: CLordScreen;\r\n    cMe: CMe;\r\n    cGenre: CGenre;\r\n    cProduct: CProduct;\r\n    cPointProduct: CPointProduct;\r\n    cLottery: CLottery;\r\n    cReport: CReport;\r\n    cMedia: CMedia;\r\n    cPosts: CPosts;\r\n\r\n    private userCache: UserCache<any>;\r\n    protected async internalStart() {\r\n\r\n        let { uqs } = this;\r\n        let { common } = uqs;\r\n        let { SalesRegion, Language } = common;\r\n        let [currentSalesRegion, currentLanguage] = await Promise.all([\r\n            SalesRegion.load(GLOABLE.SALESREGION_CN),\r\n            Language.load(GLOABLE.CHINESE),\r\n        ]);\r\n        this.currentSalesRegion = currentSalesRegion;\r\n        this.currentLanguage = currentLanguage;\r\n\r\n        this.setRes(res);\r\n        let userLoader = async (userId: number): Promise<any> => {\r\n            let model = await this.uqs.hr.SearchEmployeeByid.query({ _id: userId });\r\n            return model?.ret?.[0];\r\n        }\r\n        this.userCache = new UserCache(userLoader);\r\n\r\n\r\n        this.currentUser = new WebUser(this.uqs);\r\n        if (this.isLogined) {\r\n            this.currentUser.setUser(this.user);\r\n        }\r\n        this.cLordScreen = this.newC(CLordScreen);\r\n        this.cMe = this.newC(CMe);\r\n        this.cProduct = this.newC(CProduct);\r\n        await this.cProduct.getProductLibrary();\r\n        this.cPointProduct = this.newC(CPointProduct);\r\n        this.cGenre = this.newC(CGenre);\r\n        await this.cGenre.getProductGenres();\r\n        this.cLottery = this.newC(CLottery);\r\n        this.cReport = this.newC(CReport);\r\n        this.cMedia = this.newC(CMedia);\r\n        this.cPosts = this.newC(CPosts);\r\n        this.topKey = nav.topKey();\r\n\r\n        // this.cLottery.openLotteryProduct();\r\n        // this.cReport.openPointsDist();\r\n        // this.cReport.openProductViews();\r\n        // this.cProduct.openCreationProduct();\r\n        this.showMain();\r\n    }\r\n\r\n    showMain(initTabName?: string) {\r\n        this.openVPage(VMain, initTabName);\r\n    }\r\n\r\n    renderUser(userId: number) {\r\n        let val = this.userCache.getValue(userId);\r\n        switch (typeof val) {\r\n            case 'undefined':\r\n            case 'number':\r\n                return userId;\r\n        };\r\n        return val.name;\r\n    }\r\n\r\n    useUser(userId: number) {\r\n        this.userCache.use(userId);\r\n    }\r\n}\r\n","import * as React from 'react';\nimport './App.css';\nimport { NavView, start, nav } from 'tonva';\nimport { CPointShopMsApp } from \"CPointShopMsApp\";\nimport { appConfig } from 'configuration';\n\nnav.setSettings(appConfig);\nclass App extends React.Component {\n\n  private onLogined = async () => {\n    await start(CPointShopMsApp, appConfig);\n  }\n\n  public render() {\n    return <NavView onLogined={this.onLogined} /> /* notLogined={this.onLogined} */\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n  // [::1] is the IPv6 localhost address.\r\n  window.location.hostname === '[::1]' ||\r\n  // 127.0.0.1/8 is considered localhost for IPv4.\r\n  window.location.hostname.match(\r\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n  )\r\n);\r\n\r\nexport default function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n            'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAABGCAYAAACQRffVAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAF8mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjAtMDUtMjlUMTU6MDY6MzgtMDQ6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIwLTA1LTI5VDE3OjE4OjM2LTA0OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIwLTA1LTI5VDE3OjE4OjM2LTA0OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmE3ZjJlZGZmLTlkMzUtNDBiNy1hNmRhLTNlNDZjZWMwOWJiZiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3ZmY0N2IxZC1mZmYwLTQ3ZWMtYjVhNS1hZDZkOGNkY2Y2MzEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3ZmY0N2IxZC1mZmYwLTQ3ZWMtYjVhNS1hZDZkOGNkY2Y2MzEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjdmZjQ3YjFkLWZmZjAtNDdlYy1iNWE1LWFkNmQ4Y2RjZjYzMSIgc3RFdnQ6d2hlbj0iMjAyMC0wNS0yOVQxNTowNjozOC0wNDowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmE3ZjJlZGZmLTlkMzUtNDBiNy1hNmRhLTNlNDZjZWMwOWJiZiIgc3RFdnQ6d2hlbj0iMjAyMC0wNS0yOVQxNzoxODozNi0wNDowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+BVuKlQAACWlJREFUeJzlm32QVlUdxz/Pw8MuLAgIsiAvusKAxC6p1JBoYhKCVtSgGGSWOaKCFjKppJjNOFraCxVaEwUiE5ZCmQahEVC8hLptqEWstpBAA4jBKiDs6i672x/fe3nuc577cu7zXJxl+MzsPPece86553vvefmd3zmbqq6o5OQiVWjGjwK3ZhKsyQdEGwWKXggMTydbmXbLIOA8YMmpIvi7zu8rp4LgjwCTnesXTwXBjzi/e4EtJ6ngNtuEVwAXOdcvAE0nqWBrFnuuVwHEmZY6Af3Q620DdsbIexaaS0qAfcC7TvwZTrlnopF0H1ADdAbqY5Tvx/eAPp7waogn+BHgeiR2E/BJ434K/7Y2CfgV2clzMBJ8F3A3UAp0ce7d51SyJ7AOeD1G/byc45Tv8gqwCyBOk56EvlAp8Jon/gb09o4Aa4GbjHyfRl+sE1CLBo9Z6Av0RGLrgIHABmCCU6/+Mepm8hsjvMy9sBVciZqfyzPO77eARcA4YBswFvgFaqIuF3qun0Zif+SJWwmMBHYDrcB24G3gv8HVCbW0HkBTkZelx3Na2tLTgZ85128j8V3I9sVrURPc64TLgf1ABfCGp4a7gQGech8C5hjPKgE6AkeDqxMo+GPAS0bcKjRaA/ZfeLznugb11SNAgxM3B9jqXH8BiQW42KidVyzAoz7PaqIwsWWotZj81BuwEdwZuNQTft75vcypHEAV+uKjgac8aT8RUfbtFs/3ENqUnwV6GXF7gRXeCFNwN2AIMBH4shPXHw0uLr8DZgJ/Bnp44g87+V4n22cuNsp/EfV1l6lhCnIJFfsgcLlP/HwzwhR8PRoxlzuFgAYZl7+iIX+eE54EXEC2X88BzkX9pgz4kCfvcmT1/METdza5g1oAoWInA/f6xDeRHXeOYwo+3XPdHdgI3OaJu4/c/nwEfdHtRjkHgc94wo3ANc61ObdeQyihYoeSPwW5zAMOmJGm4PWe627Axz3hhWgk3u+JW43EjDLK+Ry5/fMNsv3dHEW/Tn7fs6ED8MeAe8eAb/vdMC2t9cB1aBoqd+K2AkvIzr3znHxj0Xx7AFkyj6E+Owi1hC+RHeC8L7IWWVgdnXAZMkp8CP2661D38uPHwCHfEtu3TytQ8ELgxoB7jWg8aUAtJ8cmb6erpRQhYucTLBZgGhL7T2SI5NAOBYc24zuAW0Luvwb8Gr2UEUC1maCdCQ4VOxP4QUQBo5A79hYkPm+JGSI4ZfydaEKfcS/ZuT+I2Wia3OCE1/olytiL8aazdrHELNeXnwM3R6R5AXgS2QOdnbggwYUQtNaPky9SaAp4HFl/YexAfXYFci6AlplJCnbrE0d0yvgNpQvwHDDGIu1BZNIO88StJbt0zSFq0LodeSACiOrfBY0BlcDL2IkF2fLDjLjHghKHCV6JLJaW6Geaggoe6KYgq21oIZkdDqGloi9+gtPIFPwUWh2tsXtO0SP6/Wgt3TEqYQTzgfeDbvr14fVkFw2Li3y4DecgU3FsQuWFTl/mF55NVmwz1l+3YKYgEzApsYuBN8MSpKorqtzrM8k64UCrmhO1suiF/NzXJlhmM1o0HA5L5P3CM417hTrBo7gOmX1JigWYQYRYyAouJd8oN70YxTISOQyWAL0TLnsl2t24NCqhK/hCct07kJwBfR5y1m9GDvuk2Y/cRDVoFyQUV3DeupFkVlL3A6/aVKRADqKu8RByFT8RlcGdlob73Aucy2IwIoEygmgGfgtcjVxS76BFRCjuVzzX514fn7i4XIUceqbjLglakWd0uhNeRnYnJBBXsJ8BUuUTVwjL0Y7EVLS3lBSlQF9PeIFNJlew38piBLk7C8WyFL3EZVEJC2ANGhQjSSN36iCfe2XAZxOsFMiwnwLMTbjcGbYJ08Av0ZaHH9MD4k06oz2pkWilc1pE+jvRhngSzCXX0xFKmvCOPprwuXM8MvzrkCm6GVlRdWhX4AaCp7dvkPU/Fco29PIeQN7KSNIhFXJZhLY1vHRDc94q5CMeQHbgS6PBZIKTtw51Gz+uovDp7wDyUN4GfBNLyzBN6NECQGcvnvSEzwf+DnzRsmKDUbdZ5HOvHjkZ4nIULQPvAX7ixFmNCx1u6lF+NTqaEEYl0BUtvTaRe4bDlgvQVGI612rQsjSOKdsEfBi40gk/Q4hbx0ua3A3qMO4EtiDhhXIP+fP7IeBPMcvpis6MuTxsmzGN3vAHySyfuOeKKG8T8DfbxGl0hOFYEQ88TiqToaWhgfd27qRp75vQ1gapvDFxIvnNt5i1t3kuLJQ0GmVbi3ggAKlMB5re+h/p0lL6TvtK9ekTxl3S0tCwlLa8osvRnO1lF4W99AXkHpKLJI2O6JUU8LAcjtW/Q6ezB3D+hucZuuDRwZXLnxrSb8a0qY07t93hk7zCCNejfaE47CJ6CyaPNHKiFU1rcxOZXr3I9O4NcEbLkSM3H36ppmemaw/zbBbk7863Em8b4wA6EhVl0eWRQQt0W69h4H9YlPTpQ8O/atlcOYqyquFNzfve6n10S+2u0rMGdm071uxN+hfnmV7Kke1uwx7k4bjVyfNVy3yAvvDGGOnfRd7GreaNtpYWMt2709LQyMG160oa/7NjcOnA/q7YFmSVTUIv17SuKtAcbcMeNL3dhYWHwyRVXVHVySmkZ1Ri1PRcM3McMh+vJNqdW0/u4VSTmUTv/5psRqZlLNLAe2T/68Mm/Wjneg16yyMJPRsJqOmFWWe2G2deZhWQ5/jCYT4Bx3x8MI8TNiFbOYxDBI/CaUJ3KH15Gu17xcYVfDf2g4afU+A7EXn2ELBfiwadOOZqCzEW/Cau4Frsd+0uIf/k3W50GC2IIHt9GPbdyWUyuacBY+EKfoKAIwIBfN8n7kG0bPTjcZ+4icgGDjiF58vDhOz92uA1dKfgcxgzgDH4e0LG4+/FGIF2IC5Cno6NyJsZx3CYi6ajovDuHoL808+Sf4TAj33o33OajfgbkdsnSX6IDqUVjbmU+TfO//dY0Jf85jUb48h9kbQBXyMhsSCPhxlXiv1J9SHoK6fR1DaNok4G5fAPtLPw+4TKA/KbtMvl6LyFjfWVNPVocyxp3zUQ7LFcjXxGKwLunwh2oKY7jBMkFsKb3x5kZFwBfB5ZQ/1C0hfCdmQxLUN+7CTPNPoS1KT9OA15HiuRI841VI6ig2SvIu//GDTaD0XjQRq92PeRV6MOzdcvO78W58CS4/9wHebwFytHEwAAAABJRU5ErkJggg==\""],"sourceRoot":""}