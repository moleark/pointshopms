(this.webpackJsonppointshopms=this.webpackJsonppointshopms||[]).push([[0],{163:function(e,t,r){e.exports=r(265)},170:function(e,t,r){},171:function(e,t,r){},265:function(e,t,r){"use strict";r.r(t);var n,a,c,i,o,s,u,l,p=r(0),m=r.n(p),d=r(33),f=r.n(d),b=(r(168),r(169),r(170),r(1)),h=r.n(b),v=r(2),g=r(7),w=r(11),y=r(10),x=r(9),j=(r(171),r(3)),O=r(158),P=function(e){return!0===e?"text-primary":"text-muted"},E=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).render=function(t){var r=e.controller,n=r.cMe,a=[{name:"home",label:"\u9996\u9875",icon:"home",content:r.cProduct.tab,notify:void 0},{name:"me",label:"\u6211\u7684",icon:"user",content:n.tab}].map((function(e){var t=e.name,r=e.label,n=e.icon;return{name:t,caption:function(e){return Object(j.TabCaptionComponent)(r,n,P(e))},content:e.content,notify:e.notify}}));return p.createElement(j.Page,{header:!1,tabsProps:{tabs:a}})},e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.render);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(j.VPage),k=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){return Object(g.a)(this,r),t.apply(this,arguments)}return Object(w.a)(r,[{key:"cApp",get:function(){return this._cApp}},{key:"uqs",get:function(){return this._uqs}}]),r}(j.CBase),N=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){return Object(g.a)(this,r),t.apply(this,arguments)}return Object(w.a)(r,[{key:"newC",value:function(e){var t=new e(this);return t.init(),t}},{key:"uqs",get:function(){return this._uqs}}]),r}(j.CAppBase),C=r(5),S=r(6),I=(r(18),r(4)),A=(n=function(){function e(t){var r=this;Object(g.a)(this,e),this.id=void 0,this.name=void 0,this.nick=void 0,this.icon=void 0,this.guest=void 0,this.token=void 0,Object(C.a)(this,"firstName",a,this),this.gender=void 0,this.salutation=void 0,Object(C.a)(this,"organizationName",c,this),this.departmentName=void 0,this.telephone=void 0,Object(C.a)(this,"mobile",i,this),this.email=void 0,this.fax=void 0,this.address=void 0,this.addressString=void 0,this.zipCode=void 0,this._user=void 0,this.webUserSettings=void 0,this.uqs=void 0,this.setUser=function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=10;break}return r._user=t,r.id=t.id,r.name=t.name,r.nick=t.nick,r.icon=t.icon,r.guest=t.guest,r.token=t.token,e.next=10,r.loadWebUser();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.uqs=t}return Object(w.a)(e,[{key:"loadWebUser",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t,r,n,a,c,i,o,s,u,l,p,m,d,f,b;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.id,void 0===this._user){e.next=16;break}return e.next=4,this.uqs.webuser.WebUser.load(t);case 4:return(r=e.sent)&&(n=r.firstName,a=r.gender,c=r.salutation,i=r.organizationName,o=r.departmentName,this.firstName=n,this.gender=a,this.salutation=c,this.organizationName=i,this.departmentName=o),e.next=8,this.uqs.webuser.WebUserContact.obj({webUser:this.id});case 8:return(s=e.sent)&&(u=s.telephone,l=s.mobile,p=s.email,m=s.fax,d=s.address,f=s.addressString,b=s.zipCode,this.telephone=u,this.mobile=l,this.email=p,this.fax=m,this.address=d,this.addressString=f,this.zipCode=b),e.next=12,this.uqs.webuser.WebUserSetting.obj({webUser:this.id});case 12:if(e.t0=e.sent,e.t0){e.next=15;break}e.t0={webUser:this.id};case 15:this.webUserSettings=e.t0;case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getContacts",value:function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uqs.webuser.WebUserContacts.table({webUser:this.id});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addContact",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uqs.webuser.WebUserContacts.add({webUser:this.id,arr1:[{contact:t}]});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delContact",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uqs.webuser.WebUserContacts.del({webUser:this.id,arr1:[{contact:t}]});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSetting",value:function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.webUserSettings);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setDefaultShippingContact",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.webUserSettings.shippingContact=t,this.saveDefaultSettings();case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setDefaultInvoiceContact",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.webUserSettings.invoiceContact=t,this.saveDefaultSettings();case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setDefaultInvoice",value:function(){var e=Object(v.a)(h.a.mark((function e(t,r){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.webUserSettings.invoiceType=t,this.webUserSettings.invoiceInfo=r,this.saveDefaultSettings();case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"saveDefaultSettings",value:function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uqs.webuser.WebUserSetting.add(this.webUserSettings);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"changeWebUser",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.uqs.webuser.WebUser.save(this.id,t);case 2:return e.next=4,this.loadWebUser();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changeWebUserContact",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.webUser=this.id,e.next=3,this.uqs.webuser.WebUserContact.add(t);case 3:return e.next=5,this.loadWebUser();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isLogined",get:function(){return void 0!==this._user}}]),e}(),a=Object(S.a)(n.prototype,"firstName",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=Object(S.a)(n.prototype,"organizationName",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=Object(S.a)(n.prototype,"mobile",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),n),L=r(8),B=r(159),D=r(14);function G(e){return e&&!/^[0-9]+$/.test(e)?"\u79ef\u5206\u683c\u5f0f\u4e0d\u6b63\u786e\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01":void 0}function z(e){return e&&e.length>10?"\u7c7b\u578b\u6700\u591a10\u4e2a\u5b57\uff01":void 0}function U(e){var t=Number(e);return isNaN(t)?"\u6298\u6263\u683c\u5f0f\u4e0d\u6b63\u786e,\u8bf7\u91cd\u65b0\u8f93\u5165\uff01":t>=0&&t<=100?void 0:"\u6298\u6263\u767e\u5206\u6bd4\u8303\u56f4 0 ~ 100"}var V=(o=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(e){var n;Object(g.a)(this,r),(n=t.call(this,e)).schema=[{name:"nick",type:"string"},{name:"icon",type:"image"}],n.uiSchema={items:{nick:{widget:"text",label:"\u522b\u540d",placeholder:"\u597d\u7684\u522b\u540d\u66f4\u65b9\u4fbf\u8bb0\u5fc6"},icon:{widget:"image",label:"\u5934\u50cf"}}},Object(C.a)(n,"data",s,Object(L.a)(n)),Object(C.a)(n,"webUserData",u,Object(L.a)(n)),Object(C.a)(n,"webUserContactData",l,Object(L.a)(n)),n.onItemChanged=function(){var e=Object(v.a)(h.a.mark((function e(t,r,a){var c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.name,e.next=3,j.userApi.userSetProp(c,r);case 3:n.data[c]=r,j.nav.user[c]=r,j.nav.saveLocalUser();case 6:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),n.onWebUserChanged=function(){var e=Object(v.a)(h.a.mark((function e(t,r,a){var c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.name,n.webUserData[c]=r,e.next=4,n.controller.changeWebUser(n.webUserData);case 4:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),n.onWebUserContactChanged=function(){var e=Object(v.a)(h.a.mark((function e(t,r,a){var c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.name,n.webUserContactData[c]=r,e.next=4,n.controller.changeWebUserContact(n.webUserContactData);case 4:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),n.page=function(){var e=Object(L.a)(n),t=e.schema,r=e.uiSchema,a=e.data,c=e.onItemChanged;return p.createElement(j.Page,{header:"\u4e2a\u4eba\u4fe1\u606f"},p.createElement(j.Edit,{schema:t,uiSchema:r,data:a,onItemChanged:c}))};var a=j.nav.user,c=a.nick,i=a.icon;n.data={nick:c,icon:i};var o=n.controller.cApp.currentUser,m=o.firstName,d=o.gender,f=o.salutation,b=o.organizationName,w=o.departmentName,y=o.telephone,x=o.mobile,O=o.email,P=o.fax,E=o.zipCode,k=o.address,N=o.addressString;return n.webUserData={firstName:m,gender:d,salutation:f,organizationName:b,departmentName:w},n.webUserContactData={telephone:y,mobile:x,email:O,fax:P,address:k,addressString:N,zipCode:E},n}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(j.VPage),s=Object(S.a)(o.prototype,"data",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=Object(S.a)(o.prototype,"webUserData",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=Object(S.a)(o.prototype,"webUserContactData",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o);var F=r(71),T=r.n(F),M=function(e){return p.createElement(p.Fragment,null," ",e.chineseName," ")},R={appName:"\u767e\u7075\u5a01\u7cfb\u7edf\u5de5\u7a0b\u90e8/pointshopms",version:"1.0.3",tvs:{webuser:{webuser:function(e){var t=e.firstName,r=e.salutation,n=e.organizationName,a=e.departmentName;return p.createElement(p.Fragment,null,p.createElement("div",{className:"mr-3"},p.createElement("strong",null,t)," ",p.createElement("span",{className:"small"},r)),p.createElement("div",{className:"small text-muted"},n," \xa0",a))}},common:{address:function(e){var t=e.country,r=e.province,n=e.city,a=e.county;return p.createElement(p.Fragment,null,Object(j.tv)(t),Object(j.tv)(r,void 0,void 0,(function(){return p.createElement(p.Fragment,null)})),Object(j.tv)(n,void 0,void 0,(function(){return p.createElement(p.Fragment,null)})),Object(j.tv)(a,void 0,void 0,(function(){return p.createElement(p.Fragment,null)})))},country:M,province:M,city:M,county:M,currency:function(e){return p.createElement(p.Fragment,null," ",e.name," ")}}},loginTop:p.createElement("div",{className:"d-flex align-items-center position-relative"},p.createElement("img",{className:"h-3c position-absolute",src:T.a,alt:"\u767e\u7075\u5a01"}),p.createElement("div",{className:"h3 flex-fill text-center"},p.createElement("span",{className:"text-primary mr-3"},"\u767e\u7075\u5a01"))),oem:"\u767e\u7075\u5a01"},q=1,W=2,H=0,Z=!0===j.env.testing?{CHINA:43,CHINESE:197,SALESREGION_CN:4,TIPDISPLAYTIME:3e3,CONTENTSITE:"https://c.jkchemical.com/jk-web",JD:"https://c.jkchemical.com/joint/jd"}:{CHINA:44,CHINESE:196,SALESREGION_CN:1,TIPDISPLAYTIME:3e3,CONTENTSITE:"https://web.jkchemical.com",JD:"https://joint.jkchemical.com/jd"},Y=p.createElement("div",{className:"text-danger ml-1"},"( \u6b63\u5728\u5f00\u53d1\u4e2d... )"),K=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).changePassword=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.nav.changePassword();case 2:case"end":return e.stop()}}),e)}))),e.openProuctGenre=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.openProductGenre();case 2:case"end":return t.stop()}}),t)}))),e.openBrandDiscount=Object(v.a)(h.a.mark((function t(){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.controller.cApp,t.next=3,r.cBrandDiscount.openBrandDiscount();case 3:case"end":return t.stop()}}),t)}))),e.openLottery=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),e.openProductViews=Object(v.a)(h.a.mark((function t(){var r,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.controller.cApp,n=r.cReport,t.next=4,n.openProductViews();case 4:case"end":return t.stop()}}),t)}))),e.openPointsDist=Object(v.a)(h.a.mark((function t(){var r,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.controller.cApp,n=r.cReport,t.next=4,n.openPointsDist();case 4:case"end":return t.stop()}}),t)}))),e.meInfo=Object(D.observer)((function(){var t=j.nav.user;if(void 0===t)return null;var r=t.id,n=t.name,a=t.nick,c=t.icon;return p.createElement(j.LMR,{className:"py-2 cursor-pointer w-100",left:p.createElement(j.Image,{className:"w-3c h-3c mr-3",src:c}),right:p.createElement(j.FA,{className:"align-self-end",name:"angle-right"}),onClick:function(){e.openVPage(V)}},p.createElement("div",null,p.createElement("div",null,Q(n,a)),p.createElement("div",{className:"small"},p.createElement("span",{className:"text-muted"},"ID:")," ",r>1e4?r:String(r+1e4).substr(1))))})),e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"exit",value:function(){j.nav.showLogout()}},{key:"render",value:function(){var e,t=j.nav.user,r=["",{type:"component",component:p.createElement("div",{className:"w-100 d-flex justify-content-between"},p.createElement(j.IconText,{iconClass:"text-info mr-2",icon:"smile-o",text:"\u5173\u4e8e\u672cAPP"}),p.createElement("div",{className:"py-2 small"},"V",R.version))}];if(void 0===t)(e=r).push({type:"component",component:p.createElement("button",{className:"btn btn-success w-100 my-2",onClick:function(){return j.nav.showLogin(void 0,!0)}},p.createElement(j.FA,{name:"sign-out",size:"lg"})," \u8bf7\u767b\u5f55")});else{var n,a=["",{type:"component",bk:"",component:p.createElement("button",{className:"btn btn-danger w-100",onClick:this.exit},p.createElement(j.FA,{name:"sign-out",size:"lg"})," \u9000\u51fa\u767b\u5f55")}];(n=e=["",{type:"component",component:p.createElement(this.meInfo,null)},"",{type:"component",component:p.createElement(j.IconText,{iconClass:"text-info mr-2",icon:"th-large",text:"\u5546\u54c1\u7c7b\u578b"}),onClick:this.openProuctGenre},{type:"component",component:p.createElement(j.IconText,{iconClass:"text-info mr-2",icon:"th-large",text:"\u54c1\u724c\u6298\u6263"}),onClick:this.openBrandDiscount},{type:"component",component:p.createElement(p.Fragment,null,p.createElement(j.IconText,{iconClass:"text-info mr-2",icon:"life-ring",text:"\u62bd\u5956\u5546\u54c1"}),Y),onClick:this.openLottery},"",{type:"component",component:p.createElement(p.Fragment,null,p.createElement(j.IconText,{iconClass:"text-info mr-2",icon:"eye",text:"\u6d4f\u89c8\u91cfPV"})),onClick:this.openProductViews},{type:"component",component:p.createElement(p.Fragment,null,p.createElement(j.IconText,{iconClass:"text-info mr-2",icon:"cubes",text:"\u79ef\u5206\u5206\u5e03"})),onClick:this.openPointsDist},"",{type:"component",component:p.createElement(j.IconText,{iconClass:"text-info mr-2",icon:"key",text:"\u4fee\u6539\u5bc6\u7801"}),onClick:this.changePassword}]).push.apply(n,r.concat(a))}return p.createElement(p.Fragment,null,p.createElement(j.PropGrid,{rows:Object(B.a)(e),values:{}}))}}]),r}(j.VPage);function Q(e,t){return t?p.createElement(p.Fragment,null,p.createElement("b",null,t," \xa0 ",p.createElement("small",{className:"muted"},e))):p.createElement("b",null,e)}var J=r(43),X="https://www.jkchemical.com/static/Structure/999.png",_="http://img13.360buyimg.com/";function $(e){var t=e.style,r=e.className,n=e.chemicalId;return n&&n.startsWith(_)?p.createElement("img",{src:n,alt:"",className:"w-100"}):(n&&/[0-9]$/.test(n)&&(n="https://www.jkchemical.com/static/images/pointshop/"+n+".png"),p.createElement(j.Image,{src:n&&n,style:t,className:r,altImage:X}))}var ee,te,re,ne,ae,ce,ie,oe,se,ue,le,pe,me,de,fe,be,he,ve,ge,we=r(160),ye=r(50),xe=r(13),je=r.n(xe),Oe=[107,109,110,187,189],Pe=(ee=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(C.a)(e,"value",te,Object(L.a)(e)),Object(C.a)(e,"disabled",re,Object(L.a)(e)),e.minusClick=function(){var t=e.getValue();t||(t=0),e.setValue(t-1)},e.plusClick=function(){var t=e.getValue();t||(t=0),e.setValue(t+1)},e.ref=function(t){var r;if(e.input=t,null!==e.input)for(r=e.input;r;r=r.parentElement)if("FIELDSET"===r.tagName){!0===r.disabled&&(e.disabled=!0);break}},e.renderContent=Object(D.observer)((function(){var t=e.renderTemplet();if(void 0!==t)return t;var r={};!0===e.hasError?r["is-invalid"]=!0:r["required-item"]=!0===e.itemSchema.required;var n,a,c,i,o,s=e.hasFocus,u=!0!==e.readOnly&&!0!==e.disabled,l=!1===isNaN(e.value)&&void 0!==e.value&&e.value>0;!0===e.disabled?(n="cursor-pointer",a=i="text-light"):(c=e.minusClick,o=e.plusClick,a="text-danger-2",i="text-danger");var m=p.createElement("i",{className:je()("fa","fa-minus-circle","fa-lg",a,n,{invisible:!(!0===s||!0===u&&!0===l)}),onClick:c}),d=p.createElement("input",{ref:e.ref,className:je()(e.className,r,"mx-1 w-4c form-control",{invisible:!(!0===s||!0===l)}),type:"text",defaultValue:e.value,onChange:e.onChange,placeholder:e.placeholder,readOnly:e.readOnly,disabled:e.disabled,onKeyDown:e.onKeyDown,onFocus:function(t){return e.onFocus(t)},onBlur:function(t){return e.onBlur(t)},maxLength:10}),f=p.createElement("i",{className:je()("fa fa-plus-circle fa-lg",i,n,{invisible:!(!0===u)}),onClick:o});return p.createElement("div",{className:"d-flex align-items-center"},m,d,f,e.renderErrors())})),e}return Object(w.a)(r,[{key:"isValidKey",value:function(e){return void 0===Oe.find((function(t){return t===e}))&&Object(we.a)(Object(ye.a)(r.prototype),"isValidKey",this).call(this,e)}},{key:"onChange",value:function(e){}},{key:"render",value:function(){return p.createElement(this.renderContent,null)}}]),r}(j.UpdownWidget),te=Object(S.a)(ee.prototype,"value",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=Object(S.a)(ee.prototype,"disabled",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee),Ee=[{name:"id",type:"number"},{name:"descriptionC",type:"string"},{name:"quantity",type:"number"},{name:"imageUrl",type:"string"}],ke=(ne=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(C.a)(e,"isAddProduct",ae,Object(L.a)(e)),e.uiSchema={items:{id:{visible:!1},descriptionC:{visible:!1},quantity:{widget:"custom",label:null,className:"text-center",WidgetClass:Pe,onChanged:e.controller.onQuantityChanged},imageUrl:{visible:!1}}},e.delLotteryProducts=function(){var t=Object(v.a)(h.a.mark((function t(r,n){var a,c,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.controller,c=a.delLotteryProducts,i=a.getTotalPR,e.controller.lotteryProducts.splice(n,1),t.next=4,c(r);case 4:i();case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.renderLotteryProduct=function(t,r){var n=t.imageUrl,a=t.descriptionC;return p.createElement("div",{className:"row m-1 w-100"},p.createElement("div",{className:"col-4 m-auto p-0"},p.createElement($,{chemicalId:n,className:"w-100"})),p.createElement("div",{className:"col-8 small py-1 position-relative d-flex flex-column justify-content-between"},p.createElement("div",null,a),e.isAddProduct?null:p.createElement("div",{className:"d-flex justify-content-end pr-2 text-primary small position-absolute",style:{top:3,right:-3},onClick:function(){return e.delLotteryProducts(t,r)}},p.createElement(j.FA,{name:"trash",size:"2x"})),p.createElement("div",{className:"d-flex justify-content-between mt-2 p-0"},p.createElement("h5",{className:"align-self-center mb-3"},"\u6982\u7387",p.createElement("small",null,"(%)")),p.createElement(j.Form,{schema:Ee,uiSchema:e.uiSchema,formData:t,className:"mr-2"}))))},e.page=Object(D.observer)((function(){var t=e.controller,r=t.totalPR,n=t.lotteryProducts,a=t.openLotteryProductQueryLib,c=p.createElement("div",{className:"small mr-2",style:{color:"rgb(59,169,246)"},onClick:a},p.createElement(j.FA,{name:"plus-square-o",size:"2x"})),i=p.createElement("div",{className:"mt-3 text-secondary d-flex justify-content-center"},"\u300e \u65e0\u62bd\u5956\u5546\u54c1 \u300f");return p.createElement(j.Page,{header:"\u62bd\u5956\u5546\u54c1",right:c},p.createElement("div",{className:"py-2"},p.createElement("div",{className:"px-2 small"},"\u6982\u7387\u603b\u548c: ",p.createElement("span",{className:"text-danger h6"},r,"%")),p.createElement(j.List,{items:n,item:{render:e.renderLotteryProduct},none:i,className:"mt-2"})))})),e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(j.VPage),ae=Object(S.a)(ne.prototype,"isAddProduct",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ne),Ne=(ce=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(C.a)(e,"isAddProduct",ie,Object(L.a)(e)),e.page=Object(D.observer)((function(){var t=e.controller.QProductLib,r=p.createElement("div",{className:"mt-3 text-secondary d-flex justify-content-center"},"\u300e \u65e0\u5546\u54c1 \u300f");return p.createElement(j.Page,{header:"\u5546\u54c1\u5e93"},p.createElement("div",{className:"py-2"},p.createElement(j.List,{items:t,item:{render:e.renderLotteryProduct},none:r,className:"mt-2"})))})),e}return r}(ke),ie=Object(S.a)(ce.prototype,"isAddProduct",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ce),Ce=(oe=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(C.a)(e,"lotteryProducts",se,Object(L.a)(e)),Object(C.a)(e,"QProductLib",ue,Object(L.a)(e)),Object(C.a)(e,"productBase",le,Object(L.a)(e)),Object(C.a)(e,"totalPR",pe,Object(L.a)(e)),e.openLotteryProduct=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getLotteryProducts();case 2:e.getTotalPR(),e.openVPage(ke);case 4:case"end":return t.stop()}}),t)}))),e.openLotteryProductQueryLib=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getQProductLib();case 2:e.openVPage(Ne);case 3:case"end":return t.stop()}}),t)}))),e.getTotalPR=function(){var t=0;e.lotteryProducts.forEach((function(e){t+=e.quantity})),e.totalPR=t},e.getQProductLib=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.QProductLib=[{id:1,imageUrl:"1",descriptionC:"MUX\u503e\u529b\u6253\u9020\u7684\u77e2\u91cf\u56fe\u6807\u7ba1\u7406\u3001\u4ea4\u6d41\u5e73\u53f0\u3002"},{id:2,imageUrl:"1",descriptionC:"\u77e2\u91cf\u56fe\u6807\u7ba1\u7406\u3001\u4ea4\u6d41\u5e73\u53f0\u3002"},{id:3,imageUrl:"1",descriptionC:"\u4ea4\u6d41\u5e73\u53f0\u3002"}],e.QProductLib.forEach((function(t){var r,n=Object(J.a)(e.lotteryProducts);try{for(n.s();!(r=n.n()).done;){var a=r.value;a.id===t.id&&(t.quantity=a.quantity)}}catch(c){n.e(c)}finally{n.f()}}));case 2:case"end":return t.stop()}}),t)}))),e.getLotteryProducts=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.lotteryProducts=[];case 1:case"end":return t.stop()}}),t)}))),e.onQuantityChanged=function(){var t=Object(v.a)(h.a.mark((function t(r,n,a){var c,i,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=r.data,i=e.lotteryProducts.length,-1!==(o=e.lotteryProducts.findIndex((function(e){return e.id===c.id})))){t.next=7;break}i<e.productBase&&e.lotteryProducts.push(c),t.next=10;break;case 7:return t.next=9,e.delLotteryProducts(e.lotteryProducts[o]);case 9:e.lotteryProducts.splice(o,1,c);case 10:if(!(i<e.productBase)){t.next=13;break}return t.next=13,e.addLotteryProducts(c);case 13:e.getTotalPR();case 14:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),e.addLotteryProducts=function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.delLotteryProducts=function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e}return Object(w.a)(r,[{key:"internalStart",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(k),se=Object(S.a)(oe.prototype,"lotteryProducts",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ue=Object(S.a)(oe.prototype,"QProductLib",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),le=Object(S.a)(oe.prototype,"productBase",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8}}),pe=Object(S.a)(oe.prototype,"totalPR",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe),Se=[{name:"id",type:"id",required:!1},{name:"imageUrl",type:"image",required:!1},{name:"name",type:"string",required:!0}],Ie=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).currentGenre=void 0,e.form=void 0,e.uiSchema={items:{id:{visible:!1},imageUrl:{widget:"image",label:"\u56fe\u6807"},name:{widget:"text",label:"\u7c7b\u578b",placeholder:"\u5546\u54c1\u7c7b\u578b",rules:z},submit:{widget:"button",label:"\u63d0\u4ea4"}}},e.onSaveGenre=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.form){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.form.buttonClick("submit");case 4:case"end":return t.stop()}}),t)}))),e.onFormButtonClick=function(){var t=Object(v.a)(h.a.mark((function t(r,n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.onSaveGenre(n.form.data);case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.onDelGenre=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.vCall(Ae,e.currentGenre);case 2:if(t.t0=t.sent,!0!==t.t0){t.next=7;break}return t.next=6,e.controller.delGenre(e.currentGenre);case 6:e.closePage();case 7:case 8:case"end":return t.stop()}}),t)}))),e.page=Object(D.observer)((function(){var t=p.createElement(p.Fragment,null),r=p.createElement("button",{type:"button",className:"btn btn-primary w-100",onClick:e.onSaveGenre},"\u4fee\u6539");return p.createElement(j.Page,{header:"\u7c7b\u578b\u4fe1\u606f",footer:r,right:t},p.createElement("div",{className:"alert alert-warning m-0 py-1 small"},p.createElement(j.FA,{name:"exclamation-circle"})," \u70b9\u51fb\u56fe\u7247\u533a\u57df\u5373\u53ef\u66f4\u6362\u56fe\u6807"),p.createElement("div",{className:"App-container container text-left"},p.createElement(j.Form,{ref:function(t){return e.form=t},className:"mb-3",schema:Se,uiSchema:e.uiSchema,formData:e.currentGenre,onButtonClick:e.onFormButtonClick,fieldLabelSize:3})))})),e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.currentGenre=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(j.VPage),Ae=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).onConfirm=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.returnCall(!0);case 2:e.closePage();case 3:case"end":return t.stop()}}),t)}))),e.onCancel=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.returnCall(!1);case 2:e.closePage();case 3:case"end":return t.stop()}}),t)}))),e.page=function(t){return p.createElement(j.Page,{header:"\u5220\u9664\u7c7b\u578b",back:"close"},p.createElement("div",{className:"w-75 mx-auto border border-primary rounded my-3 p-3 bg-white"},p.createElement("div",{className:"text-center"},p.createElement(j.FA,{name:"exclamation-circle text-warning fa-2x"}),p.createElement("h6",{className:"text-center mt-2"},"\u662f\u5426\u5220\u9664\u8be5\u7c7b\u578b\uff1f")),p.createElement("div",{className:"d-flex mt-3 justify-content-center"},p.createElement("button",{className:"btn btn-danger mr-3",onClick:e.onConfirm},"\u5220\u9664\u7c7b\u578b"),p.createElement("button",{className:"btn btn-outline-info mr-3",onClick:e.onCancel},"\u53d6\u6d88"))))},e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page,t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(j.VPage),Le=(me=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).genreInput=void 0,Object(C.a)(e,"creationGenreIsBlink",de,Object(L.a)(e)),e.creationGenre=Object(v.a)(h.a.mark((function t(){var r,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.genreInput.value){t.next=8;break}return r=e.controller.creationGenre,n=e.genreInput.value,e.genreInput.value="",t.next=6,r(n);case 6:t.next=10;break;case 8:e.creationGenreIsBlink=!0,setTimeout((function(){return e.creationGenreIsBlink=!1}),Z.TIPDISPLAYTIME);case 10:case"end":return t.stop()}}),t)}))),e.editGenre=function(){var t=Object(v.a)(h.a.mark((function t(r){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.controller.openEditProductGenre,t.next=3,n(r);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.delGenre=function(){var t=Object(v.a)(h.a.mark((function t(r){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.controller.delGenre,t.next=3,e.vCall(Ae,r);case 3:if(t.t0=t.sent,!0!==t.t0){t.next=7;break}return t.next=7,n(r);case 7:case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.genreActionIcon=function(e,t,r){return p.createElement("span",{className:"align-self-center px-2",onClick:function(e){e.stopPropagation(),t(r)}}," ",p.createElement(j.FA,{name:e}))},e.renderItemGenre=function(t){var r=p.createElement("div",{className:"d-flex pt-2 px-2 cursor-pointer text-info"},e.genreActionIcon("edit",e.editGenre,t),e.genreActionIcon("trash",e.delGenre,t));return p.createElement(j.LMR,{right:r},p.createElement("div",{className:"pt-2 px-2"},p.createElement("span",{className:" m-auto"},p.createElement($,{chemicalId:t.imageUrl?t.imageUrl:"1",className:"w-4c"})),t.name))},e.page=Object(D.observer)((function(){var t=e.controller,r=t.productGenres,n=t.onGenreSelected,a=p.createElement("button",{className:"btn btn-primary w-100",onClick:e.creationGenre},"\u521b\u5efa"),c=p.createElement("div",{className:"mt-3 text-secondary d-flex justify-content-center"},"\u300e \u65e0\u5546\u54c1\u7c7b\u578b \u300f"),i=e.creationGenreIsBlink?p.createElement("small",{className:"text-danger ml-2"},"\u5fc5\u987b\u586b\u5546\u54c1\u7c7b\u578b"):null;return p.createElement(j.Page,{header:"\u5546\u54c1\u7c7b\u578b"},p.createElement("div",{className:"px-2 py-3"},p.createElement(j.LMR,{right:a},p.createElement("form",{onSubmit:function(t){t.preventDefault(),e.creationGenre()}},p.createElement("input",{ref:function(t){return e.genreInput=t},type:"text",placeholder:"\u8f93\u5165\u521b\u5efa\u7684\u5546\u54c1\u7c7b\u578b",className:"form-control"}))),i,p.createElement(j.List,{items:r,item:{render:e.renderItemGenre,onClick:n},none:c,className:"mt-2"})))})),e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(j.VPage),de=Object(S.a)(me.prototype,"creationGenreIsBlink",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),me),Be=(fe=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).fromGenreSelect=void 0,Object(C.a)(e,"productGenres",be,Object(L.a)(e)),e.openEditProductGenre=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.openVPage(Ie,r);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getProductGenres=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.uqs.\u79ef\u5206\u5546\u57ce.Genre.all();case 2:e.productGenres=t.sent;case 3:case"end":return t.stop()}}),t)}))),e.creationGenre=function(){var t=Object(v.a)(h.a.mark((function t(r){var n,a,c,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.uqs.\u79ef\u5206\u5546\u57ce,t.next=3,n.Genre.save(void 0,{name:r});case 3:return a=t.sent,c=a.id,t.next=7,n.Genre.load(c);case 7:i=t.sent,e.productGenres.push(i);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSaveGenre=function(){var t=Object(v.a)(h.a.mark((function t(r){var n,a,c,i,o,s,u,l;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.uqs.\u79ef\u5206\u5546\u57ce,a=r.id,c=r.name,i=r.imageUrl,t.next=4,n.Genre.load(a);case 4:if(o=t.sent,s=o.name,u=o.imageUrl,c===s&&i===u){t.next=11;break}return t.next=9,n.Genre.save(a,{name:c,imageUrl:i});case 9:l=e.productGenres.findIndex((function(e){return e.id===a})),e.productGenres.splice(l,1,r);case 11:e.closePage();case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.delGenre=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.uqs.\u79ef\u5206\u5546\u57ce.PointProductGenreDelete.submit({genre:r});case 2:return t.next=4,e.getProductGenres();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onGenreSelected=function(t){e.fromGenreSelect&&(e.backPage(),e.returnCall(t))},e}return Object(w.a)(r,[{key:"internalStart",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.fromGenreSelect=t,e.next=3,this.getProductGenres();case 3:this.openVPage(Le);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(k),be=Object(S.a)(fe.prototype,"productGenres",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),fe),De=(he=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(C.a)(e,"pageHavingAudit",ve,Object(L.a)(e)),Object(C.a)(e,"pageHavingRefuse",ge,Object(L.a)(e)),e.tab=function(){return e.renderView(K)},e}return Object(w.a)(r,[{key:"internalStart",value:function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"changeWebUser",value:function(){var e=Object(v.a)(h.a.mark((function e(t){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.cApp.currentUser,e.next=3,r.changeWebUser(t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"changeWebUserContact",value:function(){var e=Object(v.a)(h.a.mark((function e(t){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.cApp.currentUser,e.next=3,r.changeWebUserContact(t);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"openProductGenre",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.newC(Be),e.next=3,t.start(!1);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"openLottery",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.newC(Ce),e.next=3,t.start();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(k),ve=Object(S.a)(he.prototype,"pageHavingAudit",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ge=Object(S.a)(he.prototype,"pageHavingRefuse",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he),Ge=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).lordScreenCase=[{caption:"\u5546\u54c1\u5e93",state:"productList",icon:"list-ul"},{caption:"\u65b0\u589e\u5546\u54c1",state:"creationProduct",icon:"plus-circle"},{caption:"\u79ef\u5206\u5546\u54c1",state:"pointProduct",icon:"diamond"}],e.interfaceCase=function(){var t=e.controller.openInterfaceCase;return p.createElement("div",{className:"d-flex w-100 my-3 flex-wrap px-1 text-center"},e.lordScreenCase.map((function(e,r){var n=e.caption,a=e.state,c=e.icon;return p.createElement("div",{key:r,className:"d-flex flex-column align-items-center cursor-pointer mb-3 py-2 px-1 mx-2 rounded",style:{color:"#436EEE",background:"#F2F2F2",width:"20%"},onClick:function(){return t(a)}},p.createElement(j.FA,{name:c,className:"fa-2x"}),p.createElement("small",{className:"text-muted"},n))})))},e.pageContent=Object(D.observer)((function(){return p.createElement(j.Page,{header:"PointShopMs",back:"none"},e.interfaceCase())})),e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(e){return p.createElement(this.pageContent,null)}}]),r}(j.VPage),ze=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).tab=function(){return e.renderView(Ge)},e.openInterfaceCase=function(){var t=Object(v.a)(h.a.mark((function t(r){var n,a,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.cApp,a=n.cPointProduct,c=n.cMe,t.t0=r,t.next="productGenre"===t.t0?4:"pointProduct"===t.t0?7:10;break;case 4:return t.next=6,c.openProductGenre();case 6:return t.abrupt("return");case 7:return t.next=9,a.openPointProduct();case 9:case 10:return t.abrupt("return");case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(w.a)(r,[{key:"internalStart",value:function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),r}(k),Ue=r(24),Ve=r(142),Fe=r.n(Ve);function Te(e,t){return Fe()(e).format(t||"YYYY-MM-DD")}var Me=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).placeholder="\u641c\u7d22\u5546\u54c1\u540d\u79f0",e.onSearch=function(){var t=Object(v.a)(h.a.mark((function t(r,n){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.controller.cApp.topKey,"home"!==n&&j.nav.popTo(a),e.controller.start(r);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e}return Object(w.a)(r,[{key:"render",value:function(e){var t=this,r="home"===e?"md":"sm";return p.createElement(j.SearchBox,{className:je()("w-100","mr-3"),size:r,onSearch:function(r){return t.onSearch(r,e)},placeholder:this.placeholder})}}]),r}(j.View),Re=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){return Object(g.a)(this,r),t.apply(this,arguments)}return r}(Me),qe=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).placeholder="\u641c\u7d22\u79ef\u5206\u5546\u54c1",e}return r}(Me),We=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).placeholder="\u641c\u7d22\u5546\u54c1",e}return r}(Me),He=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).placeholder="\u641c\u7d22\u54c1\u724c",e}return r}(Me);function Ze(e,t){return e?p.createElement("div",{className:"bg-white d-flex justify-content-between py-1 px-3 border-bottom"},p.createElement("span",{className:"text-truncate"},p.createElement("small",{className:"small text-muted"},"\u641c\u7d22: "),e),p.createElement("span",{onClick:t},p.createElement(j.FA,{name:"times-circle-o",className:"text-danger"}))):null}var Ye,Ke,Qe=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){return Object(g.a)(this,r),t.apply(this,arguments)}return Object(w.a)(r,[{key:"render",value:function(){var e=this.controller,t=e.openCreationProduct,r=e.renderSearchHeader,n=p.createElement("img",{className:"m-1 ml-2 h-3c",src:T.a,alt:"logo"}),a=p.createElement("span",{className:"fa-stack mr-2 mt-1 small",onClick:t},p.createElement("i",{className:"fa fa-circle-o fa-stack-2x text-success"}),p.createElement("i",{className:"fa fa-plus fa-stack-1x text-success"}));return p.createElement("div",{style:{borderBottom:"1px dashed #dee2e6"}},p.createElement(j.LMR,{className:"mb-1 py-1 align-items-center bg-white",left:n,right:a},p.createElement("div",{className:"mt-1 mx-3"},r())))}}]),r}(j.View),Je=p.createElement("div",{className:"mt-4 d-flex justify-content-center text-secondary"},"\u300e \u6682\u65e0\u5546\u54c1 \u300f");function Xe(e,t,r){if(null===t||void 0===t||"0"===t)return null;var n=r?je()(r):je()("text-muted"),a=r?je()(r):"";return p.createElement(p.Fragment,null,p.createElement("div",{className:je()("col-6 col-sm-2 pr-0 small align-self-center",n)}," ",e),p.createElement("div",{className:je()("col-6 col-sm-4",a)},t))}var _e,$e,et,tt,rt,nt,at,ct,it,ot,st,ut,lt,pt,mt,dt,ft,bt,ht,vt,gt,wt,yt,xt,jt,Ot,Pt,Et=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).filterGenre=void 0,e.refreshProduct=Object(v.a)(h.a.mark((function t(){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.controller.getProductLib,e.filterGenre=void 0,t.next=4,r();case 4:case"end":return t.stop()}}),t)}))),e.renderPostOperaLabel=function(t){return e.controller.renderPostOperaLabel(t)},e.renderPointProduct=function(t){var r=t.productOther,n=t.props||t,a=n.description,c=n.descriptionC,i=n.imageUrl,o=n.point,s=n.grade,u=(null===r||void 0===r?void 0:r.price)?p.createElement("span",{className:"text-danger h5 "},"\uffe5",r.price):null;return p.createElement("div",{className:"row m-1 w-100"},p.createElement("div",{title:a,className:"col-lg-3 col-sm-4 col-4 m-auto p-0"},p.createElement($,{chemicalId:i,className:"w-100"})),p.createElement("div",{className:"col-lg-9 col-sm-8 col-8 small py-1"},p.createElement("div",null,c),p.createElement("div",{className:"row m-0 pt-1"},Xe("\u4ea7\u54c1\u7f16\u53f7",null===r||void 0===r?void 0:r.origin,"pt-1"),Xe("\u89c4\u683c",s,"pt-1"),Xe("\u4ef7\u683c",u,"pt-1 my-0"),Xe("\u79ef\u5206",p.createElement(p.Fragment,null,p.createElement("span",{className:"text-danger h5"},o),p.createElement("small",null,"\u5206")),"pt-1")),p.createElement("div",{className:"py-2 mr-lg-5 mt-sm-4"},e.renderPostOperaLabel(t))))},e.renderGenreItem=function(e){var t=e.name,r=e.imageUrl;return p.createElement("div",null,p.createElement("label",{className:"w-100 d-flex flex-column justify-content-center"},r?p.createElement("div",{className:"m-auto",style:{width:"30%"}},p.createElement($,{chemicalId:r||":0-0268.png",className:"w-100"})):p.createElement(j.FA,{name:"leaf",className:"mt-2 text-success mb-2",size:"lg"}),p.createElement("div",{className:"text-dark small"},t)))},e.loadPointProductMore=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.controller.cApp.cProduct.start("");case 1:case"end":return t.stop()}}),t)}))),e.retnderPointProductList=function(t){var r=e.controller.onProductSelected;return p.createElement(j.List,{items:t,item:{render:e.renderPointProduct,onClick:r},none:Je})},e.page=Object(D.observer)((function(){var t,r,n=e.controller,a=n.pointProductLib,c=n.filterByProductGenre,i=n.cApp.cGenre,o=e.renderVm(Qe),s=p.createElement("div",{className:"ml-4 pl-2 small text-secondary"},"\u6682\u65e0\u5546\u54c1\u7c7b\u578b,\u8bf7\u53bb\u65b0\u589e\u7c7b\u578b \u21d2 \u6211\u7684 \xbb\xbb \u5546\u54c1\u7c7b\u578b"),u=a instanceof Array?a:null===a||void 0===a||null===(t=a.items)||void 0===t?void 0:t.slice(0,10);return!(a instanceof Array)&&(null===u||void 0===u?void 0:u.length)>=10&&(r=p.createElement("div",{className:"py-4 text-center text-dark border-top cursor-pointer",onClick:e.loadPointProductMore},p.createElement(j.FA,{name:"hand-o-right",className:"text-primary",size:"lg"})," \u52a0\u8f7d\u66f4\u591a")),p.createElement("div",{className:"bg-light"},o,p.createElement("div",{className:"border-bottom mb-1 bg-light pt-2"},p.createElement("div",{className:"w-24c mt-1 mx-3 d-flex justify-content-between"},p.createElement("small",{className:je()(i.productGenres.length&&"mb-2")},"\u5546\u54c1\u7c7b\u578b\uff1a",e.filterGenre),p.createElement("span",{className:je()(!e.filterGenre&&"d-none"),onClick:e.refreshProduct},p.createElement(j.FA,{name:"times-circle-o",className:"text-danger"}))),p.createElement(j.List,{className:"d-flex flex-wrap py-2 text-center bg-transparent",items:i.productGenres,item:{render:e.renderGenreItem,onClick:function(t){c(t),e.filterGenre=t.name},className:"w-25 bg-transparent"},none:s})),e.retnderPointProductList(u),r)})),e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(e){return p.createElement(this.page,null)}}]),r}(j.VPage),kt=(Ye=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(C.a)(e,"searchKey",Ke,Object(L.a)(e)),e.onScrollBottom=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.scrollToBottom(),e.controller.searchProductLib.more();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.refreshProduct=Object(v.a)(h.a.mark((function t(){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.controller.searchByKey,e.searchKey=void 0,t.next=4,r("");case 4:case"end":return t.stop()}}),t)}))),e.page=Object(D.observer)((function(){var t=e.controller,r=t.renderSearchHeader,n=t.searchProductLib,a=p.createElement("div",{className:"mx-1 mr-3 w-100"},r());return p.createElement(j.Page,{header:a,headerClassName:"bg-light",onScrollBottom:e.onScrollBottom},e.searchKey&&Ze(e.searchKey,e.refreshProduct),p.createElement("div",{className:"mb-1"},e.retnderPointProductList(n)))})),e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.searchKey=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(Et),Ke=Object(S.a)(Ye.prototype,"searchKey",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ye),Nt=[{name:"point",type:"string",required:!0},{name:"startDate",type:"date",required:!0},{name:"endDate",type:"date",required:!0}],Ct=(_e=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(C.a)(e,"productGenreIsBlank",$e,Object(L.a)(e)),Object(C.a)(e,"tips",et,Object(L.a)(e)),e.currentState=void 0,e.form=void 0,e.uiSchema={items:{point:{widget:"text",label:"\u79ef\u5206",placeholder:"\u8bbe\u7f6e\u5546\u54c1\u79ef\u5206",rules:G},startDate:{widget:"date",label:"\u4e0a\u67b6\u65e5\u671f"},endDate:{widget:"date",label:"\u4e0b\u67b6\u65e5\u671f"},submit:{widget:"button",label:"\u63d0\u4ea4"}}},e.onSaveOperating=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.form){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.form.buttonClick("submit");case 4:case"end":return t.stop()}}),t)}))),e.onFormButtonClick=function(){var t=Object(v.a)(h.a.mark((function t(r,n){var a,c,i,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.controller,c=a.closePage,i=a.saveOperation,t.next=3,i({data:n.form.data,state:e.currentState});case 3:o=t.sent,e.tips="\u6b64\u5546\u54c1".concat(o.replace(/\s+/g,""),"\u6210\u529f\uff01"),e.tips&&setTimeout((function(){return e.tips=void 0}),1e3),setTimeout((function(){return c(1)}),500);case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.tipsUI=Object(D.observer)((function(){var t=p.createElement(p.Fragment,null);return e.tips&&(t=p.createElement("div",{className:"alert alert-success",role:"alert"},p.createElement(j.FA,{name:"check-circle",className:"text-warning float-left mr-3",size:"2x"}),e.tips)),t})),e.operateButtonUI=function(t,r){var n=e.controller.isCreationProduct;return p.createElement("button",{className:je()("btn btn-primary",n?"w-50":"w-8c"),onClick:function(){e.currentState=r,e.onSaveOperating()}},t)},e.productSelectEntry=function(e,t,r,n){var a=p.createElement(j.FA,{name:"chevron-right",className:"cursor-pointer"});return p.createElement("div",{className:"row mx-0 bg-white d-flex align-items-center py-2 border-bottom",onClick:t},p.createElement("div",{className:"col-4 col-sm-2  text-muted"},e,":"),p.createElement("div",{className:"col-8 col-sm-10"},p.createElement(j.LMR,{className:"w-100 align-items-center",right:a},r)),n)},e.cancelProductType=function(t){t.stopPropagation(),e.controller.goalProductInfo.genreShow=void 0,e.controller.goalProductInfo.genre=void 0},e.page=Object(D.observer)((function(){var t=Or.EDIT,r=Or.UPSHELF,n=Or.DOWNSHELF,a=Or.REUPSHELF,c=e.controller,i=c.toGenreSelect,o=c.openVUpdatePicture,s=c.toProductUpShelf,u=c.isCreationProduct,l=c.goalProductInfo,m=l.genreShow,d=l.imageUrl,f=l.point,b=l.startDate,h=l.endDate,v=l.description,g=l.descriptionC,w=l.grade,y=l.origin,x=l.price,O={point:f,startDate:b=void 0!==b?Te(b):b,endDate:h=void 0!==h?Te(h):h,grade:w},P="\u5546\u54c1".concat(u?"\u65b0\u589e":"\u4fee\u6539"),E=p.createElement("div",{className:"d-flex justify-content-around"},u?e.operateButtonUI(r.name,r.type):p.createElement(p.Fragment,null,e.operateButtonUI(t.name,t.type),s?e.operateButtonUI(a.name,a.type):e.operateButtonUI(n.name,n.type))),k=e.productGenreIsBlank?p.createElement("div",{className:"text-danger small my-2 d-flex m-auto"},"\u5fc5\u987b\u9009\u62e9\u5546\u54c1\u7c7b\u578b"):null,N=x?p.createElement("span",{className:"text-danger h5 "},"\uffe5",x):null,C="\u9009\u62e9\u5546\u54c1\u7c7b\u578b";return m&&(C=p.createElement(p.Fragment,null,m,p.createElement("span",{className:"float-right px-3",onClick:function(t){e.cancelProductType(t)}},p.createElement(j.FA,{name:"times-circle-o",className:"text-danger"})))),p.createElement(j.Page,{header:P,footer:E},p.createElement("div",{className:"position-fixed",style:{top:"45%",left:"10%",right:"10%",zIndex:3}},p.createElement(e.tipsUI)),e.productSelectEntry("\u5546\u54c1\u7c7b\u578b",i,C,k),p.createElement("div",{className:"row mx-0 pb-3 pt-2 bg-white"},p.createElement("div",{className:"col-sm-5 px-0"},p.createElement("div",{title:v,className:"w-75 m-auto"},p.createElement($,{chemicalId:d,className:"w-100"}))),p.createElement("div",{className:"col-sm-7"},p.createElement("small",{className:"pt-1"},g),p.createElement("div",{className:"row m-0 pt-1"},Xe("\u4ea7\u54c1\u7f16\u53f7",y,"pt-1"),Xe("\u4ef7\u683c",N,"pt-1 my-0")),p.createElement("div",{className:"d-flex justify-content-between pr-1 align-items-center"},w&&p.createElement("div",{style:{paddingLeft:15}},"\u89c4\u683c\uff1a",w),p.createElement("button",{onClick:function(){return o("\u66f4\u65b0\u56fe\u7247")},className:"btn btn-primary w-6c ml-auto"},p.createElement("small",null,"\u66f4\u65b0\u56fe\u7247"))))),p.createElement("div",{className:"container text-left border-bottom bg-white"},p.createElement(j.Form,{ref:function(t){return e.form=t},schema:Nt,uiSchema:e.uiSchema,formData:O,onButtonClick:e.onFormButtonClick,fieldLabelSize:3})))})),e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(j.VPage),$e=Object(S.a)(_e.prototype,"productGenreIsBlank",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),et=Object(S.a)(_e.prototype,"tips",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_e),St=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).label="\u56fe\u7247\u4e0a\u4f20",e.page=function(t){var r=t.resolve;return p.createElement(j.ImageUploader,{label:e.label,onSaved:function(e){r(e)}})},e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(t){var r=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0!==t&&(this.label="string"===typeof t?t:t.topic),new Promise((function(e,t){r.openPage(r.page,{resolve:e,reject:t})})).then(function(){var e=Object(v.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.controller.updatedProductImage,e.t0=r.label,e.next="\u66f4\u65b0\u56fe\u7247"===e.t0?4:7;break;case 4:return e.next=6,n(t);case 6:case 7:return e.abrupt("break",8);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(j.VPage),It=(tt=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).genreInput=void 0,Object(C.a)(e,"searchIsBlank",rt,Object(L.a)(e)),Object(C.a)(e,"Pagination",nt,Object(L.a)(e)),Object(C.a)(e,"searchKey",at,Object(L.a)(e)),Object(C.a)(e,"searchPlaceholder",ct,Object(L.a)(e)),e.renderPointProduct=function(t){var r=t.imageUrl,n=t.description,a=t.descriptionC,c=t.radioy,i=t.unit,o=t.price,s=t.retail,u=t.origin,l="jd.com"===e.controller.currentSource.type?o?o.price:"":s;return p.createElement("div",{className:"row m-1 w-100"},p.createElement("div",{title:n,className:"col-4 m-0 p-0"},p.createElement($,{chemicalId:r,className:"w-100"})),p.createElement("div",{className:"col-8 small py-1"},p.createElement("div",null,a),p.createElement("div",{className:"row m-0 pt-1"},Xe("\u4ea7\u54c1\u7f16\u53f7",u)),p.createElement("div",{style:{paddingLeft:15}},p.createElement("div",{className:"my-2"},c,i),l?p.createElement("div",{className:"text-danger h5 mt-1"},"\uffe5",l):null)))},e.ProductSelected=function(){var t=Object(v.a)(h.a.mark((function t(r){var n,a,c,i,o,s,u,l,p,m,d,f,b,v;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.controller,a=n.onProductSelected,c=n.currentSource,i=r.description,o=r.descriptionC,s=r.radioy,u=r.unit,l=r.product,p=r.id,m=r.imageUrl,d=r.retail,f=r.price,b=r.origin,v=2!==c.id?{description:i,descriptionC:o,grade:"".concat(s).concat(u),id:void 0,imageUrl:l.obj.imageUrl,point:void 0,sourceId:p.id,price:d,isValid:1,origin:b}:{description:i,descriptionC:o,grade:void 0,id:void 0,imageUrl:m,point:void 0,sourceId:p,price:f.price,isValid:1,origin:p},t.next=5,a(v,"\u65b0\u589e");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderDataSources=function(t){var r=t.source,n=t.id;return p.createElement("span",{className:je()(e.controller.currentSource.id===n?"text-light bg-primary":"text-primary","m-1 border-primary border py-1 px-2 rounded-lg small")},r)},e.searchProduct=Object(v.a)(h.a.mark((function t(){var r,n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.controller,n=r.searchToCreationProduct,a=r.currentSource,e.genreInput.value&&a){t.next=5;break}return e.searchIsBlank=!0,setTimeout((function(){return e.searchIsBlank=!1}),Z.TIPDISPLAYTIME),t.abrupt("return");case 5:return e.searchKey=e.genreInput.value,e.genreInput.value="",t.next=9,n({keyWord:e.searchKey});case 9:case"end":return t.stop()}}),t)}))),e.changePageIndex=function(){var t=Object(v.a)(h.a.mark((function t(r){var n,a,c,i,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.controller,a=n.searchToCreationProduct,c=n.pageIndex,i=n.pageCount,o=n.openCreationProduct,!(r>0&&c<i||r<0&&c>=2)){t.next=8;break}return e.controller.pageIndex+=r,t.next=5,a({keyWord:e.searchKey,Pagination:!0});case 5:return e.closePage(),t.next=8,o(e.searchKey);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onScrollBottom=function(){var t=Object(v.a)(h.a.mark((function t(r){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.scrollToBottom(),(n=e.controller.searchProductsToCreation)instanceof Array||n.more();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderPagination=function(){var t=e.controller,r=t.pageIndex,n=t.pageCount;return p.createElement("div",{className:"d-flex px-3 justify-content-between"},p.createElement("button",{onClick:function(){return e.changePageIndex(-1)},className:je()("btn",1===r?"disabled btn-light border border-secondary":"btn-primary")},"prev"),p.createElement("div",{className:"text-center align-self-center"},p.createElement("span",{className:"text-primary"},r),"/",n),p.createElement("button",{onClick:function(){return e.changePageIndex(1)},className:je()("btn",r===n?"disabled btn-light border border-secondary":"btn-primary")},"next"))},e.page=Object(D.observer)((function(){var t=e.controller,r=t.searchProductsToCreation,n=t.currentSource,a=t.changeCurrentProductSource,c=p.createElement("button",{className:"btn btn-primary w-100",onClick:e.searchProduct},p.createElement(j.FA,{name:"search"})),i=void 0;return r instanceof Array&&r.length&&(i=e.renderPagination()),p.createElement(j.Page,{header:"\u5546\u54c1\u65b0\u589e",onScrollBottom:e.onScrollBottom,footer:i},p.createElement("div",{className:"p-2 border-bottom bg-white"},p.createElement("div",{className:"d-flex flex-column mb-2"},p.createElement("div",{className:"my-1"},"\u5546\u54c1\u6e90\uff1a",p.createElement("small",null,n?n.nick||n.type:null)),p.createElement(j.List,{items:jr,item:{render:e.renderDataSources,onClick:function(e){a(e)}},className:"d-flex bg-white w-100 flex-wrap",none:"\u6682\u65e0\u5546\u54c1\u6e90"})),p.createElement(j.LMR,{right:c},p.createElement("form",{onSubmit:function(t){t.preventDefault(),e.searchProduct()}},p.createElement("input",{ref:function(t){return e.genreInput=t},type:"text",placeholder:"jd.com"===n.type?"\u8f93\u5165\u5546\u54c1\u540d\u79f0":"\u8f93\u5165\u5546\u54c1\u540d\u79f0\u3001\u7f16\u53f7",className:"form-control"}))),e.searchIsBlank?p.createElement("div",{className:"text-danger mt-1 small"},"".concat(e.genreInput.value?n?"":"\u8bf7\u9009\u62e9\u5546\u54c1\u6e90":"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0")):null),p.createElement(j.List,{items:void 0!==r?r:[],item:{render:e.renderPointProduct,onClick:e.ProductSelected},none:Je}))})),e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0!==t&&(this.searchKey=t),this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(j.VPage),rt=Object(S.a)(tt.prototype,"searchIsBlank",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),nt=Object(S.a)(tt.prototype,"Pagination",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),at=Object(S.a)(tt.prototype,"searchKey",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ct=Object(S.a)(tt.prototype,"searchPlaceholder",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"\u8f93\u5165\u5546\u54c1\u540d\u79f0\u3001\u7f16\u53f7"}}),tt),At=(it=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(C.a)(e,"textarea",ot,Object(L.a)(e)),Object(C.a)(e,"curPostContent",st,Object(L.a)(e)),e.onSave=Object(v.a)(h.a.mark((function t(){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e.textarea.value){t.next=5;break}return r=e.controller.onSavePointProductPost,t.next=4,r(e.textarea.value);case 4:e.closePage();case 5:case 6:case"end":return t.stop()}}),t)}))),e.page=Object(D.observer)((function(){var t=e.controller,r=t.openPointProductPostShow,n=t.cApp.cMedia,a="".concat(void 0!==e.curPostContent?"\u7f16\u8f91":"\u521b\u5efa","\u5e16\u6587"),c=p.createElement("div",null,e.curPostContent&&p.createElement("button",{onClick:r,type:"button",className:"btn btn-sm btn-success mr-3"},"\u9884\u89c8"),p.createElement("button",{onClick:function(){return n.openMainPage()},type:"button",className:"btn btn-sm btn-success mr-3"},"\u56fe\u7247"),p.createElement("button",{onClick:function(){e.onSave()},type:"button",className:"btn btn-sm btn-success mr-3"},"\u4fdd\u5b58"));return p.createElement(j.Page,{header:a,right:c},p.createElement("div",{ref:e.refIframe,className:"py-1"},p.createElement("textarea",{ref:function(t){return e.textarea=t},className:"w-100 h-100",defaultValue:e.curPostContent})))})),e.refIframe=function(e){if(e){var t=e.parentElement.parentElement,r=t.querySelector("section.tv-page-header");e.style.height=window.innerHeight-r.clientHeight+"px",t.parentElement.style.overflowY="hidden"}},e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(t){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.controller.currentProduct.productDetailPost,this.curPostContent=r,this.openPage(this.page);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(j.VPage),ot=Object(S.a)(it.prototype,"textarea",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),st=Object(S.a)(it.prototype,"curPostContent",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),it),Lt=(ut=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(C.a)(e,"isScale",lt,Object(L.a)(e)),Object(C.a)(e,"htmlFragment",pt,Object(L.a)(e)),e.setDetailMobSize=function(){setTimeout((function(){var e=document.querySelector(".reset-z-detail_mob"),t=document.getElementById("__01"),r=750;t&&(r=t.offsetWidth);var n=window.innerWidth<=575?window.innerWidth/r:1;e.setAttribute("style","transform:scale(".concat(n,")"))}),50)},e.page=Object(D.observer)((function(){return e.isScale&&e.setDetailMobSize(),p.createElement(j.Page,{header:"\u9884\u89c8\u5e16\u6587"},p.createElement("div",{style:{height:"".concat(window.innerHeight,"px")}},p.createElement("div",{dangerouslySetInnerHTML:{__html:e.htmlFragment||""},className:"reset-z-detail_mob"})))})),e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(t){var r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.htmlFragment,n=t.isScale,this.isScale=n,this.htmlFragment=r,this.openPage(this.page);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(j.VPage),lt=Object(S.a)(ut.prototype,"isScale",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pt=Object(S.a)(ut.prototype,"htmlFragment",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ut),Bt=(mt=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(C.a)(e,"isPosTExist",dt,Object(L.a)(e)),e.content=Object(D.observer)((function(t){var r=t.param.pointProduct,n=e.controller.openPointProductPost;return p.createElement("div",{className:"mx-2 float-right pt-2 pl-3",onClick:function(e){e.stopPropagation(),n(r)}},"\u5e16\u6587",p.createElement("span",null,p.createElement(j.FA,{name:e.isPosTExist?"edit":"plus-circle",size:"lg",className:je()("mx-2",e.isPosTExist?"text-primary":"text-success")})))})),e}return Object(w.a)(r,[{key:"render",value:function(e){return e.pointProduct.productDetailPost&&(this.isPosTExist=!0),p.createElement(this.content,{param:e})}}]),r}(j.View),dt=Object(S.a)(mt.prototype,"isPosTExist",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),mt);function Dt(e,t){return Gt.apply(this,arguments)}function Gt(){return(Gt=Object(v.a)(h.a.mark((function e(t,r){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fetch(t,{method:"post",body:r,headers:{Accept:"application/x-www-form-urlencoded","Content-Type":"application/json"}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var zt,Ut,Vt,Ft,Tt,Mt,Rt,qt,Wt,Ht,Zt,Yt,Kt,Qt,Jt,Xt,_t,$t,er,tr,rr,nr,ar,cr,ir,or,sr,ur,lr,pr,mr,dr,fr,br,hr,vr,gr,wr,yr,xr,jr=[{id:1,source:"\u672c\u53f8",sourceId:1,type:"self",nick:"selfsales"},{id:2,source:"\u4eac\u4e1c",sourceId:2,type:"jd.com"}],Or={EDIT:{type:"edit",name:"\u4fee \u6539"},UPSHELF:{type:"upShelf",name:"\u4e0a \u67b6"},REUPSHELF:{type:"ReUpShelf",name:"\u4e0a \u67b6"},DOWNSHELF:{type:"downShelf",name:"\u4e0b \u67b6"}},Pr=(ft=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(C.a)(e,"pointProductLib",bt,Object(L.a)(e)),Object(C.a)(e,"searchProductLib",ht,Object(L.a)(e)),Object(C.a)(e,"goalProductInfo",vt,Object(L.a)(e)),Object(C.a)(e,"toProductUpShelf",gt,Object(L.a)(e)),Object(C.a)(e,"isCreationProduct",wt,Object(L.a)(e)),Object(C.a)(e,"currentSource",yt,Object(L.a)(e)),Object(C.a)(e,"searchProductsToCreation",xt,Object(L.a)(e)),Object(C.a)(e,"pageIndex",jt,Object(L.a)(e)),Object(C.a)(e,"pageCount",Ot,Object(L.a)(e)),Object(C.a)(e,"currentProduct",Pt,Object(L.a)(e)),e.tab=function(){return e.renderView(Et)},e.openCreationProduct=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.goalProductInfo={genreShow:void 0},"string"!==typeof r&&(e.searchProductsToCreation=void 0,e.currentSource=jr[0]),e.openVPage(It,r);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.openPointProductPost=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.currentProduct=r,e.openVPage(At);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.openPointProductPostShow=Object(v.a)(h.a.mark((function t(){var r,n,a,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.cApp.getPointProduct(e.currentProduct.id),t.next=3,r.getPostViewData();case 3:n=!1,a=r.htmlFragment,(c=r.productSource)&&"jd.com"===c.type&&(n=!0),e.openVPage(Lt,{htmlFragment:a,isScale:n});case 7:case"end":return t.stop()}}),t)}))),e.openVUpdatePicture=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.openVPage(St,r);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderPostOperaLabel=function(t){return e.renderView(Bt,{pointProduct:t})},e.renderSearchHeader=function(t){return e.renderView(Re,t)},e.productConverter=function(t,r){var n=e.cApp.getPointProduct(t.id);return n.seq=t.seq,n.loadListItem(),n},e.getPointProductDetail=function(){var t=Object(v.a)(h.a.mark((function t(r){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e.cApp.getPointProduct(r.id)).productGenre=void 0,t.next=4,n.loadProductDetail();case 4:return t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getPointProductItems=function(){var t=Object(v.a)(h.a.mark((function t(r){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.cApp.getPointProduct(r.id),r.seq&&(n.seq=r.seq),t.next=4,n.loadListItem();case 4:return t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getProductLib=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pointProductLib=new j.QueryPager(e.uqs.\u79ef\u5206\u5546\u57ce.GetPointProductsByPage,10,10),e.pointProductLib.setItemConverter(e.productConverter),t.next=4,e.pointProductLib.first({keyWord:""});case 4:case"end":return t.stop()}}),t)}))),e.searchByKey=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.searchProductLib=new j.QueryPager(e.uqs.\u79ef\u5206\u5546\u57ce.GetPointProductsByPage,10,10),e.searchProductLib.setItemConverter(e.productConverter),t.next=4,e.searchProductLib.first({keyWord:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getProductsFromGenre=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.uqs.\u79ef\u5206\u5546\u57ce.PointProductGenre.table({genre:r,pointproduct:void 0});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.filterByProductGenre=function(){var t=Object(v.a)(h.a.mark((function t(r){var n,a,c,i,o,s,u,l;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getProductsFromGenre(r);case 2:(n=t.sent).length||(e.pointProductLib=[]),a=n.map((function(e,t){return{id:e.pointProduct.id,seq:t}})),c=[],i=Object(J.a)(a);try{for(i.s();!(o=i.n()).done;)s=o.value,c.push(e.getPointProductItems(s))}catch(p){i.e(p)}finally{i.f()}return t.next=11,Promise.all(c);case 11:u=t.sent,l=u.sort((function(e,t){return e.props.point-t.props.point})).map((function(e){return e})),e.pointProductLib=l;case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.changeCurrentProductSource=function(t){e.currentSource.id!==t.id&&(e.currentSource=t,e.searchProductsToCreation=[],e.pageIndex=1)},e.searchToCreationProduct=function(){var t=Object(v.a)(h.a.mark((function t(r){var n,a,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=r.keyWord,a=r.Pagination,c=e.currentSource.type,void 0===a&&(e.pageIndex=1),t.t0=c,t.next="self"===t.t0?6:"jd.com"===t.t0?9:12;break;case 6:return t.next=8,e.searchSelfPointProduct(n);case 8:return t.abrupt("return");case 9:return t.next=11,e.searchPointProductByJD(n);case 11:return t.abrupt("return");case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.searchSelfPointProduct=function(){var t=Object(v.a)(h.a.mark((function t(r){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.cApp.currentSalesRegion,e.searchProductsToCreation=new j.QueryPager(e.uqs.product.SearchPointProduct,10,10),t.next=4,e.searchProductsToCreation.first({keyWord:r,salesRegion:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.searchPointProductByJD=function(){var t=Object(v.a)(h.a.mark((function t(r){var n,a,c,i,o,s,u,l,p;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n="n0/",a={Keyword:r,pageIndex:e.pageIndex,sortType:"price_asc"},t.next=5,Dt(Z.JD+"/search",JSON.stringify(a));case 5:if(c=t.sent,i=[],!c.ok){t.next=15;break}return t.next=10,c.json();case 10:return o=t.sent,t.next=13,e.getJDProductPrice(o.skuLib);case 13:if((s=t.sent)&&s.length){e.pageIndex=o.pageIndex,e.pageCount=o.pageCount,u=Object(J.a)(o.hitResult);try{for(p=function(){var e=l.value;if("1"===e.wstate&&"1"===e.wyn){var t=s.find((function(t){return String(t.skuId)===String(e.wareId)}));void 0!==t&&i.push({description:e.wareName,descriptionC:e.wareName,grade:void 0,id:e.wareId,imageUrl:_+n+e.imageUrl,point:void 0,price:t,isValid:1,origin:e.wareId})}},u.s();!(l=u.n()).done;)p()}catch(m){u.e(m)}finally{u.f()}}case 15:e.searchProductsToCreation=i,t.next=22;break;case 19:t.prev=19,t.t0=t.catch(0),e.searchProductsToCreation=[];case 22:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e){return t.apply(this,arguments)}}(),e.getJDProductPrice=function(){var e=Object(v.a)(h.a.mark((function e(t){var r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Dt(Z.JD+"/getProductSellPrice",JSON.stringify({sku:t}));case 3:if((r=e.sent).ok){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,r.json();case 8:if((n=e.sent)&&n.length){e.next=11;break}return e.abrupt("return");case 11:return e.abrupt("return",n);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return");case 17:case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),e.onProductSelected=function(){var t=Object(v.a)(h.a.mark((function t(r,n){var a,c,i,o,s,u,l,m,d,f,b,v,g,w,y,x,O,P,E;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===n){t.next=20;break}return t.next=3,e.getProductSources(r);case 3:if(void 0===(d=t.sent)){t.next=8;break}return t.next=7,e.getPointProductDetail(d.pointProduct);case 7:u=t.sent;case 8:if(void 0!==d||"jd.com"!==e.currentSource.type){t.next=17;break}return t.next=12,Dt(Z.JD+"/getProductDetail",JSON.stringify({sku:r.sourceId,queryExts:"nappintroduction"}));case 12:if(!(f=t.sent).ok){t.next=17;break}return t.next=16,f.json();case 16:m=t.sent;case 17:t.next=24;break;case 20:return e.currentSource=jr[0],t.next=23,e.getPointProductDetail(r);case 23:u=t.sent;case 24:(null===(a=u)||void 0===a?void 0:a.props)&&(v=(b=u).props,g=b.productSource,w=b.productOther,l=Object(Ue.a)(Object(Ue.a)({},v),{},{sourceId:null===g||void 0===g?void 0:g.sourceId,price:null===w||void 0===w?void 0:w.price,origin:null===w||void 0===w?void 0:w.origin})),e.isCreationProduct=void 0===(null===(c=u)||void 0===c?void 0:c.props),e.toProductUpShelf=!0,y="YYYY-MM-DD HH:mm:ss",x=Te(e.isCreationProduct||null===(i=u)||void 0===i||null===(o=i.props)||void 0===o?void 0:o.endDate,y),O=Te(void 0,y),!e.isCreationProduct&&O<=x&&(e.toProductUpShelf=!1),P=e.isCreationProduct?Object(Ue.a)({},r):l,m&&(P.grade=1+m.saleUnit,P.content=m.nappintroduction.replace(/\\n/g,"")),E=null===(s=u)||void 0===s?void 0:s.productGenre,e.goalProductInfo=Object(Ue.a)(Object(Ue.a)({},P),{},{genreShow:E?p.createElement(p.Fragment,null,Object(j.tv)(E,(function(e){return p.createElement(p.Fragment,null,e.name)}))):void 0,genre:E}),e.openVPage(Ct);case 39:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.toGenreSelect=Object(v.a)(h.a.mark((function t(){var r,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.newC(Be),t.next=3,r.call(!0);case 3:n=t.sent,e.goalProductInfo.genreShow=n.name,e.goalProductInfo.genre=n;case 6:case"end":return t.stop()}}),t)}))),e.updatedProductImage=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.goalProductInfo.imageUrl=r,e.closePage();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getPointProductLibLoad=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.uqs.\u79ef\u5206\u5546\u57ce.PointProductLib.load(r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSavePointProductPost=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.cApp.getPointProduct(e.currentProduct.id).addPointProductDetailPost(r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.saveOperation=function(){var t=Object(v.a)(h.a.mark((function t(r){var n,a,c,i,o,s,u;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Or.EDIT,a=Or.UPSHELF,c=Or.DOWNSHELF,i=Or.REUPSHELF,o=r.data,s=r.state,u=Object(Ue.a)(Object(Ue.a)({},e.goalProductInfo),o),t.t0=s,t.next=t.t0===n.type?6:t.t0===a.type?9:t.t0===i.type?12:t.t0===c.type?15:18;break;case 6:return t.next=8,e.editProduct(u);case 8:return t.abrupt("return",n.name);case 9:return t.next=11,e.upShelfProduct(u);case 11:return t.abrupt("return",a.name);case 12:return t.next=14,e.editProduct(u,!0);case 14:return t.abrupt("return",i.name);case 15:return t.next=17,e.downShelfProduct(u);case 17:return t.abrupt("return",c.name);case 18:return t.abrupt("return");case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.editProduct=function(){var t=Object(v.a)(h.a.mark((function t(r,n){var a,c,i,o,s,u,l,p,m,d,f;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.point,c=r.imageUrl,i=r.startDate,o=r.endDate,s=r.id,t.next=3,e.dealWithProductGenre(r);case 3:if(u=n){t.next=10;break}return t.next=7,e.getPointProductLibLoad(s);case 7:l=t.sent,p=l.point,m=l.imageUrl,d=l.startDate,f=l.endDate,u=p!==a||m!==c||d!==i||f!==o;case 10:if(r.isValid=1,!u){t.next=15;break}return t.next=15,e.savePointProduct(r);case 15:return t.next=17,e.getPointProductDetail(r);case 17:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.dealWithProductGenre=function(){var t=Object(v.a)(h.a.mark((function t(r){var n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.genre,t.next=3,e.getProductGenre(r);case 3:if(a=t.sent,!n){t.next=7;break}return t.next=7,e.addProductGenre(r);case 7:if(!a){t.next=11;break}if(n&&(!n||n.id===a.genre.id)){t.next=11;break}return t.next=11,e.delProductGenre(a);case 11:case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.upShelfProduct=function(){var t=Object(v.a)(h.a.mark((function t(r){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.id=void 0,r.isValid=1,t.next=4,e.savePointProduct(r);case 4:if(n=t.sent,r.id=n.id,e.currentProduct=r,void 0===r.genre){t.next=10;break}return t.next=10,e.addProductGenre(r);case 10:return t.next=12,e.getProductSources(r);case 12:if(void 0!==t.sent){t.next=16;break}return t.next=16,e.addPointProductSource(r);case 16:if("jd.com"!==e.currentSource.type){t.next=19;break}return t.next=19,e.onSavePointProductPost(r.content);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.downShelfProduct=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.endDate=Te(),r.isValid=0,t.next=4,e.savePointProduct(r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.savePointProduct=function(){var t=Object(v.a)(h.a.mark((function t(r){var n,a,c,i,o,s,u,l,p;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.id,a=r.description,c=r.descriptionC,i=r.grade,o=r.point,s=r.startDate,u=r.endDate,l=r.imageUrl,p=r.isValid,t.next=3,e.uqs.\u79ef\u5206\u5546\u57ce.PointProductLib.save(n,{description:a,descriptionC:c,grade:i,point:o,startDate:s,endDate:u,imageUrl:l,isValid:p});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getProductGenre=function(){var t=Object(v.a)(h.a.mark((function t(r){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.id,t.next=3,e.uqs.\u79ef\u5206\u5546\u57ce.GetPointProductGenre.obj({pointProduct:n});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getProductSources=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.uqs.\u79ef\u5206\u5546\u57ce.GetPointProductBySource.obj({sourceId:r.sourceId,type:e.currentSource.type});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.addPointProductSource=function(){var t=Object(v.a)(h.a.mark((function t(r){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.sourceId,t.next=3,e.uqs.\u79ef\u5206\u5546\u57ce.PointProductSource.add({pointProduct:r,arr1:[{sourceId:n,type:e.currentSource.type}]});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.addProductGenre=function(){var t=Object(v.a)(h.a.mark((function t(r){var n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.genre,a=r.id,t.next=3,e.uqs.\u79ef\u5206\u5546\u57ce.PointProductGenre.add({genre:n.id,arr1:[{pointProduct:a}]});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.delProductGenre=function(){var t=Object(v.a)(h.a.mark((function t(r){var n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.genre,a=r.pointProduct,t.next=3,e.uqs.\u79ef\u5206\u5546\u57ce.PointProductGenre.del({genre:n.id,arr1:[{pointProduct:a.id}]});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(w.a)(r,[{key:"internalStart",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.searchByKey(t);case 2:this.closePage(),this.openVPage(kt,t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(k),bt=Object(S.a)(ft.prototype,"pointProductLib",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ht=Object(S.a)(ft.prototype,"searchProductLib",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vt=Object(S.a)(ft.prototype,"goalProductInfo",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),gt=Object(S.a)(ft.prototype,"toProductUpShelf",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wt=Object(S.a)(ft.prototype,"isCreationProduct",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yt=Object(S.a)(ft.prototype,"currentSource",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return jr[0]}}),xt=Object(S.a)(ft.prototype,"searchProductsToCreation",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jt=Object(S.a)(ft.prototype,"pageIndex",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Ot=Object(S.a)(ft.prototype,"pageCount",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Pt=Object(S.a)(ft.prototype,"currentProduct",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ft),Er=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).filterGenre=void 0,e.toUpDatePointProduct=function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.renderPointGenre=function(e){var t=e.name;return m.a.createElement("button",{className:"btn btn-primary w-100 px-2"},m.a.createElement("small",null,t))},e.renderPointProduct=function(e){var t=e.product,r=e.pack,n=e.point,a=e.imageUrl;return m.a.createElement(m.a.Fragment,null,Object(j.tv)(t,(function(e){return m.a.createElement("div",{className:"row m-1 w-100"},m.a.createElement("div",{title:e.description,className:"col-4 m-0 p-0"},m.a.createElement($,{chemicalId:a,className:"w-100"})),Object(j.tv)(r,(function(t){return m.a.createElement("div",{className:"col-8 small"},m.a.createElement("div",null,e.descriptionC),m.a.createElement("div",{className:"my-2"},t.radioy,t.unit),m.a.createElement("div",{className:"row m-0 p-0"},m.a.createElement("div",{className:"col-5 m-0 p-0"},m.a.createElement("span",{className:"text-danger h5"},n),m.a.createElement("small",null,"\u5206"))))})))})))},e.renderPointProduct1=function(e){var t=e.description,r=e.descriptionC,n=e.point,a=e.imageUrl;return m.a.createElement("div",{className:"row m-1 w-100"},m.a.createElement("div",{title:t,className:"col-4 m-0 p-0"},m.a.createElement($,{chemicalId:a,className:"w-100"})),m.a.createElement("div",{className:"col-8 small"},m.a.createElement("div",null,r),m.a.createElement("div",{className:"row m-0 p-0"},m.a.createElement("div",{className:"col-5 m-0 p-0"},m.a.createElement("span",{className:"text-danger h5"},n),m.a.createElement("small",null,"\u5206")))))},e.refreshPointProduct=Object(v.a)(h.a.mark((function t(){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.controller.getPointProductLibrary,e.filterGenre=void 0,t.next=4,r();case 4:case"end":return t.stop()}}),t)}))),e.renderGenreItem=function(e){var t=e.name,r=e.imageUrl;return m.a.createElement("div",null,m.a.createElement("label",{className:"w-100 d-flex flex-column justify-content-center"},r?m.a.createElement("div",{className:"m-auto",style:{width:"30%"}},m.a.createElement($,{chemicalId:r||":0-0268.png",className:"w-100"})):m.a.createElement(j.FA,{name:"leaf",className:"mt-2 text-success mb-2",size:"lg"}),m.a.createElement("div",{className:"text-dark small"},t)))},e.page=Object(D.observer)((function(){var t=e.controller,r=t.pointProducts,n=t.renderSearchHeader,a=t.cApp,c=t.filterByProductGenre,i=a.cGenre,o=m.a.createElement("div",{className:"w-100 px-2 d-flex justify-content-between "},m.a.createElement("span",{className:"w-75 m-auto"},n())),s=m.a.createElement("div",{className:"d-flex justify-content-center text-secondary small mt-5"},"\u6682\u65e0\u53ef\u5151\u6362\u5546\u54c1"),u=m.a.createElement("div",{className:"py-1 pl-2 small text-secondary"},"\u6682\u65e0\u5546\u54c1\u7c7b\u578b,\u8bf7\u53bb\u65b0\u589e\u7c7b\u578b \u21d2 \u6211\u7684 \xbb\xbb \u5546\u54c1\u7c7b\u578b");return m.a.createElement(j.Page,{header:o,back:"none"},m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"border-bottom"},m.a.createElement("div",{className:"w-24c mt-1 mx-3 d-flex justify-content-between"},m.a.createElement("small",null,"\u5546\u54c1\u7c7b\u578b\uff1a",e.filterGenre),m.a.createElement("span",{className:je()(!e.filterGenre&&"d-none"),onClick:e.refreshPointProduct},m.a.createElement(j.FA,{name:"times-circle-o",className:"text-danger"}))),m.a.createElement(j.List,{className:"d-flex flex-wrap py-2 text-center bg-transparent",items:i.productGenres,item:{render:e.renderGenreItem,onClick:function(t){c(t),e.filterGenre=t.name},className:"w-25 bg-transparent"},none:u}))),m.a.createElement(j.List,{items:r,item:{render:function(t){return t.product?e.renderPointProduct(t):e.renderPointProduct1(t)}},none:s}))})),e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(e){return m.a.createElement(this.page,null)}}]),r}(j.VPage),kr=(zt=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(C.a)(e,"searchKey",Ut,Object(L.a)(e)),Object(C.a)(e,"searchPointProduct",Vt,Object(L.a)(e)),e.refreshPointProduct=Object(v.a)(h.a.mark((function t(){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.controller.pointProducts,e.searchKey=void 0,e.searchPointProduct=r;case 3:case"end":return t.stop()}}),t)}))),e.page=Object(D.observer)((function(){var t=e.controller.renderSearchHeader,r=m.a.createElement("div",{className:"w-100 px-2"},t()),n=m.a.createElement("div",{className:"d-flex justify-content-center text-secondary small mt-5"},"\u6682\u65e0\u53ef\u5151\u6362\u5546\u54c1");return m.a.createElement(j.Page,{header:r},m.a.createElement(m.a.Fragment,null,e.searchKey&&Ze(e.searchKey,e.refreshPointProduct)),m.a.createElement(j.List,{items:e.searchPointProduct,item:{render:e.renderPointProduct},none:n}))})),e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(t){var r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.searchKey,n=t.searchPointProduct,this.searchKey=r,this.searchPointProduct=n,this.openPage(this.page);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(Er),Ut=Object(S.a)(zt.prototype,"searchKey",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vt=Object(S.a)(zt.prototype,"searchPointProduct",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),zt),Nr=(Ft=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(C.a)(e,"pointProducts",Tt,Object(L.a)(e)),e.openPointProduct=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.cApp.cProduct.goalProductInfo.genreShow=void 0,t.next=4,e.getPointProductLibrary();case 4:e.openVPage(Er);case 5:case"end":return t.stop()}}),t)}))),e.renderSearchHeader=function(t){return e.renderView(qe,t)},e.filterByProductGenre=function(){var t=Object(v.a)(h.a.mark((function t(r){var n,a,c,i,o,s,u;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.cApp.cProduct,t.next=3,e.getProductsFromGenre(r);case 3:if(a=t.sent,c=[],!a.length){t.next=25;break}i=Object(J.a)(a),t.prev=7,i.s();case 9:if((o=i.n()).done){t.next=17;break}return s=o.value,t.next=13,n.getPointProductLibLoad(s.product.id);case 13:u=t.sent,c.push(u);case 15:t.next=9;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(7),i.e(t.t0);case 22:return t.prev=22,i.f(),t.finish(22);case 25:e.pointProducts=c;case 26:case"end":return t.stop()}}),t,null,[[7,19,22,25]])})));return function(e){return t.apply(this,arguments)}}(),e.getProductsFromGenre=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.uqs.\u79ef\u5206\u5546\u57ce.PointProductGenre.table({genre:r,pointproduct:void 0});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getPointProductLibrary=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.uqs.\u79ef\u5206\u5546\u57ce.GetPointProduct.table({startPoint:0,endPoint:5e4});case 2:e.pointProducts=t.sent;case 3:case"end":return t.stop()}}),t)}))),e.searchPointProduct=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.uqs.\u79ef\u5206\u5546\u57ce.PointProduct.table({product:r});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getProductGenre=function(){var t=Object(v.a)(h.a.mark((function t(r){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.id,t.next=3,e.uqs.\u79ef\u5206\u5546\u57ce.GetPointProductGenre.obj({pointProduct:n});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.addProductGenre=function(){var t=Object(v.a)(h.a.mark((function t(r){var n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.genre,a=r.id,t.next=3,e.uqs.\u79ef\u5206\u5546\u57ce.PointProductGenre.add({genre:n.id,arr1:[{pointProduct:a}]});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.addPointProduct=function(){var t=Object(v.a)(h.a.mark((function t(r){var n,a,c,i,o,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.product,a=r.pack,c=r.point,i=r.startDate,o=r.endDate,s=r.imageUrl,t.next=3,e.uqs.\u79ef\u5206\u5546\u57ce.PointProduct.add({product:n,arr1:[{pack:a,point:c,startDate:i,endDate:o,imageUrl:s}]});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.delProductGenre=function(){var t=Object(v.a)(h.a.mark((function t(r){var n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.genre,a=r.pointProduct,t.next=3,e.uqs.\u79ef\u5206\u5546\u57ce.PointProductGenre.del({genre:n.id,arr1:[{pointProduct:a.id}]});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.delPointProduct=function(){var t=Object(v.a)(h.a.mark((function t(r){var n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.product,a=r.pack,t.next=3,e.uqs.\u79ef\u5206\u5546\u57ce.PointProduct.del({product:n,arr1:[{pack:a}]});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.tab=function(){return e.cApp.cGenre.getProductGenres(),e.getPointProductLibrary(),e.renderView(Er)},e}return Object(w.a)(r,[{key:"internalStart",value:function(){var e=Object(v.a)(h.a.mark((function e(t){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getPointProductLibrary();case 2:return e.next=4,this.searchPointProduct(t);case 4:r=e.sent,this.closePage(),this.openVPage(kr,{searchKey:t,searchPointProduct:r});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(k),Tt=Object(S.a)(Ft.prototype,"pointProducts",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ft),Cr=(Mt=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(C.a)(e,"searchKey",Rt,Object(L.a)(e)),e.renderPointProduct=function(e){var t=e.imageUrl,r=e.point,n=e.visits,a=e.id,c=e.exchanges;return p.createElement(p.Fragment,null,Object(j.tv)(a,(function(e){return p.createElement("div",{className:"row m-1 w-100"},p.createElement("div",{title:e.description,className:"col-4 m-auto p-0"},p.createElement($,{chemicalId:t,className:"w-100"})),p.createElement("div",{className:"col-8 small py-1 d-flex flex-column justify-content-between"},p.createElement("div",null,e.descriptionC),p.createElement("div",{className:"mt-2 mb-1"},e.grade),p.createElement("div",{className:"row m-0 p-0"},p.createElement("div",{className:"col-5 m-0 p-0"},p.createElement("span",{className:"text-danger h5"},r),p.createElement("small",null,"\u5206"))),p.createElement("div",{className:"d-flex justify-content-end align-items-end"},p.createElement("div",{className:"mr-3"},"\u5151\u6362\u91cf:",p.createElement("span",{className:"h6 m-0 text-primary"},c||0)),p.createElement("div",null,"\u6d4f\u89c8\u91cf:",p.createElement("span",{className:"h6 m-0 text-primary"},n||0)))))})))},e.refreshProduct=Object(v.a)(h.a.mark((function t(){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.controller.getBrowsedProductLib,e.searchKey=void 0,t.next=4,r();case 4:case"end":return t.stop()}}),t)}))),e.onScrollBottom=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.scrollToBottom(),e.controller.browsedProductLib.more();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.page=Object(D.observer)((function(){var t=e.controller.browsedProductLib,r=p.createElement("div",{className:"w-100 pr-2 d-flex justify-content-between"},p.createElement("span",{className:"align-self-center"},"\u6d4f\u89c8\u91cfPV"));return p.createElement(j.Page,{header:r,onScrollBottom:e.onScrollBottom},p.createElement(j.List,{items:t,item:{render:e.renderPointProduct},none:Je}))})),e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.searchKey=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(j.VPage),Rt=Object(S.a)(Mt.prototype,"searchKey",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mt),Sr=r(77),Ir=[{name:"pointRange",type:"string",required:!0}],Ar=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).form=void 0,e.uiSchema={items:{pointRange:{widget:"select",label:"\u79ef\u5206\u8303\u56f4",list:e.controller.maxPointRangeLib},submit:{widget:"button",label:"\u63d0\u4ea4"}}},e.onSaveInquire=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.form){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.form.buttonClick("submit");case 4:case"end":return t.stop()}}),t)}))),e.onFormButtonClick=function(){var t=Object(v.a)(h.a.mark((function t(r,n){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.controller.queryPointDistribution,t.next=3,a(n.form.data);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.page=Object(D.observer)((function(){var t=e.controller,r=t.pointRangeLib,n=t.pointRange;return p.createElement(j.Page,{header:"\u79ef\u5206\u5206\u5e03"},p.createElement("div",{className:"container text-left mt-1 border-bottom d-flex w-100 justify-content-between"},p.createElement("div",{className:"w-75"},p.createElement(j.Form,{ref:function(t){return e.form=t},schema:Ir,uiSchema:e.uiSchema,formData:{pointRange:n},onButtonClick:e.onFormButtonClick,fieldLabelSize:3})),p.createElement("div",{className:"align-self-center"},p.createElement("button",{onClick:function(){e.onSaveInquire()},className:"btn btn-primary"},"\u67e5\u8be2"))),p.createElement(Sr.Chart,{padding:"auto",appendPadding:[10,5,0,5],autoFit:!0,animate:!0,height:300,data:r,scale:{value:{min:1}}},p.createElement(Sr.LineAdvance,{shape:"smooth",point:!0,area:!0,position:"pointRange*QTYP",color:"rgb(95,147,249)"}),p.createElement(Sr.Slider,{start:0,end:1,textStyle:{fontWeight:"bold"},formatter:function(e,t,r){return e}})))})),e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(j.VPage),Lr=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).page=Object(D.observer)((function(){return p.createElement(j.Page,{header:"\u8bbf\u95ee\u8bb0\u5f55"},"VPointProductVisitRecord")})),e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(j.VPage),Br=[100,1e3,1e4,1e5,1e6,1e7],Dr={million:{limit:1e8,text:"\u4ebf",fillIn:8},thousand:{limit:1e4,text:"\u4e07",fillIn:4}},Gr=(qt=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(C.a)(e,"browsedProductLib",Wt,Object(L.a)(e)),Object(C.a)(e,"pointProductVisitRecord",Ht,Object(L.a)(e)),Object(C.a)(e,"pointRangeLib",Zt,Object(L.a)(e)),Object(C.a)(e,"pointRange",Yt,Object(L.a)(e)),Object(C.a)(e,"maxPointRange",Kt,Object(L.a)(e)),Object(C.a)(e,"maxPoint",Qt,Object(L.a)(e)),Object(C.a)(e,"maxPointRangeLib",Jt,Object(L.a)(e)),e.maxPointValue="1.1\u4ebf",e.openProductViews=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getBrowsedProductLib();case 2:e.openVPage(Cr);case 3:case"end":return t.stop()}}),t)}))),e.openPointProductVisitRecord=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getPointProductVisitRecord(r);case 2:e.openVPage(Lr);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.openPointsDist=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMaxPoint();case 2:return e.maxPointAdaptive(),e.pointRange=e.maxPointRangeLib[0].value,t.next=6,e.customerPointsDistributionMap();case 6:e.openVPage(Ar);case 7:case"end":return t.stop()}}),t)}))),e.renderSearchHeader=function(t){return e.renderView(We,t)},e.searchKeyBrowseProduct=function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.getBrowsedProductLib=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.browsedProductLib=new j.QueryPager(e.uqs.\u79ef\u5206\u5546\u57ce.GetVisitPointProducts,15,30),e.browsedProductLib.first({});case 2:case"end":return t.stop()}}),t)}))),e.getPointProductVisitRecord=function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.getMaxPoint=Object(v.a)(h.a.mark((function t(){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.uqs.\u79ef\u5206\u5546\u57ce.GetMaxPoints.obj({});case 2:r=t.sent,e.maxPoint=void 0!==r?r.maxPoints:1e4;case 4:case"end":return t.stop()}}),t)}))),e.maxPointAdaptive=function(){var t,r=1e4,n=[],a=1e3,c=1e4,i=1e8,o="\u4e07",s="\u4ebf",u=1.5,l=[{max:1e8,val:5e7},{max:5e7,val:1e7},{max:1e7,val:5e6},{max:5e6,val:1e6},{max:1e6,val:5e5},{max:5e5,val:1e5},{max:1e5,val:5e4},{max:1e4,val:1e4}].find((function(t){return e.maxPoint>t.max})),p=void 0!==l?l.val:a;if(e.maxPoint>=a){for(var m=0;m<=e.maxPoint;m+=p){var d=m-p;if(d>=0){if(e.maxPoint<=c)t="".concat(d,"-").concat(m===c?m/c+o:m);else{d>=i&&(o=s,r=i);var f="".concat(d/r).concat(0!==d?o:"");m>=i&&(o=s,r=i),t="".concat(f,"-").concat(m/r+o)}if(n.push({value:t,title:t}),m===i)break}}for(var b={},h=0;h<=i*u&&(0!==h&&(b[h]=h),!(h>=e.maxPoint));h+=p);if(!(e.maxPoint in b)){var v=n[n.length-1].value.split("-")[1];if("1\u4ebf"===v)e.maxPointRange=e.maxPointValue;else{var g=e.changeTextUnits(v,"toNum");e.maxPointRange=e.changeTextUnits(+g+p,"toText")}n.push({value:"".concat(v,"-").concat(e.maxPointRange),title:"".concat(v,"\u4ee5\u4e0a")})}}else n.push({value:"0-".concat(a),title:"0-".concat(a)});e.maxPointRangeLib=n},e.queryPointDistribution=function(){var t=Object(v.a)(h.a.mark((function t(r){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.pointRange,e.pointRange=n,t.next=4,e.customerPointsDistributionMap();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.customerPointsDistributionMap=Object(v.a)(h.a.mark((function t(){var r,n,a,c,i,o,s,u,l,p,m;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.pointRange.split("-"),n=Number(e.changeTextUnits(r[0],"toNum")),a=Number(e.changeTextUnits(r[1],"toNum")),c=(a-n)/(a-n<=1e4||1e8===n?10:100),i=Br.find((function(e){return c<=e})),o=[],t.next=9,e.getUsersDistOfPointInterval({start:n,end:a,granularity:i});case 9:s=t.sent,u=Object(J.a)(s);try{for(u.s();!(l=u.n()).done;)p=l.value,m="".concat(e.changeTextUnits(p.subStart,"toText"),"-").concat(e.changeTextUnits(p.subEnd,"toText")),o.push({pointRange:m,QTYP:p.numbers})}catch(d){u.e(d)}finally{u.f()}e.pointRangeLib=o;case 13:case"end":return t.stop()}}),t)}))),e.getUsersDistOfPointInterval=function(){var t=Object(v.a)(h.a.mark((function t(r){var n,a,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.start,a=r.end,c=r.granularity,t.abrupt("return",e.uqs.\u79ef\u5206\u5546\u57ce.GetPointDistribution.table({start:n,end:a,granularity:c}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.processPointRange=function(){var t=e.pointRange.replace(/\u4ee5(\u4e0a|\u4e0b)/g,"").split("-");return e.pointRange.endsWith("\u4ee5\u4e0b")&&t.unshift("0"),e.pointRange.endsWith("\u4ee5\u4e0a")&&t.push(e.maxPointRange),t},e.changeTextUnits=function(e,t){var r=Dr;for(var n in r){var a=r[n],c=a.limit,i=a.text,o=a.fillIn;if("toNum"===t&&e.endsWith(i))return e.replace(/\.*/g,"").replace(i,"0".repeat(e.includes(".")?o-1:o));if("toText"===t&&e>=c)return"".concat(e/c).concat(i)}return e},e}return Object(w.a)(r,[{key:"internalStart",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(k),Wt=Object(S.a)(qt.prototype,"browsedProductLib",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ht=Object(S.a)(qt.prototype,"pointProductVisitRecord",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zt=Object(S.a)(qt.prototype,"pointRangeLib",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Yt=Object(S.a)(qt.prototype,"pointRange",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kt=Object(S.a)(qt.prototype,"maxPointRange",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qt=Object(S.a)(qt.prototype,"maxPoint",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jt=Object(S.a)(qt.prototype,"maxPointRangeLib",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),qt),zr=r(20),Ur=r.n(zr),Vr="bg-primary",Fr=r(54),Tr=r.n(Fr),Mr=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).page=Object(D.observer)((function(){var t,r=e.controller,n=r.pageMedia,a=r.searchMadiaKey,c=r.onAddClick,i=r.showCat,o=r.showSlideShow,s=r.showOtherMedia,u=r.onScrollBottom,l=p.createElement("div",{className:"w-19c d-flex"},p.createElement(j.SearchBox,{className:"w-80 mt-1 mr-2",size:"sm",onSearch:function(e){return a(e,1)},placeholder:e.t("searchpicture")}),p.createElement("div",{onClick:c},p.createElement(j.FA,{name:"plus-square-o",size:"2x",className:"mt-1 mr-2"}))),m=n.items,d=n.loading;return t=m?m.map((function(t,r){return e.renderItem(t,r)})):!0===d?p.createElement("div",{className:"m-5"},p.createElement(j.Loading,null)):p.createElement("div",{className:"my-3 mx-2 text-warning"},p.createElement("span",{className:"text-primary"},e.t("nopicture"))),p.createElement(j.Page,{header:e.t("\u5176\u4ed6\u6587\u4ef6"),headerClassName:Vr,right:l,onScrollBottom:u},p.createElement(j.LMR,{className:"bg-white py-3 my-1",right:p.createElement("i",{className:" px-2 iconfont icon-more"}),onClick:function(){return i({name:"\u56fe\u7247\u5206\u7c7b",id:0})}},p.createElement("div",{className:"mx-3 px-2 font-weight-bold"},"\u56fe\u7247\u5206\u7c7b")),p.createElement(j.LMR,{className:"bg-white py-3 my-1",right:p.createElement("i",{className:" px-2 iconfont icon-more"}),onClick:o},p.createElement("div",{className:"mx-3 px-2 font-weight-bold"},"\u8f6e\u64ad\u56fe")),p.createElement(j.LMR,{className:"bg-white py-3 my-1",right:p.createElement("i",{className:" px-2 iconfont icon-more"}),onClick:s},p.createElement("div",{className:"mx-3 px-2 font-weight-bold"},"\u5176\u4ed6\u6587\u4ef6")),p.createElement("div",{className:"mx-3"},p.createElement("div",{className:"row row-cols-2 row-cols-sm-3 row-cols-md-4"},t)))})),e.copyClick=function(t,r){var n=t.target,a=n.innerHTML;Tr()(r),n.innerHTML='<div class="text-center text-danger w-100"> <span style="color:transparent">- - - - - -</span> url '+e.t("copysuccess")+'<span style="color:transparent">- - - - - -</span> </div>',setTimeout((function(){n.innerHTML=a}),1e3)},e.preview=function(e){window.open(e,"_blank")},e.renderItem=function(t,r){var n=e.controller.onRem,a=t.caption,c=t.path,i=t.id,o=t.author,s=j.Tuid.equ(o,e.controller.user.id);console.log(s,"item");var u=e.controller.onimgNames,l={backgroundImage:"url(".concat(c,")")},m=p.createElement("div",{className:"d-flex align-items-center bg-white rounded  cursor-pointer",onClick:function(){return e.preview(t.path)}},p.createElement("div",{className:"w-100 h-100 bg-center-img h-min-12c",style:l}));return s?p.createElement("div",{key:r,className:"col px-3 py-2 border-bottom border-dark"},p.createElement("div",{className:"text-info bg-light p-2 d-flex text-nowrap cursor-pointer border-bottom"},p.createElement("div",{className:"d-flex flex-fill",onClick:function(){return u(i)}},p.createElement("div",{className:"overflow-hidden flex-fill small"},a),p.createElement("div",{className:""},p.createElement(j.FA,{name:"edit"}))),p.createElement("div",{className:"iconfont icon-shanchu pl-1",onClick:function(){return n(i)}})),m,p.createElement("div",{className:"smallPath small my-2 text-muted cursor-pointer",onClick:function(t){return e.copyClick(t,c)}},p.createElement("span",null,c),p.createElement("span",null,p.createElement("small",{className:" text-muted float-right"},e.t("copy"))))):p.createElement("div",{key:r,className:"col px-3 py-2 border-bottom border-dark"},p.createElement("div",{className:"text-info bg-light p-2 d-flex text-nowrap cursor-pointer border-bottom"},p.createElement("div",{className:"d-flex flex-fill",onClick:function(){return u(i)}},p.createElement("div",{className:"overflow-hidden flex-fill small"},a),p.createElement("div",{className:""},p.createElement(j.FA,{name:"edit"})))),m,p.createElement("div",{className:"smallPath small my-2 text-muted cursor-pointer ",onClick:function(t){return e.copyClick(t,c)}},p.createElement("span",null,c),p.createElement("span",null,p.createElement("small",{className:" text-muted float-right"},e.t("copy")))))},e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(e){return p.createElement(this.page,null)}}]),r}(j.VPage),Rr=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).page=Object(D.observer)((function(){var t=e.controller.current,r=t.caption,n=t.author,a=t.template,c=t.$update,i=p.createElement("span",null,p.createElement(j.EasyTime,{date:c})),o=j.Tuid.equ(n,e.controller.user.id)&&p.createElement("button",{className:"btn btn-sm btn-success mr-2 align-self-center"},p.createElement(j.FA,{name:"pencil-square-o"})),s=e.controller.cApp.renderUser(n.id);return p.createElement(j.Page,{header:e.t("editorpicture"),headerClassName:Vr,right:o},p.createElement("div",{className:"p-3"},p.createElement("div",{className:"small text-muted p-1"},e.t("title")),p.createElement("div",{className:"mb-1 h6 px-3 py-2 bg-white"},r),p.createElement(j.LMR,{className:"mb-3 px-3 small text-black-50",right:i},s),p.createElement("div",{className:"small text-muted p-1"},e.t("describe")),p.createElement("div",{className:"small text-muted p-1"},e.t("content")),p.createElement("div",{className:"small text-muted p-1"},e.t("template")),p.createElement("div",{className:"mb-3 px-3 py-2 bg-white h6"},Object(j.tv)(a,(function(e){return p.createElement(p.Fragment,null,e.caption)}),void 0,(function(){return p.createElement("small",{className:"text-muted"},"[\u65e0]")})))))})),e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(j.VPage),qr=(Xt=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(C.a)(e,"media",_t,Object(L.a)(e)),Object(C.a)(e,"mediaPath",$t,Object(L.a)(e)),e.form=void 0,e.onAddSalesTask=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.form){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.form.buttonClick("submit");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onFormButtonClick=function(){var t=Object(v.a)(h.a.mark((function t(r,n){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.closePage(1),(a=Ur.a.clone(n.form.data)).path=e.mediaPath,a.types=1,t.next=6,e.controller.saveItem(e.mediaId,a);case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.uiSchema={items:{caption:{widget:"text",label:e.t("title")},submit:{widget:"button",label:e.t("submit")}}},e.schema=[{name:"caption",type:"string",required:!0}],e.onSaved=function(t){e.mediaPath=e.getMediaPath(t),e.closePage()},e.onUpload=function(){e.media=e.form.data,e.openPageElement(p.createElement(j.ImageUploader,{onSaved:e.onSaved}))},e.page=Object(D.observer)((function(){var t,r;return e.mediaPath?(t=p.createElement("div",{className:"m-3 text-center w-max-30c border"},p.createElement("img",{className:"w-8c h-8c border",src:e.mediaPath})),r=p.createElement("div",{className:"px-1 "},p.createElement("div",{className:"text-content text-center"},p.createElement("button",{type:"button",className:"btn btn-primary mx-2 col-11",onClick:e.onAddSalesTask},e.t("save"))))):t=p.createElement("div",{className:"text-content text-center"},p.createElement("button",{className:"btn btn-primary mr-3",onClick:e.onUpload},e.t("uploadpicture"))),p.createElement(j.Page,{header:e.t("editorpicture"),headerClassName:Vr},p.createElement("div",{className:"mx-3"},p.createElement(j.Form,{ref:function(t){return e.form=t},className:"my-3",formData:e.media,schema:e.schema,uiSchema:e.uiSchema,onButtonClick:e.onFormButtonClick,requiredFlag:!0})),t,r)})),e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.media=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMediaPath",value:function(e){return j.nav.resUrl+e.substr(1)}},{key:"mediaId",get:function(){return this.media&&this.media.id}}]),r}(j.VPage),_t=Object(S.a)(Xt.prototype,"media",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$t=Object(S.a)(Xt.prototype,"mediaPath",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xt),Wr=(er=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).form=void 0,Object(C.a)(e,"showTips",tr,Object(L.a)(e)),e.onItemChanged=function(){var t=Object(v.a)(h.a.mark((function t(r,n,a){var c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=r.name,e.controller.current[c]=n;case 2:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),e.onClickSaveButton=Object(v.a)(h.a.mark((function t(){var r,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.controller.current,n=r&&r.id,console.log(n,"id"),t.next=5,e.controller.saveItem(n,r);case 5:e.closePage();case 6:case"end":return t.stop()}}),t)}))),e.uiSchema={items:{caption:{widget:"text",label:e.t("title")},submit:{widget:"button",label:e.t("submit")}}},e.schema=[{name:"caption",type:"string",required:!0}],e.setSlideShow=Object(v.a)(h.a.mark((function t(){var r,n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.controller,n=r.current,a=r.updateSlideShow,e.showTips="",setTimeout((function(){e.showTips="none"}),2e3),t.next=5,a(n.id,void 0,void 0,void 0,0,1);case 5:case"end":return t.stop()}}),t)}))),e.page=Object(D.observer)((function(){var t=e.controller,r=t.current,n=t.showPickCat,a=t.pageImageCat,c=p.createElement("div",null,p.createElement("button",{type:"button",className:"btn btn-sm btn-success mr-3",onClick:e.setSlideShow},e.t("\u8bbe\u4e3a\u8f6e\u64ad\u56fe")),p.createElement("button",{type:"button",className:"btn btn-sm btn-success mr-3",onClick:function(){return n("0")}},e.t("\u5206\u7c7b")),p.createElement("button",{type:"button",className:"btn btn-sm btn-success mr-3",onClick:e.onClickSaveButton},e.t("submit")));return p.createElement(j.Page,{header:e.t("editorpicture"),right:c,headerClassName:Vr},p.createElement("div",{className:"mx-3 py-2 h-100 d-flex flex-column"},p.createElement(j.Edit,{data:r,schema:e.schema,uiSchema:e.uiSchema,onItemChanged:e.onItemChanged}),p.createElement("div",{className:"py-2 my-1 text-primary"},p.createElement("strong",null,"\u7c7b\u578b")),p.createElement(j.List,{before:"",none:"\u65e0",items:a,item:{render:e.renderItem}})),p.createElement("div",{className:"w-100 text-center"},p.createElement("div",{className:"text-center text-white small px-2",style:{width:"20%",margin:"-30rem auto 0 auto",padding:"4px",borderRadius:"3px",backgroundColor:"#505050",display:e.showTips}},"\u8bbe\u7f6e\u5b8c\u6210")))})),e.renderItem=function(t,r){var n=e.controller.delImageCat,a=t.name,c=t.id;return p.createElement("div",{className:"pl-2 pl-sm-3 pr-2 pr-sm-3 py-2 d-flex"},p.createElement("div",{className:"d-flex flex-fill mx-2"},p.createElement("span",null,a)),p.createElement("div",null,p.createElement("span",{className:"text-danger",onClick:function(){return n(c)}},p.createElement("span",{className:"iconfont icon-shanchu pl-1"}))))},e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return p.createElement(this.page,null)}}]),r}(j.VPage),tr=Object(S.a)(er.prototype,"showTips",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"none"}}),er),Hr=(rr=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(C.a)(e,"capton",nr,Object(L.a)(e)),Object(C.a)(e,"pageCat",ar,Object(L.a)(e)),e.page=Object(D.observer)((function(){return p.createElement(j.Page,{header:e.capton,headerClassName:Vr,onScrollBottom:e.onScrollBottom},p.createElement(j.List,{before:"",items:e.pageCat,item:{render:e.renderItem}}))})),e.onScrollBottom=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.pageMedia.more();case 2:case"end":return t.stop()}}),t)}))),e.renderItem=function(t,r){var n=t.name,a=t.id;return p.createElement("div",{className:"pl-2 pl-sm-3 pr-2 pr-sm-3 py-3 d-flex "},p.createElement("div",{className:"mx-2 w-50 small"},p.createElement("span",null,n)),p.createElement("div",{className:"w-25 text-right w-7c",onClick:function(){return e.controller.showCatImage(a)}},p.createElement("span",{className:"p-2 small pl-4 text-primary cursor-pointer"},"\u56fe \u7247")),p.createElement("div",{className:"w-25  text-right w-7c",onClick:function(){return e.controller.showCat(t)}},p.createElement("span",{className:"p-2 small pl-4 text-primary cursor-pointer iconfont icon-jiantouyou",style:{fontSize:"12px"}})))},e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.pageCat=t.pageCat,this.capton=t.name,this.openPage(this.page);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(j.VPage),nr=Object(S.a)(rr.prototype,"capton",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ar=Object(S.a)(rr.prototype,"pageCat",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rr),Zr=(cr=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(C.a)(e,"pageCat",ir,Object(L.a)(e)),e.page=Object(D.observer)((function(){return p.createElement(j.Page,{header:e.t("picture"),headerClassName:Vr},p.createElement(j.List,{before:"",items:e.pageCat,item:{render:e.renderItem}}))})),e.renderItem=function(t,r){var n=e.controller,a=n.showPickCat,c=n.onPickCat,i=n.current,o=t.name,s=t.id;return p.createElement("div",{className:"pl-2 pl-sm-3 pr-2 pr-sm-3 pt-2 pb-3 d-flex"},p.createElement("div",{className:"d-flex flex-fill mx-2"},p.createElement("span",null,o)),p.createElement("div",{className:"d-flex"},p.createElement("div",{className:"small d-flex cursor-pointer text-primary text-right w-7c "},p.createElement("button",{className:"btn btn-outline-info mx-2 px-3",onClick:function(){return c(i.id,s)}},"\u9009\u62e9")),p.createElement("div",{className:"small d-flex cursor-pointer text-primary text-right w-7c "},p.createElement("button",{className:"btn btn-outline-info mx-2 px-3",onClick:function(){return a(s)}},"\u4e0b\u4e00\u7ea7"))))},e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.pageCat=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(j.VPage),ir=Object(S.a)(cr.prototype,"pageCat",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cr),Yr=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).cat=void 0,e.page=Object(D.observer)((function(){var t,r=e.controller,n=r.pageCatImage,a=r.searchCatImage,c=r.onAddClick,i=p.createElement("div",{className:"w-19c d-flex"},p.createElement(j.SearchBox,{className:"w-80 mt-1 mr-2",size:"sm",onSearch:function(t){return a(t,e.cat)},placeholder:e.t("searchpicture")}),p.createElement("div",{onClick:c},p.createElement("span",{className:"ml-2 iconfont icon-jiahao1 mr-2",style:{fontSize:"26px",color:"white"}}))),o=n.items,s=n.loading;return t=o?o.map((function(t,r){return e.renderItem(t,r)})):!0===s?p.createElement("div",{className:"m-5"},p.createElement(j.Loading,null)):p.createElement("div",{className:"my-3 mx-2 text-warning"},p.createElement("span",{className:"text-primary"},e.t("nopicture"))),p.createElement(j.Page,{header:e.t("picture"),headerClassName:Vr,right:i,onScrollBottom:e.onScrollBottom},p.createElement("div",{className:"mx-3"},p.createElement("div",{className:"row row-cols-2 row-cols-sm-3 row-cols-md-4"},t)))})),e.onScrollBottom=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.pageMedia.more();case 2:case"end":return t.stop()}}),t)}))),e.copyClick=function(t,r){var n=t.target,a=n.innerHTML;Tr()(r),n.innerHTML='<div class="text-center text-danger w-100"> <span style="color:transparent">- - - - - -</span> url '+e.t("copysuccess")+'<span style="color:transparent">- - - - - -</span> </div>',setTimeout((function(){n.innerHTML=a}),1e3)},e.preview=function(e){window.open(e,"_blank")},e.renderItem=function(t,r){var n=e.controller.onRem,a=t.caption,c=t.path,i=t.id,o=t.author,s=j.Tuid.equ(o,e.controller.user.id);console.log(s,"item");var u=e.controller.onimgNames,l={backgroundImage:"url(".concat(c,")")},m=p.createElement("div",{className:"d-flex align-items-center bg-white rounded  cursor-pointer",onClick:function(){return e.preview(t.path)}},p.createElement("div",{className:"w-100 h-100 bg-center-img h-min-12c",style:l}));return s?p.createElement("div",{key:r,className:"col px-3 py-2 border-bottom border-dark"},p.createElement("div",{className:"text-info bg-light p-2 d-flex text-nowrap cursor-pointer border-bottom"},p.createElement("div",{className:"d-flex flex-fill",onClick:function(){return u(i)}},p.createElement("div",{className:"overflow-hidden flex-fill small"},a),p.createElement("div",{className:""},p.createElement(j.FA,{name:"edit"}))),p.createElement("div",{className:"iconfont icon-shanchu pl-1",onClick:function(){return n(i)}})),m,p.createElement("div",{className:"smallPath small my-2 text-muted cursor-pointer position-relative",onClick:function(t){return e.copyClick(t,c)}},p.createElement("span",null,c),p.createElement("small",{className:"position-absolute text-muted",style:{right:0,bottom:0}},e.t("copy")))):p.createElement("div",{key:r,className:"col px-3 py-2 border-bottom border-dark"},p.createElement("div",{className:"text-info bg-light p-2 d-flex text-nowrap cursor-pointer border-bottom"},p.createElement("div",{className:"d-flex flex-fill",onClick:function(){return u(i)}},p.createElement("div",{className:"overflow-hidden flex-fill small"},a),p.createElement("div",{className:""},p.createElement(j.FA,{name:"edit"})))),m,p.createElement("div",{className:"smallPath small my-2 text-muted cursor-pointer position-relative",onClick:function(t){return e.copyClick(t,c)}},p.createElement("span",null,c),p.createElement("small",{className:"position-absolute text-muted",style:{right:0,bottom:0}},e.t("copy"))))},e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.cat=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(j.VPage),Kr=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).page=Object(D.observer)((function(){var t,r=e.controller,n=r.pageSlideShow,a=r.pickImage,c=p.createElement("span",{onClick:a,className:"mx-2 iconfont icon-jiahao1 cursor-pointer",style:{fontSize:"1.7rem",color:"white"}}),i=n.items,o=n.loading;return t=i?i.map((function(t,r){return e.renderItem(t,r)})):!0===o?p.createElement("div",{className:"m-5"},p.createElement(j.Loading,null)):p.createElement("div",{className:"my-3 mx-2 text-warning"},p.createElement("span",{className:"text-primary"},e.t("nopicture"))),p.createElement(j.Page,{header:e.t("\u8f6e\u64ad\u56fe"),headerClassName:Vr,right:c},p.createElement("div",{className:"mx-3"},p.createElement("div",{className:"row row-cols-2 row-cols-sm-3 row-cols-md-4"},t)))})),e.preview=function(e){window.open(e,"_blank")},e.renderItem=function(t,r){var n=e.controller,a=n.delSlideShow,c=n.showEditSlideShow,i=t.caption,o=t.path,s=t.image,u=t.sort,l=t.types,m={backgroundImage:"url(".concat(o,")")},d=l?"\u662f":"\u5426",f=p.createElement("div",{className:"d-flex align-items-center bg-white rounded  cursor-pointer",onClick:function(){return e.preview(t.path)}},p.createElement("div",{className:"w-100 h-100 bg-center-img h-min-12c ",style:m}));return p.createElement("div",{key:r,className:"col px-3 py-2 border-bottom border-dark"},p.createElement("div",{className:"text-info bg-light p-2 d-flex text-nowrap cursor-pointer border-bottom"},p.createElement("div",{className:"d-flex flex-fill"},p.createElement("div",{className:"overflow-hidden flex-fill small"},i),p.createElement("div",{className:"iconfont icon-shanchu pl-1",onClick:function(){return a(s)}}))),f,p.createElement("div",{className:"text-info bg-light p-2 d-flex text-nowrap cursor-pointer border-bottom"},p.createElement("div",{className:"d-flex  flex-fill smallPath small my-2  text-primary cursor-pointer position-relative"},p.createElement("div",{className:"overflow-hidden flex-fill small px-3"},"\u53d1\u5e03\uff1a",d),p.createElement("div",{className:"overflow-hidden flex-fill small px-3"},"\u6392\u5e8f\uff1a",u),p.createElement("div",{onClick:function(){return c(t)}},p.createElement(j.FA,{name:"edit"})))))},e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(j.VPage),Qr=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).page=Object(D.observer)((function(){var t,r=e.controller,n=r.pageMedia,a=r.searchMadiaKey,c=r.onScrollBottom,i=p.createElement(j.SearchBox,{className:"w-80 mt-2 mr-2",size:"sm",onSearch:function(e){return a(e)},placeholder:e.t("selectpicture")}),o=n.items,s=n.loading;return t=o?o.map((function(t,r){return e.renderItem(t,r)})):!0===s?p.createElement("div",{className:"m-5"},p.createElement(j.Loading,null)):p.createElement("div",{className:"my-3 mx-2 text-warning"},p.createElement("span",{className:"text-primary"},e.t("nopicture"))),p.createElement(j.Page,{header:e.t("selectpicture"),headerClassName:Vr,right:i,onScrollBottom:c},p.createElement("div",{className:"mx-3"},p.createElement("div",{className:"row row-cols-2 row-cols-sm-3 row-cols-md-4"},t)))})),e.itemClick=function(t){e.controller.onPickedImage(t.id)},e.renderItem=function(t,r){var n=t.caption,a=t.path,c=t.author,i=j.Tuid.equ(c,e.controller.user.id);console.log(i,"item");var o={backgroundImage:"url(".concat(a,")")},s=p.createElement("div",{className:"d-flex align-items-center bg-white rounded  cursor-pointer",onClick:function(r){return e.itemClick(t)}},p.createElement("div",{className:"w-100 h-100 bg-center-img h-min-12c",style:o}));return p.createElement("div",{key:r,className:"col px-3 py-2 border-bottom border-dark"},p.createElement("div",{className:"text-info bg-light p-2 d-flex text-nowrap cursor-pointer border-bottom"},p.createElement("div",{className:"d-flex flex-fill"},p.createElement("div",{className:"overflow-hidden flex-fill small"},n))),s,p.createElement("div",{className:"smallPath small my-2 text-muted cursor-pointer position-relative"},p.createElement("span",null,a),p.createElement("small",{className:"position-absolute text-muted",style:{right:0,bottom:0}})))},e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return p.createElement(this.page,null)}}]),r}(j.VPage),Jr=(or=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(C.a)(e,"media",sr,Object(L.a)(e)),e.form=void 0,e.onAdd=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.form){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.form.buttonClick("submit");case 4:case"end":return t.stop()}}),t)}))),e.onFormButtonClick=function(){var t=Object(v.a)(h.a.mark((function t(r,n){var a,c,i,o,s,u;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.closePage(1),a=n.form.data,c=a.caption,i=a.description,o=a.src,s=a.types,u=a.sort,t.next=4,e.controller.updateSlideShow(e.media.image.id,c,i,o,s,u);case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.uiSchema={items:{caption:{widget:"text",label:e.t("\u6807\u9898")},description:{widget:"text",label:e.t("\u8bf4\u660e")},src:{widget:"text",label:e.t("\u94fe\u63a5")},types:{widget:"checkbox",label:e.t("\u662f\u5426\u53d1\u5e03")},sort:{widget:"updown",label:e.t("\u6392\u5e8f")},submit:{widget:"button",label:e.t("submit")}}},e.schema=[{name:"caption",type:"string",required:!0},{name:"description",type:"string",required:!0},{name:"src",type:"string",required:!0},{name:"types",type:"string",required:!0},{name:"sort",type:"string",required:!0}],e.page=Object(D.observer)((function(){var t=p.createElement("button",{type:"button",onClick:e.onAdd,className:"btn btn-sm btn-success mr-3"},e.t("submit"));return p.createElement(j.Page,{header:e.t("editorpicture"),headerClassName:Vr,right:t},p.createElement("div",{className:"mx-3"},p.createElement(j.Form,{ref:function(t){return e.form=t},className:"my-3",formData:e.media,schema:e.schema,uiSchema:e.uiSchema,onButtonClick:e.onFormButtonClick,requiredFlag:!0})))})),e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.media=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(j.VPage),sr=Object(S.a)(or.prototype,"media",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),or),Xr=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).page=Object(D.observer)((function(){var t=e.controller,r=t.pageFile,n=t.searchMadiaKey,a=t.addAddFile,c=t.onScrollBottom,i=p.createElement("div",{className:"w-19c d-flex"},p.createElement(j.SearchBox,{className:"w-80 mt-1 mr-2",size:"sm",onSearch:function(e){return n(e,2)},placeholder:e.t("\u641c\u7d22\u6587\u4ef6")}),p.createElement("div",{onClick:a},p.createElement("span",{className:"ml-2 iconfont icon-jiahao1 mr-2",style:{fontSize:"26px",color:"white"}}))),o=p.createElement("div",{className:"my-3 mx-2"},p.createElement("span",{className:"text-muted small"},"[",e.t("noposts"),"]"));return p.createElement(j.Page,{header:e.t("\u6587\u4ef6"),headerClassName:Vr,right:i,onScrollBottom:c},p.createElement(j.List,{before:"",none:o,items:r,item:{render:e.renderItem}}))})),e.copyClick=function(t,r){var n=t.target,a=n.innerHTML;Tr()(r),n.innerHTML='<div class="text-center text-danger samll"><small>'+e.t("copysuccess")+"</small></div>",setTimeout((function(){n.innerHTML=a}),1e3)},e.preview=function(e){window.open(e,"_blank")},e.renderItem=function(t,r){var n=e.controller,a=n.delFile,c=n.editFile,i=t.caption,o=t.path,s=t.id,u=2===t.types.id?"iconfont icon-PDF mx-3":"iconfont icon-shipin mx-3";return p.createElement("div",{key:r,className:"row py-2 cursor-pointer"},p.createElement("div",{className:"col-10 d-flex",onClick:function(){return e.preview(t.path)}},p.createElement("div",{className:u,style:{fontSize:"35px"}}),p.createElement("div",null,p.createElement("div",{className:"mr-3 strong"},i),p.createElement("div",{className:"small"},o))),p.createElement("div",{className:"col-2 pt-2"},p.createElement("span",{className:"iconfont icon-xiugai1 mx-2",onClick:function(){return c(s)}}),p.createElement("span",{className:"iconfont icon-shanchu mx-2",onClick:function(){return a(s)}}),p.createElement("span",{onClick:function(t){return e.copyClick(t,o)}}," ",e.t("copy"))))},e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(j.VPage);function _r(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2?arguments[2]:void 0;for(n=n||["B","K","M","G","TB"];(t=n.shift())&&e>1024;)e/=1024;return("B"===t?e:e.toFixed(void 0===r?2:r))+t}var $r,en,tn,rn,nn,an,cn,on,sn,un,ln,pn,mn,dn,fn,bn,hn,vn,gn,wn,yn,xn,jn,On,Pn,En,kn,Nn,Cn,Sn,In,An,Ln,Bn,Dn,Gn,zn=Object(D.observer)((xr=yr=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(e){var n;return Object(g.a)(this,r),(n=t.call(this,e)).suffix=void 0,n.resUploader=void 0,Object(C.a)(n,"content",pr,Object(L.a)(n)),Object(C.a)(n,"file",mr,Object(L.a)(n)),Object(C.a)(n,"fileSize",dr,Object(L.a)(n)),Object(C.a)(n,"isChanged",fr,Object(L.a)(n)),Object(C.a)(n,"resId",br,Object(L.a)(n)),Object(C.a)(n,"enableUploadButton",hr,Object(L.a)(n)),Object(C.a)(n,"fileError",vr,Object(L.a)(n)),Object(C.a)(n,"uploaded",gr,Object(L.a)(n)),Object(C.a)(n,"uploading",wr,Object(L.a)(n)),n.onFileChange=function(e){if(n.fileError=void 0,n.uploaded=!1,n.enableUploadButton=e.target.files.length>0,n.enableUploadButton){n.file=e.target.files[0];var t=n.file.name.lastIndexOf(".");if(t>=0&&(n.suffix=n.file.name.substr(t+1).toLowerCase()),r.audioTypes.indexOf(n.suffix)<0)return void(n.fileError="\u6587\u4ef6\u7c7b\u578b\u5fc5\u987b\u662f ".concat(r.audioTypes.join(", ")," \u4e2d\u7684\u4e00\u79cd"));var a=new FileReader;a.readAsDataURL(n.file),a.onload=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.content=a.result,n.fileSize=n.content.length;case 2:case"end":return e.stop()}}),e)})))}},n.upload=Object(v.a)(h.a.mark((function e(){var t,r,a,c,i,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.resUploader){e.next=2;break}return e.abrupt("return");case 2:return n.uploading=!0,t=new FormData,r=n.convertBase64UrlToBlob(n.content),t.append("image",r,n.file.name),e.next=8,n.resUploader.upload(t);case 8:if("object"!==typeof(a=e.sent)){e.next=25;break}c=a.error,i=typeof c,e.t0=i,e.next="undefined"===e.t0?15:"string"===e.t0?17:"object"===e.t0?19:21;break;case 15:return o="error: undefined",e.abrupt("break",23);case 17:return o=c,e.abrupt("break",23);case 19:return o=c.message,e.abrupt("break",23);case 21:return o=String(o),e.abrupt("break",23);case 23:return n.fileError="error: "+i+" - "+o,e.abrupt("return");case 25:n.resId=a,n.isChanged=n.resId!==n.props.id,n.uploaded=!0;case 28:case"end":return e.stop()}}),e)}))),n.onSaved=function(){var e=n.props.onSaved;e&&e(n.resId)},n.resId=e.id,n}return Object(w.a)(r,[{key:"convertBase64UrlToBlob",value:function(e){for(var t=e.split(","),r=t[0].match(/:(.*?);/)[1],n=atob(t[1]),a=n.length,c=new Uint8Array(a);a--;)c[a]=n.charCodeAt(a);return new Blob([c],{type:r})}},{key:"render",value:function(){var e=this,t=this.props.label,n=p.createElement("button",{className:"btn btn-sm btn-success align-self-center mr-2",disabled:!this.isChanged,onClick:this.onSaved},"\u4fdd\u5b58");return p.createElement(j.Page,{header:t||"\u66f4\u6539\u6587\u4ef6",right:n},p.createElement("div",{className:"my-3 px-3 py-3 bg-white"},p.createElement("div",null,p.createElement("div",{className:"mb-3"},p.createElement(j.ResUploader,{ref:function(t){return e.resUploader=t},multiple:!1,maxSize:2048,label:"\u9009\u62e9\u6587\u4ef6",onFilesChange:this.onFileChange}),p.createElement("div",{className:"small text-muted"},"\u652f\u6301 ",r.audioTypes.join(", ")," \u683c\u5f0f\u3002"),this.fileError&&p.createElement("div",{className:"text-danger"},this.fileError)))),p.createElement(j.LMR,{left:!0===this.uploaded?p.createElement("div",{className:"text-success p-2"},"\u4e0a\u4f20\u6210\u529f\uff01"):!0===this.uploading?p.createElement("div",{className:"m-3"},p.createElement(j.Loading,null)):this.file&&this.content&&p.createElement("div",{className:"m-3"},p.createElement("div",{className:"mb-3"},"\u6587\u4ef6\u5927\u5c0f\uff1a",_r(this.fileSize)),p.createElement("button",{className:"btn btn-primary",disabled:!this.enableUploadButton,onClick:this.upload},"\u4e0a\u4f20"))}))}}]),r}(p.Component),yr.audioTypes=["pdf","mp4"],lr=xr,pr=Object(S.a)(lr.prototype,"content",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mr=Object(S.a)(lr.prototype,"file",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dr=Object(S.a)(lr.prototype,"fileSize",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fr=Object(S.a)(lr.prototype,"isChanged",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),br=Object(S.a)(lr.prototype,"resId",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hr=Object(S.a)(lr.prototype,"enableUploadButton",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vr=Object(S.a)(lr.prototype,"fileError",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gr=Object(S.a)(lr.prototype,"uploaded",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),wr=Object(S.a)(lr.prototype,"uploading",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ur=lr))||ur,Un=($r=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(C.a)(e,"media",en,Object(L.a)(e)),Object(C.a)(e,"mediaPath",tn,Object(L.a)(e)),e.form=void 0,e.mediaType=W,e.onAddSalesTask=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.form){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.form.buttonClick("submit");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onFormButtonClick=function(){var t=Object(v.a)(h.a.mark((function t(r,n){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.closePage(1),(a=Ur.a.clone(n.form.data)).path=e.mediaPath,a.types=e.getFileExtension(a.path),t.next=6,e.controller.saveItem(e.mediaId,a);case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.getFileExtension=function(e){return"pdf"===e.substring(e.lastIndexOf(".")+1)?2:3},e.uiSchema={items:{caption:{widget:"text",label:e.t("title")},submit:{widget:"button",label:e.t("submit")}}},e.schema=[{name:"caption",type:"string",required:!0}],e.onSaved=function(t){e.mediaPath=e.getMediaPath(t),e.closePage()},e.onUploadFilePDF=function(){e.media=e.form.data,e.mediaType=W,e.openPageElement(p.createElement(zn,{onSaved:e.onSaved}))},e.page=Object(D.observer)((function(){var t,r;return e.mediaPath?(t=p.createElement("div",{className:"m-3 text-center w-max-30c border"},p.createElement("img",{className:"w-8c h-8c border",src:e.mediaPath})),r=p.createElement("div",{className:"px-1 "},p.createElement("div",{className:"text-content text-center"},p.createElement("button",{type:"button",className:"btn btn-primary mx-2 col-11",onClick:e.onAddSalesTask},e.t("save"))))):t=p.createElement("div",{className:"text-content text-center"},p.createElement("button",{className:"btn btn-primary mr-3",onClick:e.onUploadFilePDF},e.t("\u4e0a\u4f20\u6587\u4ef6"))),p.createElement(j.Page,{header:e.t("\u4e0a\u4f20\u6587\u4ef6"),headerClassName:Vr},p.createElement("div",{className:"mx-3"},p.createElement(j.Form,{ref:function(t){return e.form=t},className:"my-3",formData:e.media,schema:e.schema,uiSchema:e.uiSchema,onButtonClick:e.onFormButtonClick,requiredFlag:!0})),t,r)})),e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.media=t,this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMediaPath",value:function(e){return j.nav.resUrl+e.substr(1)}},{key:"mediaId",get:function(){return this.media&&this.media.id}}]),r}(j.VPage),en=Object(S.a)($r.prototype,"media",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tn=Object(S.a)($r.prototype,"mediaPath",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$r),Vn=(rn=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(C.a)(e,"showTips",nn,Object(L.a)(e)),e.onItemChanged=function(){var t=Object(v.a)(h.a.mark((function t(r,n,a){var c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=r.name,e.controller.current[c]=n;case 2:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),e.onClickSaveButton=Object(v.a)(h.a.mark((function t(){var r,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.controller.current,n=r&&r.id,t.next=4,e.controller.saveItem(n,r);case 4:e.closePage();case 5:case"end":return t.stop()}}),t)}))),e.uiSchema={items:{caption:{widget:"text",label:e.t("title")},submit:{widget:"button",label:e.t("submit")}}},e.schema=[{name:"caption",type:"string",required:!0}],e.page=Object(D.observer)((function(){var t=e.controller.current,r=p.createElement("div",null,p.createElement("button",{type:"button",className:"btn btn-sm btn-success mr-3",onClick:e.onClickSaveButton},e.t("submit")));return p.createElement(j.Page,{header:e.t("editorpicture"),headerClassName:Vr,right:r},p.createElement("div",{className:"mx-3 py-2 h-100 d-flex flex-column"},p.createElement(j.Edit,{data:t,schema:e.schema,uiSchema:e.uiSchema,onItemChanged:e.onItemChanged})))})),e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(j.VPage),nn=Object(S.a)(rn.prototype,"showTips",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"none"}}),rn),Fn=(an=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e,n=this;Object(g.a)(this,r);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return e=t.call.apply(t,[this].concat(c)),Object(C.a)(e,"pageMedia",cn,Object(L.a)(e)),Object(C.a)(e,"current",on,Object(L.a)(e)),Object(C.a)(e,"pageImageCat",sn,Object(L.a)(e)),Object(C.a)(e,"pageCatImage",un,Object(L.a)(e)),Object(C.a)(e,"pageSlideShow",ln,Object(L.a)(e)),Object(C.a)(e,"pageFile",pn,Object(L.a)(e)),e.searchMadiaKey=function(){var t=Object(v.a)(h.a.mark((function t(r,n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.pageMedia=new j.QueryPager(e.uqs.webBuilder.SearchImage,15,30),e.pageMedia.first({key:r,types:n});case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.onScrollBottom=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.pageMedia.more();case 2:case"end":return t.stop()}}),t)}))),e.saveItem=function(){var t=Object(v.a)(h.a.mark((function t(r,n){var a,c,i,o,s,u;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.caption,c=n.path,i=n.types,o={caption:a,path:c,author:e.user.id,isValid:1,types:i},t.next=4,e.uqs.webBuilder.Image.save(r,o);case 4:s=t.sent,i===q?(r?(void 0!==(u=e.pageMedia.items.find((function(e){return e.id===r})))&&(Ur.a.merge(u,n),u.$update=new Date),e.current=u):(n.id=s.id,n.$create=new Date,n.$update=new Date,e.pageMedia.items.unshift(n),e.current=n),e.searchMadiaKey("",q)):e.searcFileKey("",H);case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.onAddClick=function(){e.current=void 0,e.openVPage(qr)},e.onimgNames=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.uqs.webBuilder.Image.load(r);case 2:return e.current=t.sent,t.next=5,e.searchImageCat(r);case 5:e.openVPage(Wr);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.render=Object(D.observer)((function(){return e.renderView(Mr)})),e.showMedia=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.searchImageCat(r);case 2:return t.next=4,e.uqs.webBuilder.Image.load(r);case 4:e.current=t.sent,e.openVPage(Rr);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.loadList=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.searchMadiaKey("",q);case 1:case"end":return t.stop()}}),t)}))),e.onRem=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.uqs.webBuilder.Image.save(r,{isValid:0});case 2:e.current=t.sent,e.searchMadiaKey("",q);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showPickCat=function(){var t=Object(v.a)(h.a.mark((function t(r){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=new j.QueryPager(e.uqs.webBuilder.SearchCat,15,100)).first({parent:r}),e.openVPage(Zr,n);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onPickCat=function(){var t=Object(v.a)(h.a.mark((function t(r,n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.uqs.webBuilder.ImageCat.add({image:r,arr1:[{cat:n}]});case 2:return t.next=4,e.searchImageCat(r);case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.searchImageCat=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.pageImageCat=new j.QueryPager(e.uqs.webBuilder.SearchImageCat,15,30),e.pageImageCat.first({image:r});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.delImageCat=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.uqs.webBuilder.ImageCat.del({image:e.current.id,arr1:[{cat:r}]});case 2:e.pageImageCat=new j.QueryPager(e.uqs.webBuilder.SearchImageCat,15,30),e.pageImageCat.first({image:e.current.id});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showCat=function(){var t=Object(v.a)(h.a.mark((function t(r){var n,a,c,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=r.id,a=r.name,(c=new j.QueryPager(e.uqs.webBuilder.SearchCat,15,30)).first({parent:r}),i={pageCat:c,id:n,name:a},e.openVPage(Hr,i);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showCatImage=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.searchCatImage("",r);case 2:e.openVPage(Yr,r);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.searchCatImage=function(){var t=Object(v.a)(h.a.mark((function t(r,n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.pageCatImage=new j.QueryPager(e.uqs.webBuilder.SearchCatImage,15,30),e.pageCatImage.first({key:r,cat:n});case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.showSlideShow=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.searchSlideShow();case 2:e.openVPage(Kr);case 3:case"end":return t.stop()}}),t)}))),e.searchSlideShow=function(){e.pageSlideShow=new j.QueryPager(e.uqs.webBuilder.SearchSlideShow,15,30),e.pageSlideShow.first({})},e.pickImage=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.searchMadiaKey("",q),t.next=3,e.vCall(Qr);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)}))),e.onPickedImage=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.closePage(),t.next=3,e.uqs.webBuilder.UpdateSlideShow.submit({image:r,caption:void 0,description:void 0,src:void 0,types:0,sort:1});case 3:return t.next=5,e.searchSlideShow();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.delSlideShow=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.uqs.webBuilder.DeleteSlideShow.submit({_image:r.id});case 2:return t.next=4,e.searchSlideShow();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showEditSlideShow=function(t){e.openVPage(Jr,t)},e.updateSlideShow=function(){var t=Object(v.a)(h.a.mark((function t(r,n,a,c,i,o){var s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=i?1:0,t.next=3,e.uqs.webBuilder.UpdateSlideShow.submit({image:r,types:s,caption:n,description:a,src:c,sort:o});case 3:return t.next=5,e.searchSlideShow();case 5:case"end":return t.stop()}}),t)})));return function(e,r,n,a,c,i){return t.apply(this,arguments)}}(),e.searcFileKey=function(){var t=Object(v.a)(h.a.mark((function t(r,n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.pageFile=new j.QueryPager(e.uqs.webBuilder.SearchImage,15,30),e.pageFile.first({key:r,types:n});case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.showOtherMedia=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.searcFileKey("",H);case 2:e.openVPage(Xr);case 3:case"end":return t.stop()}}),t)}))),e.addAddFile=function(){e.openVPage(Un)},e.delFile=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.uqs.webBuilder.Image.save(r,{isValid:0});case 2:return e.current=t.sent,t.next=5,e.searchMadiaKey("",H);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.editFile=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.uqs.webBuilder.Image.load(r);case 2:e.current=t.sent,e.openVPage(Vn);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.tab=function(){return p.createElement(n.render,null)},e.openMainPage=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.searchMadiaKey("",1);case 2:e.openVPage(Mr);case 3:case"end":return t.stop()}}),t)}))),e}return Object(w.a)(r,[{key:"internalStart",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(k),cn=Object(S.a)(an.prototype,"pageMedia",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),on=Object(S.a)(an.prototype,"current",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sn=Object(S.a)(an.prototype,"pageImageCat",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),un=Object(S.a)(an.prototype,"pageCatImage",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ln=Object(S.a)(an.prototype,"pageSlideShow",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pn=Object(S.a)(an.prototype,"pageFile",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),an),Tn={$zh:{post:"\u5e16\u6587",noposts:"\u65e0\u5e16\u6587",editorpost:"\u7f16\u8f91\u5e16\u6587",searchpost:"\u641c\u7d22\u5e16\u6587",postdetailed:"\u5e16\u6587\u660e\u7ec6",title:"\u6807\u9898",describe:"\u63cf\u8ff0",content:"\u5185\u5bb9",estimate:"\u8bc4\u4ef7",publish:"\u53d1\u5e03",productpublish:"\u4ea7\u54c1\u53d1\u5e03",selectproduct:"\u9009\u62e9\u4ea7\u54c1",ordinarypublish:"\u666e\u901a\u53d1\u5e03",noproduct:"\u65e0\u4ea7\u54c1",sales:"\u9500\u552e\u52a9\u624b",agent:"\u8f7b\u4ee3\u7406",privateSite:"\u5185\u90e8\u7f51\u9875",publicSite:"\u5185\u5bb9\u7f51\u7ad9",internationSite:"\u56fd\u9645\u7f51\u7ad9",sourcecode:"\u6e90\u7801",picture:"\u56fe\u7247",searchpicture:"\u641c\u7d22\u56fe\u7247",selectpicture:"\u9009\u62e9\u56fe\u7247",editorpicture:"\u7f16\u8f91\u56fe\u7247",nopicture:"\u65e0\u56fe\u7247",uploadpicture:"\u4e0a\u4f20\u56fe\u7247",uploadaudio:"\u4e0a\u4f20\u97f3\u9891",template:"\u6a21\u677f",selecttemplate:"\u9009\u62e9\u6a21\u677f",notemplate:"\u65e0\u6a21\u677f",preview:"\u9884\u89c8",link:"\u94fe\u63a5",page:"\u7f51\u9875",name:"\u540d\u79f0",editorpage:"\u7f16\u8f91\u7f51\u9875",sort:"\u6392\u5e8f",module:"\u6a21\u5757",editorsubmodule:"\u7f16\u8f91\u6a21\u5757",mymodule:"\u6211\u7684\u6a21\u5757",me:"\u6211\u7684",tag:"\u6807\u7b7e",set:"\u8bbe\u7f6e",team:"\u56e2\u961f",myteam:"\u6211\u7684\u56e2\u961f",privatedetail:"\u4e2a\u4eba\u660e\u7ec6",logout:"\u9000\u51fa\u767b\u9646",about:"\u5173\u4e8e",password:"\u5bc6\u7801",account:"\u8d26\u6237\u4fe1\u606f",version:"Version",privacypolicy:"\u9690\u79c1\u653f\u7b56",personalinformation:"\u4e2a\u4eba\u4fe1\u606f",headportrait:"\u5934\u50cf",all:"\u5168\u90e8",submit:"\u63d0\u4ea4",select:"\u9009\u62e9",save:"\u4fdd\u5b58",copy:"\u590d\u5236",copysuccess:"\u590d\u5236\u6210\u529f",editor:"\u7f16\u8f91",pleaseselect:"\u8bf7\u9009\u62e9",timepublish:"\u65f6\u95f4\u53d1\u5e03",veryimport:"\u91cd\u8981",general:"\u666e\u901a"},$en:{post:"Post",noposts:"None",editorpost:"Edit",searchpost:"Search post",postdetailed:"Detail",title:"Title",describe:"Describe",content:"Content",publish:"Publish",productpublish:"Publish For Product",selectproduct:"Select Product",ordinarypublish:"Publish Fro Ordinary",noproduct:"No Product",sales:"Internal Sales",agent:"ight Agent",privateSite:"Private Site",publicSite:"Public Site",internationSite:"Internation Site",sourcecode:"Code",picture:"Picture",searchpicture:"Search picture",selectpicture:"Select picture",editorpicture:"Editor picture",nopicture:"No picture",uploadpicture:"Upload picture",uploadfile:"Upload audio",template:"Template",selecttemplate:"Select template",notemplate:"No template",preview:"Preview",page:"Page",name:"Name",editorpage:"Editor page",sort:"Sort",module:"Mdule",editorsubmodule:"Editor Sub module",mymodule:"My module",me:"Me",tag:"Tag",set:"Set",logout:"Logout",about:"About",password:"Password",account:"Account",version:"Version",privacypolicy:"Privacy policy",personalinformation:"Personal information",headportrait:"Head Portrait",all:"All",submit:"Submit",select:"Select",save:"Save",copy:"Copy",copysuccess:"Copy Success",editor:"Editor",pleaseselect:"Please select",veryimport:"Very Import",general:"General"}},Mn=(mn=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(C.a)(e,"pagePosts",dn,Object(L.a)(e)),Object(C.a)(e,"pageMedia",fn,Object(L.a)(e)),e.onScrollBottom=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.pagePosts.more();case 2:case"end":return t.stop()}}),t)}))),e.searchMadiaKey=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.pageMedia=new j.QueryPager(e.uqs.webBuilder.SearchImage,15,30),e.pageMedia.first({key:r,types:q});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onPickedImage=function(t){e.closePage(),e.returnCall(e.uqs.webBuilder.Image.boxId(t))},e}return Object(w.a)(r,[{key:"internalStart",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(k),dn=Object(S.a)(mn.prototype,"pagePosts",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fn=Object(S.a)(mn.prototype,"pageMedia",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mn),Rn=(bn=I.observable.ref,hn=I.observable.ref,vn=I.observable.ref,gn=I.observable.ref,wn=I.observable.ref,yn=I.observable.ref,xn=function(){function e(t,r){var n=this;Object(g.a)(this,e),this.cApp=void 0,this.id=void 0,this.seq=void 0,Object(C.a)(this,"props",jn,this),Object(C.a)(this,"productGenre",On,this),Object(C.a)(this,"productSource",Pn,this),Object(C.a)(this,"productDetailPost",En,this),Object(C.a)(this,"productOther",kn,this),Object(C.a)(this,"htmlFragment",Nn,this),this.getSelfProductPrice=function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.cApp.uqs.product.GetPointProductMoreBySource.obj({pack:t,salesRegion:n.cApp.currentSalesRegion});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getJDProductPrice=function(){var e=Object(v.a)(h.a.mark((function e(t){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.cApp.cProduct.getJDProductPrice(t);case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.abrupt("return",r[0]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getPostViewData=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getPointProductDetailPostHtml();case 2:return e.next=4,n.loadProductSource();case 4:case"end":return e.stop()}}),e)}))),this.getPointProductDetailPostHtml=Object(v.a)(h.a.mark((function e(){var t,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.htmlFragment){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,window.fetch(Z.CONTENTSITE+"/partial/pointproductdetail/"+n.id);case 4:if((t=e.sent).ok){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,t.text();case 9:r=e.sent,n.htmlFragment=r;case 11:case"end":return e.stop()}}),e)}))),this.addPointProductDetailPost=function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.cApp.uqs.\u79ef\u5206\u5546\u57ce.PointProductDetail.add({pointProduct:n.id,content:t});case 2:return n.productDetailPost=void 0,e.next=5,n.loadProductDetailPost();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.cApp=t,this.id="object"===typeof r?r.id:r}return Object(w.a)(e,[{key:"loadListItem",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadBase();case 2:return t=[this.loadProductSource(),this.loadProductDetailPost()],e.next=5,Promise.all(t);case 5:return e.next=7,this.loadProductPriceAOrigin();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadProductDetail",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadBase();case 2:return t=[this.loadProductGenre(),this.loadProductSource()],e.next=5,Promise.all(t);case 5:return e.next=7,this.loadProductPriceAOrigin();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadBase",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cApp.cProduct.getPointProductLibLoad(this.id);case 2:t=e.sent,this.props=t;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadProductGenre",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.productGenre){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.cApp.uqs.\u79ef\u5206\u5546\u57ce.GetPointProductGenre.obj({pointProduct:this.id});case 4:t=e.sent,this.productGenre=t?t.genre:t;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadProductSource",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.productSource){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.cApp.uqs.\u79ef\u5206\u5546\u57ce.PointProductSource.obj({pointProduct:this.id,sourceId:void 0});case 4:t=e.sent,this.productSource=t;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadProductPriceAOrigin",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t,r,n,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.productOther&&this.productSource){e.next=2;break}return e.abrupt("return");case 2:if(t=this.productSource,r=t.sourceId,"self"!==(n=t.type)){e.next=8;break}return e.next=6,this.getSelfProductPrice(r);case 6:a=e.sent,a=Object(Ue.a)(Object(Ue.a)({},a),{},{price:null===(c=a)||void 0===c?void 0:c.retail});case 8:if("jd.com"!==n){e.next=14;break}return e.next=12,this.getJDProductPrice(r);case 12:a=e.sent,a=Object(Ue.a)(Object(Ue.a)({},a),{},{origin:r});case 14:this.productOther=a;case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadProductDetailPost",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.productDetailPost){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.cApp.uqs.\u79ef\u5206\u5546\u57ce.PointProductDetail.obj({pointProduct:this.id});case 4:t=e.sent,this.productDetailPost=t?t.content:t;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),jn=Object(S.a)(xn.prototype,"props",[bn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),On=Object(S.a)(xn.prototype,"productGenre",[hn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pn=Object(S.a)(xn.prototype,"productSource",[vn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),En=Object(S.a)(xn.prototype,"productDetailPost",[gn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kn=Object(S.a)(xn.prototype,"productOther",[wn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nn=Object(S.a)(xn.prototype,"htmlFragment",[yn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xn),qn=r(271),Wn=r(272),Hn=r(268),Zn=r(270),Yn=[{name:"brand",type:"string",required:!1},{name:"discount",type:"string",required:!0}],Kn=(Cn=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).form=void 0,Object(C.a)(e,"searchBrands",Sn,Object(L.a)(e)),e.uiSchema={items:{brand:{visible:!1},discount:{widget:"text",label:"\u54c1\u724c\u6298\u6263",placeholder:"\u54c1\u724c\u6298\u6263",rules:U},submit:{widget:"button",label:"\u63d0\u4ea4"}}},e.creatBrandDiscount=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.form){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.form.buttonClick("submit");case 4:case"end":return t.stop()}}),t)}))),e.onFormButtonClick=function(){var t=Object(v.a)(h.a.mark((function t(r,n){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.data,t.next=3,e.controller.createBrandDiscount(a);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.renderBrands=function(t,r){var n=t.name,a=t.show,c=t.discount,i=t.id;return p.createElement("div",{className:"row mx-0 flex-column",style:{background:a?"#ffffff":"#f5f5f5"}},p.createElement("div",{className:"py-2 px-3 w-100"},p.createElement("span",null,n),p.createElement(j.FA,{name:a?"angle-up":"angle-down",className:je()("float-right",a?"text-primary":"")})),a?p.createElement("div",{onClick:function(e){e.stopPropagation()},className:"p-2",style:{borderTop:"1px dashed #cccccc"}},p.createElement(j.Form,{ref:function(t){return e.form=t},schema:Yn,uiSchema:e.uiSchema,formData:{brand:i,discount:c},onButtonClick:e.onFormButtonClick,fieldLabelSize:3}),p.createElement("div",{className:"d-flex"},p.createElement("button",{className:"btn btn-primary w-50 mx-auto",onClick:function(){e.creatBrandDiscount()}},c?"\u4fee\u6539":"\u521b \u5efa"))):null)},e.selectBrands=function(){var t=Object(v.a)(h.a.mark((function t(r){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.controller.getBrandDiscount(r.id);case 2:return n=t.sent,t.next=5,e.searchBrands.forEach((function(e){e.id===r.id?(e.discount=n?100*(1-n.discount):null,e.show=!e.show):e.show=!1}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.page=Object(D.observer)((function(){var t=e.controller.renderSearchHeader();return p.createElement(j.Page,{header:t},p.createElement(j.List,{items:e.searchBrands,item:{render:e.renderBrands,onClick:e.selectBrands}}))})),e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.searchBrands=(null===t||void 0===t?void 0:t.map((function(e){return Object(Ue.a)(Object(Ue.a)({},e),{},{show:!1})})))||[],this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(j.VPage),Sn=Object(S.a)(Cn.prototype,"searchBrands",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Cn),Qn=(In=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(C.a)(e,"modifyDiscountList",An,Object(L.a)(e)),Object(C.a)(e,"list",Ln,Object(L.a)(e)),e.renderDiscount=function(t){var r=t.brand,n=t.discount,a=t.disabled,c=100*(1-n),i=e.modifyDiscountList.find((function(e){return e.brand.id===r.id})),o=p.createElement("div",{className:"mr-2 mt-1 col-12"},p.createElement("span",{onClick:function(){t.disabled=!t.disabled}},p.createElement(j.FA,{name:a?"edit":"undo",className:"text-primary mr-2"})),!a&&i&&p.createElement("span",{onClick:function(){e.saveBrandDisCount(t)}},p.createElement(j.FA,{name:"save",className:"text-primary mr-2"})));return p.createElement(j.LMR,{className:"w-100",right:o},p.createElement("div",{className:"row mx-0 py-2"},p.createElement("div",{className:"col-12 col-sm-4 small py-1"},Object(j.tv)(r,(function(e){return p.createElement(p.Fragment,null,e.name)}))),p.createElement("div",{className:"col-12 col-sm-8 small"},p.createElement(Jn,{defaultValue:c,disabled:a,inputValue:c,onChange:function(n){!function(n){var a=e.modifyDiscountList.findIndex((function(e){return e.brand.id===r.id})),c=(1-n/100).toFixed(2);-1===a?e.modifyDiscountList.push(Object(Ue.a)(Object(Ue.a)({},t),{},{discount:c})):e.modifyDiscountList[a].discount=c}(n)}}))))},e.onScrollBottom=function(){var t=Object(v.a)(h.a.mark((function t(r){var n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.controller.brandMinDiscounts,e.list.length!==a.items.length&&r.scrollToBottom(),t.next=4,a.more();case 4:e.list=null===(n=e.controller.brandMinDiscounts)||void 0===n?void 0:n.items.map((function(e){return e}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.saveBrandDisCount=function(){var t=Object(v.a)(h.a.mark((function t(r){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.modifyDiscountList.findIndex((function(e){return e.brand.id===r.brand.id})),r.discount=Number(e.modifyDiscountList[n].discount),t.next=4,e.controller.addBrandMinDiscount(r);case 4:e.list.forEach((function(e){e.brand.id===r.brand.id&&(e.disabled=!0)})),e.modifyDiscountList.splice(n,1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.page=Object(D.observer)((function(){e.controller.saveBrandDisCount;var t=p.createElement(p.Fragment,null,p.createElement("button",{className:"btn btn-sm btn-primary mr-3",onClick:function(){e.openVPage(Kn)}},"\u521b \u5efa"));return p.createElement(j.Page,{header:"\u54c1\u724c\u6298\u6263",right:t,onScrollBottom:e.onScrollBottom},p.createElement(j.List,{items:e.list,item:{render:e.renderDiscount},none:""}))})),e}return Object(w.a)(r,[{key:"open",value:function(){var e=Object(v.a)(h.a.mark((function e(t){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.list=[].concat((null===(r=this.controller.brandMinDiscounts)||void 0===r?void 0:r.items)||[]),this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(j.VPage),An=Object(S.a)(In.prototype,"modifyDiscountList",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ln=Object(S.a)(In.prototype,"list",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),In),Jn=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(e){var n;return Object(g.a)(this,r),(n=t.call(this,e)).state={inputValue:1},n.onChange=function(e){n.setState({inputValue:e}),n.props.onChange(e)},n.state={inputValue:e.inputValue},n}return Object(w.a)(r,[{key:"render",value:function(){var e=this.props,t=e.defaultValue,r=e.disabled,n=this.state.inputValue,a={0:"0%",100:{style:{color:"#f50"},label:p.createElement("strong",null,"100%")}};return p.createElement(qn.a,null,p.createElement(Wn.a,{span:16},p.createElement(Hn.a,{min:0,max:100,onChange:this.onChange,value:"number"===typeof n?n:0,defaultValue:t,marks:a,disabled:r})),p.createElement(Wn.a,{span:4},p.createElement(Zn.a,{min:0,max:100,className:"ml-3 mr-2",value:n,defaultValue:t,onChange:this.onChange,formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")},disabled:r})))}}]),r}(p.Component),Xn=(Bn=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(C.a)(e,"brandMinDiscounts",Dn,Object(L.a)(e)),Object(C.a)(e,"brands",Gn,Object(L.a)(e)),e.openBrandDiscount=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getBrandMinDiscount();case 2:e.openVPage(Qn);case 3:case"end":return t.stop()}}),t)}))),e.renderSearchHeader=function(t){return e.renderView(He,t)},e.productConverter=function(e,t){return e.disabled=!0,e},e.getBrandMinDiscount=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.brandMinDiscounts=new j.QueryPager(e.uqs.\u79ef\u5206\u5546\u57ce.getBrandMinDiscount,10,15),e.brandMinDiscounts.setItemConverter(e.productConverter),t.next=4,e.brandMinDiscounts.first({});case 4:case"end":return t.stop()}}),t)}))),e.searchBrand=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.uqs.product.Brand.search(r,0,40);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.createBrandDiscount=function(){var t=Object(v.a)(h.a.mark((function t(r){var n,a,c,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.brand,a=r.discount,t.next=3,e.getBrandDiscount(n);case 3:return c=t.sent,i={brand:n,discount:Math.round(100*(100-Number(a)))/100/100,isValid:(null===c||void 0===c?void 0:c.isValid)||1},t.next=7,e.addBrandMinDiscount(i);case 7:e.closePage();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getBrandDiscount=function(){var t=Object(v.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.uqs.\u79ef\u5206\u5546\u57ce.BrandMinDiscount.obj({brand:r});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.addBrandMinDiscount=function(){var t=Object(v.a)(h.a.mark((function t(r){var n,a,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.brand,a=r.discount,c=r.isValid,t.next=3,e.uqs.\u79ef\u5206\u5546\u57ce.BrandMinDiscount.add({brand:n,discount:a,isValid:c});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.delBrandMinDiscount=function(){var t=Object(v.a)(h.a.mark((function t(r){var n,a,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.brand,a=r.discount,c=r.isValid,t.next=3,e.uqs.\u79ef\u5206\u5546\u57ce.BrandMinDiscount.del({brand:n,discount:a,isValid:c});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.saveBrandDisCount=function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e}return Object(w.a)(r,[{key:"internalStart",value:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.searchBrand(t);case 2:this.brands=e.sent,this.closePage(),this.openVPage(Kn,this.brands);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(k),Dn=Object(S.a)(Bn.prototype,"brandMinDiscounts",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gn=Object(S.a)(Bn.prototype,"brands",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Bn),_n=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).cache=void 0,e.topKey=void 0,e.currentSalesRegion=void 0,e.currentLanguage=void 0,e.currentUser=void 0,e.cLordScreen=void 0,e.cMe=void 0,e.cGenre=void 0,e.cProduct=void 0,e.cPointProduct=void 0,e.cLottery=void 0,e.cReport=void 0,e.cMedia=void 0,e.cPosts=void 0,e.cBrandDiscount=void 0,e.userCache=void 0,e}return Object(w.a)(r,[{key:"internalStart",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t,r,n,a,c,i,o,s,u,l=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.uqs,r=t.common,n=r.SalesRegion,a=r.Language,e.next=5,Promise.all([n.load(Z.SALESREGION_CN),a.load(Z.CHINESE)]);case 5:return c=e.sent,i=Object(O.a)(c,2),o=i[0],s=i[1],this.currentSalesRegion=o,this.currentLanguage=s,this.setRes(Tn),u=function(){var e=Object(v.a)(h.a.mark((function e(t){var r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.uqs.hr.SearchEmployeeByid.query({_id:t});case 2:return n=e.sent,e.abrupt("return",null===n||void 0===n||null===(r=n.ret)||void 0===r?void 0:r[0]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.userCache=new j.UserCache(u),this.currentUser=new A(this.uqs),this.isLogined&&this.currentUser.setUser(this.user),this.cache=new Map,this.cLordScreen=this.newC(ze),this.cMe=this.newC(De),this.cProduct=this.newC(Pr),e.next=22,this.cProduct.getProductLib();case 22:return this.cPointProduct=this.newC(Nr),this.cGenre=this.newC(Be),e.next=26,this.cGenre.getProductGenres();case 26:this.cLottery=this.newC(Ce),this.cReport=this.newC(Gr),this.cMedia=this.newC(Fn),this.cPosts=this.newC(Mn),this.cBrandDiscount=this.newC(Xn),this.topKey=j.nav.topKey(),this.showMain();case 33:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"showMain",value:function(e){this.openVPage(E,e)}},{key:"renderUser",value:function(e){var t=this.userCache.getValue(e);switch(typeof t){case"undefined":case"number":return e}return t.name}},{key:"useUser",value:function(e){this.userCache.use(e)}},{key:"getPointProduct",value:function(e){if(e){"object"===typeof e&&(e=e.id);var t=this.cache.get(e);return t||(t=new Rn(this,e),this.cache.set(e,t)),t}}}]),r}(N);j.nav.setSettings(R);var $n=function(e){Object(y.a)(r,e);var t=Object(x.a)(r);function r(){var e;Object(g.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).onLogined=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.start)(_n,R);case 2:case"end":return e.stop()}}),e)}))),e}return Object(w.a)(r,[{key:"render",value:function(){return p.createElement(j.NavView,{onLogined:this.onLogined})}}]),r}(p.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));f.a.render(m.a.createElement($n,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},71:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAABGCAYAAACQRffVAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAF8mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjAtMDUtMjlUMTU6MDY6MzgtMDQ6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIwLTA1LTI5VDE3OjE4OjM2LTA0OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIwLTA1LTI5VDE3OjE4OjM2LTA0OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmE3ZjJlZGZmLTlkMzUtNDBiNy1hNmRhLTNlNDZjZWMwOWJiZiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3ZmY0N2IxZC1mZmYwLTQ3ZWMtYjVhNS1hZDZkOGNkY2Y2MzEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3ZmY0N2IxZC1mZmYwLTQ3ZWMtYjVhNS1hZDZkOGNkY2Y2MzEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjdmZjQ3YjFkLWZmZjAtNDdlYy1iNWE1LWFkNmQ4Y2RjZjYzMSIgc3RFdnQ6d2hlbj0iMjAyMC0wNS0yOVQxNTowNjozOC0wNDowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmE3ZjJlZGZmLTlkMzUtNDBiNy1hNmRhLTNlNDZjZWMwOWJiZiIgc3RFdnQ6d2hlbj0iMjAyMC0wNS0yOVQxNzoxODozNi0wNDowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+BVuKlQAACWlJREFUeJzlm32QVlUdxz/Pw8MuLAgIsiAvusKAxC6p1JBoYhKCVtSgGGSWOaKCFjKppJjNOFraCxVaEwUiE5ZCmQahEVC8hLptqEWstpBAA4jBKiDs6i672x/fe3nuc577cu7zXJxl+MzsPPece86553vvefmd3zmbqq6o5OQiVWjGjwK3ZhKsyQdEGwWKXggMTydbmXbLIOA8YMmpIvi7zu8rp4LgjwCTnesXTwXBjzi/e4EtJ6ngNtuEVwAXOdcvAE0nqWBrFnuuVwHEmZY6Af3Q620DdsbIexaaS0qAfcC7TvwZTrlnopF0H1ADdAbqY5Tvx/eAPp7waogn+BHgeiR2E/BJ434K/7Y2CfgV2clzMBJ8F3A3UAp0ce7d51SyJ7AOeD1G/byc45Tv8gqwCyBOk56EvlAp8Jon/gb09o4Aa4GbjHyfRl+sE1CLBo9Z6Av0RGLrgIHABmCCU6/+Mepm8hsjvMy9sBVciZqfyzPO77eARcA4YBswFvgFaqIuF3qun0Zif+SJWwmMBHYDrcB24G3gv8HVCbW0HkBTkZelx3Na2tLTgZ85128j8V3I9sVrURPc64TLgf1ABfCGp4a7gQGech8C5hjPKgE6AkeDqxMo+GPAS0bcKjRaA/ZfeLznugb11SNAgxM3B9jqXH8BiQW42KidVyzAoz7PaqIwsWWotZj81BuwEdwZuNQTft75vcypHEAV+uKjgac8aT8RUfbtFs/3ENqUnwV6GXF7gRXeCFNwN2AIMBH4shPXHw0uLr8DZgJ/Bnp44g87+V4n22cuNsp/EfV1l6lhCnIJFfsgcLlP/HwzwhR8PRoxlzuFgAYZl7+iIX+eE54EXEC2X88BzkX9pgz4kCfvcmT1/METdza5g1oAoWInA/f6xDeRHXeOYwo+3XPdHdgI3OaJu4/c/nwEfdHtRjkHgc94wo3ANc61ObdeQyihYoeSPwW5zAMOmJGm4PWe627Axz3hhWgk3u+JW43EjDLK+Ry5/fMNsv3dHEW/Tn7fs6ED8MeAe8eAb/vdMC2t9cB1aBoqd+K2AkvIzr3znHxj0Xx7AFkyj6E+Owi1hC+RHeC8L7IWWVgdnXAZMkp8CP2661D38uPHwCHfEtu3TytQ8ELgxoB7jWg8aUAtJ8cmb6erpRQhYucTLBZgGhL7T2SI5NAOBYc24zuAW0Luvwb8Gr2UEUC1maCdCQ4VOxP4QUQBo5A79hYkPm+JGSI4ZfydaEKfcS/ZuT+I2Wia3OCE1/olytiL8aazdrHELNeXnwM3R6R5AXgS2QOdnbggwYUQtNaPky9SaAp4HFl/YexAfXYFci6AlplJCnbrE0d0yvgNpQvwHDDGIu1BZNIO88StJbt0zSFq0LodeSACiOrfBY0BlcDL2IkF2fLDjLjHghKHCV6JLJaW6Geaggoe6KYgq21oIZkdDqGloi9+gtPIFPwUWh2tsXtO0SP6/Wgt3TEqYQTzgfeDbvr14fVkFw2Li3y4DecgU3FsQuWFTl/mF55NVmwz1l+3YKYgEzApsYuBN8MSpKorqtzrM8k64UCrmhO1suiF/NzXJlhmM1o0HA5L5P3CM417hTrBo7gOmX1JigWYQYRYyAouJd8oN70YxTISOQyWAL0TLnsl2t24NCqhK/hCct07kJwBfR5y1m9GDvuk2Y/cRDVoFyQUV3DeupFkVlL3A6/aVKRADqKu8RByFT8RlcGdlob73Aucy2IwIoEygmgGfgtcjVxS76BFRCjuVzzX514fn7i4XIUceqbjLglakWd0uhNeRnYnJBBXsJ8BUuUTVwjL0Y7EVLS3lBSlQF9PeIFNJlew38piBLk7C8WyFL3EZVEJC2ANGhQjSSN36iCfe2XAZxOsFMiwnwLMTbjcGbYJ08Av0ZaHH9MD4k06oz2pkWilc1pE+jvRhngSzCXX0xFKmvCOPprwuXM8MvzrkCm6GVlRdWhX4AaCp7dvkPU/Fco29PIeQN7KSNIhFXJZhLY1vHRDc94q5CMeQHbgS6PBZIKTtw51Gz+uovDp7wDyUN4GfBNLyzBN6NECQGcvnvSEzwf+DnzRsmKDUbdZ5HOvHjkZ4nIULQPvAX7ixFmNCx1u6lF+NTqaEEYl0BUtvTaRe4bDlgvQVGI612rQsjSOKdsEfBi40gk/Q4hbx0ua3A3qMO4EtiDhhXIP+fP7IeBPMcvpis6MuTxsmzGN3vAHySyfuOeKKG8T8DfbxGl0hOFYEQ88TiqToaWhgfd27qRp75vQ1gapvDFxIvnNt5i1t3kuLJQ0GmVbi3ggAKlMB5re+h/p0lL6TvtK9ekTxl3S0tCwlLa8osvRnO1lF4W99AXkHpKLJI2O6JUU8LAcjtW/Q6ezB3D+hucZuuDRwZXLnxrSb8a0qY07t93hk7zCCNejfaE47CJ6CyaPNHKiFU1rcxOZXr3I9O4NcEbLkSM3H36ppmemaw/zbBbk7863Em8b4wA6EhVl0eWRQQt0W69h4H9YlPTpQ8O/atlcOYqyquFNzfve6n10S+2u0rMGdm071uxN+hfnmV7Kke1uwx7k4bjVyfNVy3yAvvDGGOnfRd7GreaNtpYWMt2709LQyMG160oa/7NjcOnA/q7YFmSVTUIv17SuKtAcbcMeNL3dhYWHwyRVXVHVySmkZ1Ri1PRcM3McMh+vJNqdW0/u4VSTmUTv/5psRqZlLNLAe2T/68Mm/Wjneg16yyMJPRsJqOmFWWe2G2deZhWQ5/jCYT4Bx3x8MI8TNiFbOYxDBI/CaUJ3KH15Gu17xcYVfDf2g4afU+A7EXn2ELBfiwadOOZqCzEW/Cau4Frsd+0uIf/k3W50GC2IIHt9GPbdyWUyuacBY+EKfoKAIwIBfN8n7kG0bPTjcZ+4icgGDjiF58vDhOz92uA1dKfgcxgzgDH4e0LG4+/FGIF2IC5Cno6NyJsZx3CYi6ajovDuHoL808+Sf4TAj33o33OajfgbkdsnSX6IDqUVjbmU+TfO//dY0Jf85jUb48h9kbQBXyMhsSCPhxlXiv1J9SHoK6fR1DaNok4G5fAPtLPw+4TKA/KbtMvl6LyFjfWVNPVocyxp3zUQ7LFcjXxGKwLunwh2oKY7jBMkFsKb3x5kZFwBfB5ZQ/1C0hfCdmQxLUN+7CTPNPoS1KT9OA15HiuRI841VI6ig2SvIu//GDTaD0XjQRq92PeRV6MOzdcvO78W58CS4/9wHebwFytHEwAAAABJRU5ErkJggg=="}},[[163,1,2]]]);
//# sourceMappingURL=main.23586c0c.chunk.js.map